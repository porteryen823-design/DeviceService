2025-10-21 14:54:36,649 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:54:36,653 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:54:36,653 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:54:36,655 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:54:36,656 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:54:36,658 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:54:36,659 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:54:36,659 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:54:36,660 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:54:36,660 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:54:36,661 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:54:36,662 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:54:36,664 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:54:36,665 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:54:36,666 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:54:36,666 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:54:36,667 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:54:36,667 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:54:36,668 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:54:36,882 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:54:36,882 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:54:36,882 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:54:36,883 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:54:36,883 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:54:36,884 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:54:36,885 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:54:37,270 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:54:37,271 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:54:37,271 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:54:37,286 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:54:37,748 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:54:37,749 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:54:37,750 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:54:37,750 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:54:37,751 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:54:37,753 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:54:37,754 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:54:37,755 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:54:37,756 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:54:37,756 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:54:37,758 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:54:37,759 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:54:37,760 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:54:37,763 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:54:37,765 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:54:37,766 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:54:37,767 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:54:37,767 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:54:37,767 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:54:37,768 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:54:37,769 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:54:37,770 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:54:38,213 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:54:38,214 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:54:38,215 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:54:38,215 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:54:38,620 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:54:38,621 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:54:38,621 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:54:38,622 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:54:38,622 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:54:38,623 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:54:38,624 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:54:38,625 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:54:38,627 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:54:38,627 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:54:38,627 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:54:38,627 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:54:38,629 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:54:38,630 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:54:38,632 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:54:38,633 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:54:38,633 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:54:38,634 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:54:38,635 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:54:38,635 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:54:38,636 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:54:38,650 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:54:39,016 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:54:39,017 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:54:39,017 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:54:39,037 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:54:39,403 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:54:39,404 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:54:39,405 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:54:39,405 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:54:39,406 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:54:39,408 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:54:39,409 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:54:39,411 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:54:39,412 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:54:39,412 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:54:39,412 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:54:39,413 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:54:39,413 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:54:39,415 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:54:39,417 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:54:39,418 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:54:39,418 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:54:39,418 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:54:39,419 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:54:39,419 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:54:39,420 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:54:39,625 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:54:39,626 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:54:39,627 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:54:39,627 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:54:39,628 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:54:39,628 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:54:39,640 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:54:39,989 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:54:39,990 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:54:39,991 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:54:39,991 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:54:40,338 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:54:40,339 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:54:40,339 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:54:40,340 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:54:40,340 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:54:40,342 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:54:40,343 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:54:40,343 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:54:40,344 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:54:40,344 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:54:40,345 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:54:40,347 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:54:40,347 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:54:40,348 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:54:40,349 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:54:40,350 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:54:40,350 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:54:40,350 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:54:40,352 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:54:40,352 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:54:40,353 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:54:40,369 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:54:40,750 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:54:40,751 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:54:40,751 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:54:40,773 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:54:41,144 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:54:41,145 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:54:41,146 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:54:41,147 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:54:41,147 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:54:41,149 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:54:41,150 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:54:41,152 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:54:41,152 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:54:41,152 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:54:41,153 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:54:41,153 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:54:41,154 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:54:41,156 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:54:41,157 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:54:41,158 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:54:41,158 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:54:41,159 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:54:41,159 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:54:41,160 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:54:41,161 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:54:41,161 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:54:41,559 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:54:41,560 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:54:41,561 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:54:41,562 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:54:41,920 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:54:41,921 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:54:41,921 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:54:41,922 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:54:41,922 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:54:41,924 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:54:41,925 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:54:41,926 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:54:41,926 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:54:41,927 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:54:41,928 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:54:41,929 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:54:41,929 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:54:41,931 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:54:41,932 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:54:41,933 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:54:41,934 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:54:41,934 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:54:41,935 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:54:41,935 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:54:41,935 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:54:42,132 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:54:42,133 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:54:42,133 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:54:42,134 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:54:42,134 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:54:42,134 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:54:42,147 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:54:42,603 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:54:42,604 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:54:42,605 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:54:42,624 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:54:43,098 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:54:43,099 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:54:43,100 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:54:43,101 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:54:43,101 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:54:43,103 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:54:43,104 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:54:43,105 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:54:43,106 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:54:43,106 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:54:43,108 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:54:43,108 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:54:43,109 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:54:43,110 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:54:43,112 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:54:43,113 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:54:43,114 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:54:43,114 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:54:43,115 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:54:43,115 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:54:43,115 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:54:43,117 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:54:43,557 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:54:43,558 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:54:43,559 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:54:43,559 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:54:43,964 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:54:43,966 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:54:43,967 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:54:43,968 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:54:43,968 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:54:43,970 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:54:43,971 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:54:43,972 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:54:43,973 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:54:43,974 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:54:43,975 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:54:43,976 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:54:43,976 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:54:43,977 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:54:43,979 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:54:43,980 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:54:43,981 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:54:43,982 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:54:43,982 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:54:43,983 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:54:43,983 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:54:44,003 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:54:44,434 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:54:44,435 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:54:44,435 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:54:44,437 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:54:44,775 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:54:44,776 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:54:44,776 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:54:44,777 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:54:44,778 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:54:44,780 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:54:44,781 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:54:44,782 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:54:44,782 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:54:44,783 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:54:44,784 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:54:44,784 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:54:44,785 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:54:44,786 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:54:44,787 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:54:44,788 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:54:44,789 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:54:44,789 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:54:44,789 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:54:44,791 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:54:44,792 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:54:45,004 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:54:45,004 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:54:45,004 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:54:45,005 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:54:45,006 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:54:45,006 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:54:45,008 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:54:45,532 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:54:45,534 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:54:45,534 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:54:45,536 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:54:46,203 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:54:46,204 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:54:46,204 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:54:46,205 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:54:46,207 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:54:46,208 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:54:46,210 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:54:46,210 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:54:46,211 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:54:46,211 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:54:46,212 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:54:46,213 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:54:46,214 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:54:46,216 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:54:46,217 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:54:46,218 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:54:46,219 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:54:46,220 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:54:46,220 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:54:46,221 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:54:46,221 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:54:46,243 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:54:46,697 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:54:46,698 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:54:46,699 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:54:46,700 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:54:47,077 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:54:47,078 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:54:47,078 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:54:47,079 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:54:47,079 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:54:47,080 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:54:47,082 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:54:47,083 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:54:47,084 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:54:47,084 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:54:47,085 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:54:47,085 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:54:47,086 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:54:47,088 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:54:47,089 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:54:47,090 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:54:47,090 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:54:47,091 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:54:47,091 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:54:47,091 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:54:47,092 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:54:47,112 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:54:47,500 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:54:47,501 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:54:47,501 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:54:47,516 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:54:47,876 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:54:47,878 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:54:47,878 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:54:47,879 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:54:47,879 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:54:47,882 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:54:47,883 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:54:47,884 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:54:47,885 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:54:47,885 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:54:47,886 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:54:47,887 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:54:47,887 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:54:47,889 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:54:47,890 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:54:47,891 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:54:47,892 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:54:47,892 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:54:47,893 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:54:47,893 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:54:47,893 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:54:48,088 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:54:48,088 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:54:48,088 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:54:48,089 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:54:48,089 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:54:48,089 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:54:48,090 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:54:48,418 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:54:48,419 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:54:48,420 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:54:48,420 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:54:48,774 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:54:48,775 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:54:48,775 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:54:48,775 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:54:48,777 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:54:48,778 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:54:48,779 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:54:48,779 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:54:48,780 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:54:48,780 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:54:48,781 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:54:48,781 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:54:48,782 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:54:48,783 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:54:48,784 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:54:48,784 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:54:48,785 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:54:48,785 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:54:48,785 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:54:48,786 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:54:48,786 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:54:48,787 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:54:49,132 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:54:49,134 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:54:49,134 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:54:49,147 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:54:49,487 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:54:49,488 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:54:49,488 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:54:49,489 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:54:49,489 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:54:49,490 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:54:49,491 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:54:49,491 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:54:49,492 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:54:49,492 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:54:49,492 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:54:49,493 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:54:49,493 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:54:49,495 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:54:49,495 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:54:49,495 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:54:49,496 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:54:49,496 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:54:49,496 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:54:49,497 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:54:49,497 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:54:49,498 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:54:49,834 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:54:49,835 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:54:49,835 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:54:49,835 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:54:50,162 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:54:50,163 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:54:50,164 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:54:50,164 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:54:50,165 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:54:50,165 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:54:50,167 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:54:50,168 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:54:50,168 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:54:50,169 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:54:50,169 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:54:50,170 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:54:50,170 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:54:50,172 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:54:50,173 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:54:50,174 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:54:50,174 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:54:50,175 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:54:50,175 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:54:50,176 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:54:50,176 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:54:50,369 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:54:50,370 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:54:50,370 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:54:50,371 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:54:50,371 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:54:50,372 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:54:50,373 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:54:50,720 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:54:50,721 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:54:50,722 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:54:50,722 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:54:51,073 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:54:51,074 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:54:51,074 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:54:51,075 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:54:51,075 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:54:51,077 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:54:51,079 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:54:51,080 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:54:51,081 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:54:51,081 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:54:51,082 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:54:51,082 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:54:51,083 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:54:51,085 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:54:51,086 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:54:51,086 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:54:51,087 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:54:51,087 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:54:51,088 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:54:51,088 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:54:51,088 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:54:51,089 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:54:51,408 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:54:51,409 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:54:51,409 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:54:51,423 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:54:51,782 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:54:51,783 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:54:51,784 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:54:51,784 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:54:51,785 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:54:51,785 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:54:51,787 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:54:51,788 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:54:51,788 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:54:51,789 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:54:51,790 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:54:51,790 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:54:51,791 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:54:51,792 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:54:51,792 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:54:51,793 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:54:51,794 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:54:51,795 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:54:51,795 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:54:51,795 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:54:51,796 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:54:51,810 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:54:52,200 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:54:52,201 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:54:52,202 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:54:52,203 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:54:52,619 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:54:52,620 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:54:52,621 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:54:52,621 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:54:52,622 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:54:52,623 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:54:52,625 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:54:52,625 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:54:52,626 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:54:52,626 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:54:52,627 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:54:52,627 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:54:52,628 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:54:52,630 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:54:52,631 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:54:52,632 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:54:52,633 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:54:52,633 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:54:52,634 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:54:52,634 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:54:52,634 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:54:52,825 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:54:52,825 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:54:52,826 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:54:52,826 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:54:52,827 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:54:52,827 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:54:52,829 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:54:53,194 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:54:53,195 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:54:53,196 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:54:53,197 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:54:53,544 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:54:53,545 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:54:53,547 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:54:53,548 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:54:53,548 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:54:53,549 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:54:53,550 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:54:53,551 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:54:53,552 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:54:53,552 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:54:53,553 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:54:53,554 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:54:53,554 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:54:53,555 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:54:53,556 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:54:53,557 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:54:53,558 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:54:53,558 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:54:53,558 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:54:53,559 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:54:53,559 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:54:53,560 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:54:53,953 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:54:53,955 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:54:53,955 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:54:53,968 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:54:54,350 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:54:54,351 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:54:54,351 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:54:54,352 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:54:54,353 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:54:54,355 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:54:54,357 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:54:54,358 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:54:54,359 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:54:54,359 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:54:54,360 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:54:54,360 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:54:54,361 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:54:54,362 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:54:54,363 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:54:54,364 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:54:54,365 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:54:54,366 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:54:54,366 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:54:54,367 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:54:54,367 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:54:54,368 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:54:54,805 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:54:54,806 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:54:54,808 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:54:54,809 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:54:55,194 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:54:55,196 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:54:55,196 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:54:55,198 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:54:55,198 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:54:55,199 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:54:55,201 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:54:55,202 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:54:55,203 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:54:55,204 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:54:55,204 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:54:55,205 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:54:55,205 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:54:55,207 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:54:55,208 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:54:55,209 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:54:55,209 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:54:55,210 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:54:55,210 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:54:55,210 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:54:55,211 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:54:55,411 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:54:55,412 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:54:55,412 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:54:55,413 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:54:55,413 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:54:55,414 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:54:55,427 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:54:55,804 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:54:55,805 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:54:55,805 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:54:55,827 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:54:56,192 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:54:56,193 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:54:56,193 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:54:56,195 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:54:56,195 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:54:56,197 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:54:56,198 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:54:56,199 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:54:56,199 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:54:56,200 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:54:56,200 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:54:56,201 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:54:56,201 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:54:56,203 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:54:56,204 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:54:56,205 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:54:56,206 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:54:56,206 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:54:56,206 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:54:56,207 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:54:56,207 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:54:56,209 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:54:56,610 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:54:56,612 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:54:56,612 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:54:56,615 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:54:56,985 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:54:56,986 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:54:56,987 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:54:56,989 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:54:56,989 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:54:56,990 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:54:56,991 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:54:56,991 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:54:56,992 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:54:56,993 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:54:56,993 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:54:56,994 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:54:56,994 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:54:56,995 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:54:56,996 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:54:56,997 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:54:56,997 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:54:56,998 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:54:56,999 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:54:56,999 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:54:56,999 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:54:57,000 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:54:57,377 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:54:57,378 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:54:57,379 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:54:57,379 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:54:57,737 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:54:57,740 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:54:57,740 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:54:57,741 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:54:57,742 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:54:57,743 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:54:57,744 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:54:57,746 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:54:57,747 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:54:57,747 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:54:57,748 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:54:57,749 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:54:57,750 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:54:57,751 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:54:57,752 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:54:57,753 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:54:57,754 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:54:57,754 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:54:57,754 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:54:57,755 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:54:57,755 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:54:57,948 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:54:57,949 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:54:57,949 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:54:57,950 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:54:57,950 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:54:57,951 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:54:57,952 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:54:58,296 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:54:58,297 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:54:58,297 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:54:58,320 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:54:58,694 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:54:58,695 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:54:58,695 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:54:58,697 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:54:58,698 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:54:58,699 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:54:58,700 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:54:58,701 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:54:58,701 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:54:58,702 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:54:58,703 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:54:58,703 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:54:58,703 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:54:58,705 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:54:58,707 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:54:58,708 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:54:58,708 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:54:58,709 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:54:58,709 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:54:58,709 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:54:58,710 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:54:58,722 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:54:59,088 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:54:59,089 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:54:59,089 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:54:59,090 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:54:59,451 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:54:59,452 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:54:59,452 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:54:59,452 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:54:59,454 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:54:59,454 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:54:59,455 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:54:59,456 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:54:59,456 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:54:59,457 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:54:59,457 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:54:59,458 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:54:59,458 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:54:59,460 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:54:59,461 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:54:59,462 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:54:59,462 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:54:59,463 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:54:59,463 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:54:59,464 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:54:59,464 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:54:59,465 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:54:59,820 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:54:59,820 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:54:59,821 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:54:59,822 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:00,178 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:55:00,179 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:00,180 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:55:00,181 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:55:00,181 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:00,182 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:55:00,183 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:55:00,184 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:55:00,184 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:55:00,184 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:55:00,186 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:00,186 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:55:00,187 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:00,188 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:55:00,189 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:55:00,190 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:55:00,191 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:55:00,191 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:55:00,191 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:55:00,192 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:55:00,192 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:55:00,393 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:55:00,393 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:55:00,394 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:55:00,394 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:55:00,395 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:55:00,396 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:55:00,396 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:55:00,772 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:00,773 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:00,774 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:55:00,775 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:01,141 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:55:01,141 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:01,142 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:55:01,143 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:55:01,143 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:01,144 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:55:01,146 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:55:01,146 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:55:01,147 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:55:01,147 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:55:01,148 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:01,149 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:55:01,150 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:01,151 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:55:01,152 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:55:01,153 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:55:01,154 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:55:01,154 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:55:01,155 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:55:01,155 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:55:01,155 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:55:01,157 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:55:01,548 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:01,549 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:01,550 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:55:01,571 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:01,905 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:55:01,905 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:01,905 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:55:01,907 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:55:01,908 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:01,909 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:55:01,910 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:55:01,911 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:55:01,911 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:55:01,911 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:55:01,912 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:01,913 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:55:01,914 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:01,915 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:55:01,916 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:55:01,916 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:55:01,917 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:55:01,917 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:55:01,918 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:55:01,918 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:55:01,918 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:55:01,919 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:55:02,312 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:02,314 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:02,314 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:55:02,315 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:02,750 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:55:02,751 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:02,752 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:55:02,753 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:55:02,753 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:02,755 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:55:02,757 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:55:02,758 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:55:02,758 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:55:02,759 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:55:02,761 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:02,761 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:55:02,762 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:02,764 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:55:02,765 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:55:02,767 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:55:02,767 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:55:02,768 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:55:02,769 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:55:02,770 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:55:02,770 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:55:02,967 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:55:02,968 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:55:02,968 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:55:02,969 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:55:02,969 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:55:02,971 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:55:02,972 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:55:03,394 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:03,395 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:03,395 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:55:03,397 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:03,779 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:55:03,780 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:03,781 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:55:03,781 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:55:03,781 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:03,783 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:55:03,785 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:55:03,787 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:55:03,788 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:55:03,789 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:55:03,790 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:03,790 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:55:03,791 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:03,792 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:55:03,794 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:55:03,795 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:55:03,796 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:55:03,796 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:55:03,797 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:55:03,797 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:55:03,798 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:55:03,799 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:55:04,200 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:04,201 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:04,202 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:55:04,219 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:04,586 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:55:04,587 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:04,589 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:55:04,589 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:55:04,590 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:04,592 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:55:04,593 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:55:04,594 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:55:04,595 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:55:04,595 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:55:04,596 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:04,597 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:55:04,598 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:04,599 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:55:04,600 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:55:04,600 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:55:04,602 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:55:04,602 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:55:04,602 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:55:04,603 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:55:04,603 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:55:04,604 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:55:05,027 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:05,028 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:05,029 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:55:05,030 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:05,478 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:55:05,480 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:05,480 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:55:05,482 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:55:05,482 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:05,483 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:55:05,484 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:55:05,485 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:55:05,486 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:55:05,486 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:55:05,486 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:05,487 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:55:05,487 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:05,489 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:55:05,490 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:55:05,491 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:55:05,491 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:55:05,492 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:55:05,492 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:55:05,493 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:55:05,493 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:55:05,707 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:55:05,708 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:55:05,709 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:55:05,709 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:55:05,709 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:55:05,710 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:55:05,711 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:55:06,050 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:06,052 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:06,052 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:55:06,052 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:06,428 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:55:06,430 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:06,430 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:55:06,431 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:55:06,432 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:06,433 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:55:06,434 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:55:06,434 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:55:06,434 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:55:06,435 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:06,435 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:55:06,435 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:55:06,436 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:06,437 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:55:06,439 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:55:06,440 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:55:06,441 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:55:06,441 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:55:06,441 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:55:06,442 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:55:06,442 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:55:06,455 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:55:06,870 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:06,871 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:06,871 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:55:06,884 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:07,238 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:55:07,239 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:07,240 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:55:07,240 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:55:07,241 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:07,243 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:55:07,244 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:55:07,245 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:55:07,245 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:55:07,245 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:55:07,246 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:07,248 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:55:07,248 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:07,249 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:55:07,250 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:55:07,251 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:55:07,252 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:55:07,252 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:55:07,253 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:55:07,253 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:55:07,254 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:55:07,274 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:55:07,674 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:07,675 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:07,675 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:55:07,678 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:08,068 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:55:08,069 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:08,071 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:55:08,072 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:55:08,072 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:08,074 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:55:08,076 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:55:08,077 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:55:08,078 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:55:08,078 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:55:08,079 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:08,080 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:55:08,080 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:08,082 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:55:08,084 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:55:08,085 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:55:08,085 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:55:08,086 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:55:08,086 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:55:08,087 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:55:08,088 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:55:08,305 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:55:08,306 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:55:08,306 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:55:08,307 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:55:08,307 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:55:08,308 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:55:08,308 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:55:08,668 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:08,668 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:08,668 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:55:08,670 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:09,023 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:55:09,024 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:09,024 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:55:09,025 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:55:09,025 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:09,026 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:55:09,028 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:55:09,029 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:55:09,029 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:55:09,030 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:55:09,031 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:09,031 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:55:09,032 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:09,033 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:55:09,034 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:55:09,034 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:55:09,035 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:55:09,035 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:55:09,036 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:55:09,037 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:55:09,037 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:55:09,038 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:55:09,414 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:09,415 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:09,415 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:55:09,417 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:09,812 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:55:09,814 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:09,814 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:55:09,815 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:55:09,815 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:09,817 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:55:09,818 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:55:09,819 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:55:09,819 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:55:09,820 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:55:09,820 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:09,821 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:55:09,821 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:09,823 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:55:09,824 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:55:09,825 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:55:09,825 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:55:09,826 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:55:09,826 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:55:09,827 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:55:09,827 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:55:09,844 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:55:10,212 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:10,212 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:10,214 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:55:10,214 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:10,585 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:55:10,587 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:10,588 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:55:10,588 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:55:10,589 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:10,591 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:55:10,592 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:55:10,592 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:55:10,593 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:55:10,593 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:55:10,594 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:10,595 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:55:10,595 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:10,596 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:55:10,598 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:55:10,598 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:55:10,599 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:55:10,599 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:55:10,600 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:55:10,600 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:55:10,600 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:55:10,791 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:55:10,792 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:55:10,792 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:55:10,793 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:55:10,793 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:55:10,793 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:55:10,795 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:55:11,149 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:11,150 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:11,150 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:55:11,151 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:11,516 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:55:11,516 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:11,518 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:55:11,518 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:55:11,518 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:11,520 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:55:11,520 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:55:11,521 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:55:11,521 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:55:11,522 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:55:11,523 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:11,524 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:55:11,524 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:11,525 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:55:11,526 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:55:11,527 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:55:11,528 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:55:11,528 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:55:11,529 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:55:11,529 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:55:11,530 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:55:11,531 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:55:11,894 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:11,895 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:11,896 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:55:11,898 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:12,251 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:55:12,251 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:12,252 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:55:12,253 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:55:12,253 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:12,254 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:55:12,255 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:55:12,257 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:55:12,257 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:55:12,257 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:55:12,258 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:12,258 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:55:12,258 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:12,260 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:55:12,261 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:55:12,261 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:55:12,262 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:55:12,262 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:55:12,263 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:55:12,263 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:55:12,263 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:55:12,264 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:55:12,709 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:12,710 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:12,711 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:55:12,712 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:13,122 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:55:13,123 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:13,124 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:55:13,124 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:55:13,125 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:13,127 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:55:13,128 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:55:13,130 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:55:13,131 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:55:13,131 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:55:13,132 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:13,133 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:55:13,134 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:13,135 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:55:13,137 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:55:13,137 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:55:13,138 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:55:13,138 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:55:13,139 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:55:13,139 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:55:13,140 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:55:13,345 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:55:13,346 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:55:13,346 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:55:13,348 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:55:13,349 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:55:13,349 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:55:13,350 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:55:13,769 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:13,769 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:13,771 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:55:13,772 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:14,204 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:55:14,205 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:14,207 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:55:14,208 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:55:14,208 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:14,210 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:55:14,212 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:55:14,213 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:55:14,214 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:55:14,214 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:55:14,216 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:14,216 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:55:14,217 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:14,219 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:55:14,220 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:55:14,221 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:55:14,221 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:55:14,222 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:55:14,223 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:55:14,223 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:55:14,224 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:55:14,225 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:55:14,685 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:14,687 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:14,688 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:55:14,699 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:15,128 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:55:15,129 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:15,129 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:55:15,130 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:55:15,131 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:15,132 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:55:15,132 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:55:15,134 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:55:15,134 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:55:15,135 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:55:15,136 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:15,137 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:55:15,137 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:15,139 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:55:15,140 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:55:15,141 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:55:15,142 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:55:15,143 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:55:15,144 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:55:15,144 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:55:15,144 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:55:15,145 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:55:15,575 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:15,576 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:15,578 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:55:15,579 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:16,004 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:55:16,005 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:16,006 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:55:16,007 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:55:16,007 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:16,009 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:55:16,011 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:55:16,012 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:55:16,013 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:55:16,013 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:55:16,014 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:16,015 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:55:16,015 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:16,016 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:55:16,018 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:55:16,018 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:55:16,019 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:55:16,019 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:55:16,020 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:55:16,021 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:55:16,021 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:55:16,215 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:55:16,216 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:55:16,217 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:55:16,217 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:55:16,218 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:55:16,218 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:55:16,219 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:55:16,545 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:16,546 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:16,546 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:55:16,558 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:16,872 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:55:16,873 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:16,873 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:55:16,874 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:55:16,875 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:16,877 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:55:16,878 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:55:16,879 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:55:16,880 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:55:16,880 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:55:16,881 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:16,881 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:55:16,882 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:16,883 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:55:16,884 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:55:16,885 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:55:16,885 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:55:16,885 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:55:16,886 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:55:16,886 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:55:16,886 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:55:16,887 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:55:17,193 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:17,194 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:17,194 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:55:17,195 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:17,495 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:55:17,496 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:17,496 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:55:17,498 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:55:17,498 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:17,500 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:55:17,500 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:55:17,501 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:55:17,502 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:55:17,502 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:55:17,503 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:17,503 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:55:17,504 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:17,504 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:55:17,505 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:55:17,506 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:55:17,507 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:55:17,507 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:55:17,507 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:55:17,508 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:55:17,508 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:55:17,529 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:55:17,862 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:17,862 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:17,863 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:55:17,883 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:18,201 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:55:18,201 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:18,202 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:55:18,202 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:55:18,202 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:18,204 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:55:18,204 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:55:18,204 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:55:18,204 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:55:18,206 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:18,206 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:55:18,206 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:55:18,208 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:18,209 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:55:18,209 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:55:18,210 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:55:18,210 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:55:18,211 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:55:18,211 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:55:18,211 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:55:18,212 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:55:18,411 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:55:18,412 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:55:18,412 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:55:18,413 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:55:18,413 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:55:18,413 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:55:18,414 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:55:18,688 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:18,690 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:18,690 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:55:18,691 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:18,987 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:55:18,989 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:18,989 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:55:18,989 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:55:18,989 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:18,991 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:55:18,992 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:55:18,993 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:55:18,993 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:55:18,993 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:55:18,994 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:18,994 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:55:18,994 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:18,995 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:55:18,997 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:55:18,997 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:55:18,998 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:55:18,998 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:55:18,998 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:55:18,999 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:55:18,999 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:55:19,000 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:55:19,312 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:19,313 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:19,313 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:55:19,329 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:19,631 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:55:19,632 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:19,632 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:55:19,633 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:55:19,633 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:19,635 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:55:19,635 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:55:19,636 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:55:19,636 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:55:19,638 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:19,638 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:55:19,638 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:55:19,639 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:19,640 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:55:19,641 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:55:19,641 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:55:19,641 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:55:19,642 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:55:19,642 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:55:19,642 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:55:19,643 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:55:19,668 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:55:19,997 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:19,998 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:19,998 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:55:20,024 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:20,308 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:55:20,309 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:20,309 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:55:20,310 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:55:20,310 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:20,311 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:55:20,312 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:55:20,312 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:55:20,314 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:55:20,314 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:55:20,314 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:20,315 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:55:20,315 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:20,317 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:55:20,317 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:55:20,318 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:55:20,319 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:55:20,319 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:55:20,319 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:55:20,319 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:55:20,320 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:55:20,519 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:55:20,519 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:55:20,519 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:55:20,520 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:55:20,520 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:55:20,520 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:55:20,522 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:55:20,816 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:20,817 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:20,817 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:55:20,843 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:21,128 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:55:21,129 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:21,130 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:55:21,130 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:55:21,131 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:21,132 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:55:21,132 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:55:21,133 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:55:21,133 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:55:21,134 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:55:21,134 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:21,135 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:55:21,135 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:21,137 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:55:21,137 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:55:21,138 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:55:21,138 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:55:21,139 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:55:21,139 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:55:21,139 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:55:21,140 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:55:21,140 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:55:21,439 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:21,439 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:21,440 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:55:21,462 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:21,753 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:55:21,754 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:21,754 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:55:21,755 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:55:21,756 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:21,757 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:55:21,757 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:55:21,758 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:55:21,759 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:55:21,759 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:55:21,759 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:21,760 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:55:21,761 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:21,762 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:55:21,763 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:55:21,763 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:55:21,764 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:55:21,764 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:55:21,765 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:55:21,765 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:55:21,765 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:55:21,766 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:55:22,145 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:22,147 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:22,148 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:55:22,149 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:22,497 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:55:22,498 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:22,499 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:55:22,499 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:55:22,500 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:22,501 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:55:22,502 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:55:22,503 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:55:22,504 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:55:22,505 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:55:22,506 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:22,506 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:55:22,506 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:22,508 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:55:22,509 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:55:22,509 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:55:22,511 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:55:22,512 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:55:22,513 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:55:22,514 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:55:22,514 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:55:22,713 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:55:22,714 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:55:22,714 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:55:22,714 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:55:22,715 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:55:22,716 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:55:22,728 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:55:23,189 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:23,191 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:23,191 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:55:23,192 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:23,608 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:55:23,609 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:23,609 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:55:23,610 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:55:23,610 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:23,611 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:55:23,612 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:55:23,613 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:55:23,614 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:55:23,615 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:55:23,615 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:23,616 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:55:23,616 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:23,617 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:55:23,618 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:55:23,619 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:55:23,619 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:55:23,620 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:55:23,620 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:55:23,621 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:55:23,621 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:55:23,622 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:55:23,988 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:23,989 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:23,990 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:55:24,001 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:24,410 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:55:24,411 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:24,411 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:55:24,412 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:55:24,412 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:24,414 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:55:24,415 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:55:24,415 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:55:24,416 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:55:24,416 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:55:24,417 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:24,417 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:55:24,418 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:24,419 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:55:24,420 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:55:24,420 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:55:24,421 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:55:24,421 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:55:24,421 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:55:24,422 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:55:24,423 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:55:24,424 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:55:24,791 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:24,792 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:24,792 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:55:24,793 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:25,209 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:55:25,210 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:25,211 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:55:25,212 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:55:25,212 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:25,213 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:55:25,215 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:55:25,216 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:55:25,218 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:55:25,218 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:55:25,219 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:25,219 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:55:25,220 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:25,221 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:55:25,222 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:55:25,223 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:55:25,224 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:55:25,224 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:55:25,225 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:55:25,225 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:55:25,225 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:55:25,418 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:55:25,419 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:55:25,419 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:55:25,420 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:55:25,420 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:55:25,420 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:55:25,421 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:55:25,809 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:25,810 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:25,810 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:55:25,835 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:26,228 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:55:26,229 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:26,229 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:55:26,230 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:55:26,230 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:26,232 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:55:26,232 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:55:26,233 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:55:26,234 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:55:26,235 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:55:26,235 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:26,236 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:55:26,236 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:26,237 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:55:26,238 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:55:26,239 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:55:26,240 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:55:26,240 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:55:26,240 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:55:26,241 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:55:26,241 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:55:26,263 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:55:26,624 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:26,625 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:26,626 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:55:26,626 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:26,994 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:55:26,995 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:26,996 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:55:26,996 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:55:26,998 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:26,999 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:55:27,000 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:55:27,001 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:55:27,001 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:55:27,002 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:55:27,002 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:27,003 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:55:27,003 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:27,005 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:55:27,006 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:55:27,007 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:55:27,008 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:55:27,009 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:55:27,009 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:55:27,009 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:55:27,010 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:55:27,035 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:55:27,446 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:27,448 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:27,449 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:55:27,450 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:27,820 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:55:27,820 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:27,821 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:55:27,821 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:55:27,822 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:27,823 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:55:27,824 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:55:27,825 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:55:27,825 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:55:27,826 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:55:27,827 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:27,827 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:55:27,827 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:27,829 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:55:27,830 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:55:27,831 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:55:27,831 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:55:27,832 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:55:27,832 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:55:27,832 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:55:27,833 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:55:28,026 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:55:28,027 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:55:28,028 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:55:28,028 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:55:28,029 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:55:28,029 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:55:28,030 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:55:28,413 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:28,414 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:28,414 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:55:28,439 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:28,741 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:55:28,742 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:28,742 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:55:28,743 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:55:28,743 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:28,745 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:55:28,745 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:55:28,746 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:55:28,747 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:55:28,747 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:55:28,748 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:28,748 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:55:28,749 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:28,750 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:55:28,751 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:55:28,752 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:55:28,753 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:55:28,753 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:55:28,753 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:55:28,753 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:55:28,754 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:55:28,755 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:55:29,073 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:29,075 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:29,076 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:55:29,091 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:29,379 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:55:29,380 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:29,380 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:55:29,381 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:55:29,381 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:29,382 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:55:29,383 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:55:29,385 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:55:29,386 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:55:29,386 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:55:29,387 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:29,387 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:55:29,388 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:29,389 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:55:29,391 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:55:29,391 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:55:29,392 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:55:29,392 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:55:29,393 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:55:29,393 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:55:29,393 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:55:29,395 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:55:29,731 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:29,732 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:29,732 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:55:29,755 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:30,052 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:55:30,053 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:30,054 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:55:30,055 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:55:30,055 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:30,056 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:55:30,058 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:55:30,058 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:55:30,059 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:55:30,059 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:55:30,061 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:30,061 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:55:30,061 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:30,063 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:55:30,064 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:55:30,064 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:55:30,065 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:55:30,065 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:55:30,065 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:55:30,066 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:55:30,067 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:55:30,264 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:55:30,265 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:55:30,265 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:55:30,265 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:55:30,266 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:55:30,266 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:55:30,267 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:55:30,574 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:30,574 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:30,574 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:55:30,586 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:30,914 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:55:30,914 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:30,915 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:55:30,915 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:55:30,915 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:30,917 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:55:30,917 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:55:30,919 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:55:30,919 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:55:30,920 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:55:30,921 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:30,921 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:55:30,922 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:30,922 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:55:30,923 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:55:30,924 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:55:30,924 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:55:30,925 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:55:30,925 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:55:30,925 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:55:30,926 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:55:30,927 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:55:31,237 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:31,237 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:31,238 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:55:31,239 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:31,519 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:55:31,520 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:31,521 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:55:31,521 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:55:31,521 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:31,523 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:55:31,524 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:55:31,525 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:55:31,525 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:55:31,526 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:55:31,526 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:31,527 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:55:31,528 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:31,529 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:55:31,530 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:55:31,530 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:55:31,531 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:55:31,531 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:55:31,532 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:55:31,532 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:55:31,532 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:55:31,554 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:55:31,853 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:31,855 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:31,855 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:55:31,877 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:32,180 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:55:32,181 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:32,182 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:55:32,182 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:55:32,183 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:32,184 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:55:32,185 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:55:32,186 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:55:32,186 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:55:32,187 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:55:32,187 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:32,188 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:55:32,188 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:32,189 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:55:32,190 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:55:32,191 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:55:32,192 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:55:32,192 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:55:32,192 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:55:32,193 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:55:32,193 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:55:32,387 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:55:32,388 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:55:32,388 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:55:32,389 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:55:32,389 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:55:32,390 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:55:32,390 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:55:32,750 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:32,750 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:32,751 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:55:32,752 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:33,080 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:55:33,081 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:33,082 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:55:33,082 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:55:33,082 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:33,084 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:55:33,085 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:55:33,086 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:55:33,087 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:55:33,087 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:55:33,088 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:33,089 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:55:33,089 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:33,090 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:55:33,091 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:55:33,092 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:55:33,094 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:55:33,094 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:55:33,094 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:55:33,094 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:55:33,095 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:55:33,096 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:55:33,422 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:33,423 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:33,424 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:55:33,441 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:33,747 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:55:33,748 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:33,748 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:55:33,749 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:55:33,749 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:33,750 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:55:33,750 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:55:33,751 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:55:33,752 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:55:33,753 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:55:33,753 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:33,754 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:55:33,754 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:33,755 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:55:33,755 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:55:33,756 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:55:33,757 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:55:33,757 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:55:33,758 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:55:33,758 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:55:33,758 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:55:33,759 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:55:34,076 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:34,077 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:34,077 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:55:34,078 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:34,380 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:55:34,380 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:34,381 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:55:34,381 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:55:34,382 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:34,383 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:55:34,384 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:55:34,386 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:55:34,387 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:55:34,387 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:55:34,388 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:34,388 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:55:34,389 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:34,390 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:55:34,391 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:55:34,392 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:55:34,392 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:55:34,393 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:55:34,393 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:55:34,394 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:55:34,394 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:55:34,600 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:55:34,601 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:55:34,601 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:55:34,601 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:55:34,601 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:55:34,602 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:55:34,603 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:55:34,882 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:34,882 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:34,883 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:55:34,883 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:35,211 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:55:35,213 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:35,213 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:55:35,214 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:55:35,214 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:35,215 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:55:35,215 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:55:35,217 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:55:35,217 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:55:35,218 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:35,219 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:55:35,219 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:55:35,220 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:35,221 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:55:35,222 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:55:35,223 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:55:35,223 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:55:35,223 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:55:35,224 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:55:35,224 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:55:35,225 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:55:35,225 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:55:35,617 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:35,618 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:35,619 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:55:35,635 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:35,956 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:55:35,957 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:35,957 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:55:35,958 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:55:35,958 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:35,959 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:55:35,960 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:55:35,961 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:55:35,962 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:55:35,962 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:55:35,963 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:35,963 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:55:35,964 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:35,965 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:55:35,966 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:55:35,967 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:55:35,968 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:55:35,968 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:55:35,968 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:55:35,969 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:55:35,969 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:55:35,992 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:55:36,313 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:36,314 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:36,314 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:55:36,314 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:36,625 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:55:36,625 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:36,625 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:55:36,627 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:55:36,627 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:36,628 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:55:36,629 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:55:36,630 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:55:36,631 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:55:36,631 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:55:36,632 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:36,633 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:55:36,633 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:36,634 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:55:36,635 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:55:36,636 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:55:36,636 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:55:36,636 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:55:36,637 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:55:36,637 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:55:36,638 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:55:36,847 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:55:36,848 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:55:36,848 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:55:36,849 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:55:36,849 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:55:36,850 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:55:36,851 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:55:37,171 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:37,172 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:37,173 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:55:37,173 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:37,459 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:55:37,460 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:37,460 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:55:37,461 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:55:37,461 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:37,462 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:55:37,463 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:55:37,464 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:55:37,465 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:55:37,465 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:55:37,466 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:37,466 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:55:37,466 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:37,467 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:55:37,468 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:55:37,469 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:55:37,469 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:55:37,469 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:55:37,470 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:55:37,470 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:55:37,470 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:55:37,471 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:55:37,788 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:37,790 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:37,790 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:55:37,791 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:38,081 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:55:38,082 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:38,082 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:55:38,083 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:55:38,084 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:38,085 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:55:38,086 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:55:38,087 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:55:38,087 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:55:38,088 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:55:38,089 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:38,089 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:55:38,090 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:38,091 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:55:38,091 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:55:38,092 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:55:38,093 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:55:38,093 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:55:38,093 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:55:38,094 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:55:38,094 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:55:38,118 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:55:38,441 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:38,442 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:38,442 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:55:38,443 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:38,742 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:55:38,744 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:38,744 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:55:38,745 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:55:38,745 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:38,747 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:55:38,748 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:55:38,749 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:55:38,749 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:55:38,750 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:55:38,750 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:38,750 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:55:38,751 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:38,752 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:55:38,753 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:55:38,754 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:55:38,754 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:55:38,754 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:55:38,755 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:55:38,755 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:55:38,756 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:55:38,954 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:55:38,955 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:55:38,956 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:55:38,956 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:55:38,956 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:55:38,956 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:55:38,970 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:55:39,238 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:39,239 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:39,239 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:55:39,240 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:39,489 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:55:39,490 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:39,490 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:55:39,490 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:55:39,492 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:39,492 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:55:39,493 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:55:39,494 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:55:39,494 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:55:39,494 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:55:39,495 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:39,496 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:55:39,496 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:39,497 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:55:39,498 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:55:39,499 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:55:39,500 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:55:39,500 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:55:39,501 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:55:39,501 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:55:39,501 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:55:39,502 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:55:39,822 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:39,824 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:39,824 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:55:39,824 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:40,108 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:55:40,109 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:40,109 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:55:40,110 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:55:40,110 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:40,111 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:55:40,112 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:55:40,113 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:55:40,113 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:55:40,114 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:55:40,115 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:40,115 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:55:40,116 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:40,117 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:55:40,117 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:55:40,118 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:55:40,118 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:55:40,119 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:55:40,119 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:55:40,119 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:55:40,120 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:55:40,120 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:55:40,417 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:40,419 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:40,419 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:55:40,439 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:40,756 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:55:40,757 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:40,758 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:55:40,758 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:55:40,758 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:40,759 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:55:40,761 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:55:40,762 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:55:40,762 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:55:40,763 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:55:40,763 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:40,764 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:55:40,764 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:40,766 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:55:40,767 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:55:40,768 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:55:40,769 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:55:40,769 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:55:40,769 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:55:40,770 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:55:40,770 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:55:40,966 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:55:40,967 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:55:40,968 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:55:40,968 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:55:40,968 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:55:40,969 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:55:40,970 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:55:41,268 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:41,269 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:41,269 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:55:41,271 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:41,551 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:55:41,551 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:41,552 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:55:41,552 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:55:41,553 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:41,555 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:55:41,556 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:55:41,556 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:55:41,556 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:55:41,557 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:55:41,558 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:41,558 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:55:41,558 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:41,559 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:55:41,560 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:55:41,561 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:55:41,561 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:55:41,561 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:55:41,562 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:55:41,562 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:55:41,563 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:55:41,564 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:55:41,909 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:41,909 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:41,910 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:55:41,910 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:42,200 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:55:42,201 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:42,201 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:55:42,201 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:55:42,203 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:42,203 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:55:42,204 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:55:42,204 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:55:42,204 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:55:42,206 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:55:42,206 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:42,206 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:55:42,206 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:42,207 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:55:42,209 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:55:42,210 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:55:42,210 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:55:42,210 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:55:42,211 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:55:42,211 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:55:42,211 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:55:42,212 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:55:42,510 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:42,511 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:42,512 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:55:42,513 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:42,873 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:55:42,873 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:42,873 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:55:42,874 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:55:42,874 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:42,876 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:55:42,877 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:55:42,878 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:55:42,879 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:55:42,879 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:55:42,879 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:42,880 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:55:42,880 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:42,881 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:55:42,882 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:55:42,883 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:55:42,883 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:55:42,883 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:55:42,884 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:55:42,884 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:55:42,885 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:55:43,093 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:55:43,093 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:55:43,093 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:55:43,094 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:55:43,094 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:55:43,094 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:55:43,095 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:55:43,389 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:43,389 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:43,390 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:55:43,390 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:43,667 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:55:43,669 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:43,669 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:55:43,670 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:55:43,670 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:43,672 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:55:43,673 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:55:43,674 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:55:43,675 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:55:43,675 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:55:43,675 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:43,676 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:55:43,676 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:43,677 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:55:43,678 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:55:43,679 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:55:43,680 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:55:43,680 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:55:43,680 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:55:43,681 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:55:43,681 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:55:43,682 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:55:44,005 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:44,007 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:44,007 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:55:44,023 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:44,328 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:55:44,329 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:44,329 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:55:44,330 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:55:44,330 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:44,331 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:55:44,332 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:55:44,333 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:55:44,333 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:55:44,333 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:55:44,334 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:44,334 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:55:44,335 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:44,336 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:55:44,337 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:55:44,338 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:55:44,338 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:55:44,339 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:55:44,339 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:55:44,339 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:55:44,340 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:55:44,341 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:55:44,680 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:44,681 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:44,682 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:55:44,683 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:45,015 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:55:45,017 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:45,017 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:55:45,018 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:55:45,018 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:45,020 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:55:45,021 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:55:45,022 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:55:45,022 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:55:45,023 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:55:45,023 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:45,024 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:55:45,025 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:45,026 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:55:45,027 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:55:45,028 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:55:45,028 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:55:45,029 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:55:45,029 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:55:45,029 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:55:45,030 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:55:45,230 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:55:45,231 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:55:45,231 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:55:45,232 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:55:45,232 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:55:45,232 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:55:45,234 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:55:45,600 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:45,601 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:45,602 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:55:45,602 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:45,955 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:55:45,956 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:45,956 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:55:45,957 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:55:45,957 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:45,958 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:55:45,960 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:55:45,961 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:55:45,961 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:55:45,962 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:55:45,963 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:45,964 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:55:45,964 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:45,966 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:55:45,967 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:55:45,968 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:55:45,969 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:55:45,969 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:55:45,970 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:55:45,970 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:55:45,971 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:55:45,972 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:55:46,309 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:46,309 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:46,310 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:55:46,329 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:46,634 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:55:46,635 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:46,635 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:55:46,636 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:55:46,636 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:46,636 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:55:46,638 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:55:46,638 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:55:46,639 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:55:46,639 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:55:46,639 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:46,640 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:55:46,640 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:46,642 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:55:46,642 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:55:46,643 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:55:46,643 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:55:46,644 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:55:46,644 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:55:46,644 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:55:46,645 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:55:46,645 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:55:46,971 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:46,972 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:46,972 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:55:46,973 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:47,314 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:55:47,315 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:47,315 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:55:47,315 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:55:47,316 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:47,316 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:55:47,318 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:55:47,319 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:55:47,319 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:55:47,320 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:55:47,320 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:47,320 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:55:47,321 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:47,322 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:55:47,323 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:55:47,324 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:55:47,324 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:55:47,324 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:55:47,325 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:55:47,325 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:55:47,326 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:55:47,523 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:55:47,524 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:55:47,524 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:55:47,524 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:55:47,525 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:55:47,525 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:55:47,526 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:55:47,804 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:47,804 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:47,804 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:55:47,806 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:48,106 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:55:48,107 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:48,108 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:55:48,108 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:55:48,108 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:48,110 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:55:48,111 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:55:48,111 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:55:48,112 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:55:48,113 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:55:48,113 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:48,114 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:55:48,114 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:48,115 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:55:48,116 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:55:48,116 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:55:48,117 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:55:48,117 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:55:48,117 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:55:48,118 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:55:48,119 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:55:48,120 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:55:48,440 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:48,441 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:48,441 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:55:48,466 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:48,750 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:55:48,751 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:48,751 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:55:48,752 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:55:48,752 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:48,752 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:55:48,754 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:55:48,755 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:55:48,755 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:55:48,756 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:55:48,756 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:48,756 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:55:48,757 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:48,758 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:55:48,758 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:55:48,759 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:55:48,759 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:55:48,760 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:55:48,760 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:55:48,761 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:55:48,761 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:55:48,762 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:55:49,063 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:49,063 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:49,064 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:55:49,085 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:49,380 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:55:49,381 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:49,381 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:55:49,381 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:55:49,382 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:49,383 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:55:49,384 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:55:49,385 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:55:49,386 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:55:49,386 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:55:49,387 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:49,388 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:55:49,389 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:49,390 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:55:49,390 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:55:49,391 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:55:49,392 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:55:49,392 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:55:49,392 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:55:49,393 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:55:49,393 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:55:49,595 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:55:49,596 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:55:49,596 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:55:49,596 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:55:49,597 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:55:49,597 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:55:49,611 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:55:49,885 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:49,886 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:49,887 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:55:49,887 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:50,185 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:55:50,185 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:50,185 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:55:50,185 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:55:50,188 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:50,188 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:55:50,189 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:55:50,190 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:55:50,191 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:55:50,191 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:55:50,191 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:50,191 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:55:50,192 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:50,193 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:55:50,194 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:55:50,194 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:55:50,195 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:55:50,195 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:55:50,195 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:55:50,196 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:55:50,196 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:55:50,197 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:55:50,503 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:50,504 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:50,504 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:55:50,505 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:50,785 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:55:50,786 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:50,787 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:55:50,787 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:55:50,788 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:50,789 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:55:50,790 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:55:50,790 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:55:50,790 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:55:50,791 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:55:50,791 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:50,791 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:55:50,792 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:50,793 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:55:50,794 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:55:50,794 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:55:50,795 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:55:50,795 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:55:50,796 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:55:50,796 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:55:50,796 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:55:50,797 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:55:51,148 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:51,149 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:51,150 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:55:51,151 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:51,436 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:55:51,437 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:51,437 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:55:51,438 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:55:51,438 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:51,439 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:55:51,440 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:55:51,441 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:55:51,441 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:55:51,442 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:51,442 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:55:51,443 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:55:51,443 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:51,444 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:55:51,445 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:55:51,446 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:55:51,446 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:55:51,446 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:55:51,447 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:55:51,447 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:55:51,448 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:55:51,651 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:55:51,652 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:55:51,652 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:55:51,653 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:55:51,654 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:55:51,654 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:55:51,655 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:55:51,925 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:51,927 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:51,927 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:55:51,928 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:52,253 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:55:52,253 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:52,254 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:55:52,254 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:55:52,255 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:52,255 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:55:52,257 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:55:52,258 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:55:52,258 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:55:52,259 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:55:52,259 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:52,259 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:55:52,260 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:52,261 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:55:52,262 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:55:52,262 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:55:52,263 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:55:52,263 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:55:52,264 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:55:52,264 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:55:52,264 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:55:52,265 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:55:52,575 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:52,577 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:52,578 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:55:52,579 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:52,874 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:55:52,875 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:52,875 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:55:52,877 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:55:52,877 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:52,878 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:55:52,878 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:55:52,879 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:55:52,880 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:55:52,880 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:55:52,881 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:52,881 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:55:52,881 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:52,883 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:55:52,884 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:55:52,885 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:55:52,885 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:55:52,885 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:55:52,886 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:55:52,886 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:55:52,887 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:55:52,888 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:55:53,251 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:53,251 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:53,252 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:55:53,253 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:53,550 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:55:53,552 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:53,553 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:55:53,553 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:55:53,553 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:53,556 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:55:53,557 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:55:53,557 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:55:53,558 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:55:53,558 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:55:53,559 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:53,559 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:55:53,560 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:53,561 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:55:53,562 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:55:53,563 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:55:53,563 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:55:53,564 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:55:53,564 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:55:53,565 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:55:53,566 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:55:53,761 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:55:53,762 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:55:53,762 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:55:53,763 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:55:53,763 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:55:53,764 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:55:53,765 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:55:54,091 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:54,092 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:54,093 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:55:54,093 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:54,441 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:55:54,442 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:54,443 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:55:54,443 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:55:54,444 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:54,446 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:55:54,447 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:55:54,447 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:55:54,448 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:55:54,448 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:55:54,449 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:54,450 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:55:54,451 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:54,452 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:55:54,454 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:55:54,454 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:55:54,455 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:55:54,455 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:55:54,456 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:55:54,456 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:55:54,456 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:55:54,458 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:55:54,806 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:54,807 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:54,807 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:55:54,808 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:55,120 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:55:55,122 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:55,122 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:55:55,122 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:55:55,123 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:55,124 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:55:55,125 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:55:55,126 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:55:55,126 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:55:55,126 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:55:55,128 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:55,128 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:55:55,128 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:55,130 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:55:55,130 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:55:55,132 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:55:55,132 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:55:55,132 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:55:55,133 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:55:55,133 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:55:55,133 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:55:55,134 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:55:55,479 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:55,480 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:55,481 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:55:55,482 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:55,883 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:55:55,884 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:55,884 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:55:55,885 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:55:55,887 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:55,888 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:55:55,889 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:55:55,891 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:55:55,891 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:55:55,892 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:55:55,893 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:55,894 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:55:55,894 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:55,895 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:55:55,897 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:55:55,898 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:55:55,899 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:55:55,899 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:55:55,900 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:55:55,900 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:55:55,901 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:55:56,117 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:55:56,118 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:55:56,118 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:55:56,119 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:55:56,119 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:55:56,120 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:55:56,121 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:55:56,602 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:56,603 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:56,604 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:55:56,605 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:56,933 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:55:56,934 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:56,934 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:55:56,934 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:55:56,935 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:56,936 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:55:56,936 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:55:56,937 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:55:56,938 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:55:56,939 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:55:56,939 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:56,939 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:55:56,940 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:56,941 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:55:56,942 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:55:56,942 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:55:56,943 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:55:56,943 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:55:56,943 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:55:56,944 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:55:56,944 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:55:56,966 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:55:57,317 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:57,318 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:57,318 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:55:57,319 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:57,660 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:55:57,660 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:57,661 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:55:57,661 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:55:57,662 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:57,662 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:55:57,663 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:55:57,664 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:55:57,664 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:55:57,665 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:55:57,666 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:57,667 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:55:57,667 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:57,669 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:55:57,674 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:55:57,675 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:55:57,675 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:55:57,675 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:55:57,676 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:55:57,676 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:55:57,677 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:55:57,691 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:55:58,016 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:58,018 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:58,019 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:55:58,034 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:58,365 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:55:58,366 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:58,366 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:55:58,367 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:55:58,368 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:58,370 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:55:58,372 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:55:58,372 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:55:58,372 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:55:58,373 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:55:58,373 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:58,374 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:55:58,374 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:55:58,375 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:55:58,376 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:55:58,376 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:55:58,377 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:55:58,377 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:55:58,377 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:55:58,378 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:55:58,378 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:55:58,577 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:55:58,578 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:55:58,579 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:55:58,579 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:55:58,580 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:55:58,580 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:55:58,582 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:55:58,864 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:58,867 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:58,867 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:55:58,889 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:59,180 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:55:59,181 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:59,182 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:55:59,183 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:55:59,183 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:59,184 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:55:59,186 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:55:59,186 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:55:59,188 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:55:59,188 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:55:59,189 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:59,189 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:55:59,189 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:55:59,190 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:55:59,191 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:55:59,191 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:55:59,192 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:55:59,192 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:55:59,192 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:55:59,192 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:55:59,193 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:55:59,194 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:55:59,504 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:55:59,505 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:59,506 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:55:59,506 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:59,793 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:55:59,794 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:59,794 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:55:59,795 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:55:59,795 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:59,796 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:55:59,797 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:55:59,798 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:55:59,798 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:55:59,799 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:55:59,799 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:55:59,800 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:55:59,800 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:55:59,801 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:55:59,801 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:55:59,802 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:55:59,802 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:55:59,802 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:55:59,803 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:55:59,803 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:55:59,804 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:55:59,819 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:56:00,158 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:00,160 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:00,160 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:56:00,180 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:00,487 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:56:00,488 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:00,489 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:56:00,489 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:56:00,489 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:00,491 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:00,493 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:00,493 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:00,494 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:00,494 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:56:00,495 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:00,496 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:56:00,496 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:00,498 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:00,499 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:00,499 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:00,500 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:00,500 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:56:00,500 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:56:00,501 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:56:00,501 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:56:00,708 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:56:00,708 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:56:00,708 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:56:00,709 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:56:00,709 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:56:00,710 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:56:00,711 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:56:01,000 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:01,001 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:01,002 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:56:01,003 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:01,287 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:56:01,287 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:01,288 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:56:01,288 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:56:01,288 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:01,289 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:01,289 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:01,289 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:01,289 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:56:01,289 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:01,289 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:01,292 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:56:01,292 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:01,293 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:01,294 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:01,294 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:01,294 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:56:01,295 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:01,295 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:56:01,295 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:56:01,295 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:56:01,297 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:56:01,613 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:01,614 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:01,615 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:56:01,615 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:01,915 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:56:01,915 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:01,917 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:56:01,917 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:56:01,917 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:01,918 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:01,919 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:01,920 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:01,920 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:01,921 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:56:01,921 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:01,921 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:56:01,922 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:01,923 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:01,924 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:01,924 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:01,925 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:56:01,925 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:01,925 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:56:01,926 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:56:01,926 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:56:01,927 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:56:02,261 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:02,262 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:02,262 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:56:02,262 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:02,682 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:56:02,683 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:02,684 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:56:02,684 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:56:02,684 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:02,686 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:02,687 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:02,687 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:02,688 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:56:02,689 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:02,689 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:02,690 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:56:02,690 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:02,691 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:02,692 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:02,693 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:02,693 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:56:02,693 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:02,694 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:56:02,694 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:56:02,695 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:56:02,891 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:56:02,891 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:56:02,892 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:56:02,893 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:56:02,893 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:56:02,894 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:56:02,906 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:56:03,247 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:03,248 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:03,249 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:56:03,267 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:03,566 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:56:03,567 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:03,567 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:56:03,568 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:56:03,568 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:03,569 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:03,569 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:03,570 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:03,571 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:56:03,571 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:03,571 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:03,571 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:56:03,572 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:03,573 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:03,573 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:03,574 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:03,574 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:03,575 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:56:03,575 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:56:03,575 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:56:03,576 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:56:03,576 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:56:03,906 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:03,907 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:03,908 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:56:03,908 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:04,220 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:56:04,221 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:04,221 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:56:04,222 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:56:04,222 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:04,224 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:04,224 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:04,224 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:04,224 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:56:04,226 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:04,226 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:04,226 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:56:04,227 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:04,228 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:04,229 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:04,230 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:04,230 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:56:04,231 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:04,231 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:56:04,231 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:56:04,232 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:56:04,232 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:56:04,572 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:04,573 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:04,573 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:56:04,584 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:04,920 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:56:04,921 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:04,921 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:56:04,922 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:56:04,922 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:04,923 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:04,925 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:04,926 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:04,926 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:56:04,927 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:04,927 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:04,928 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:56:04,928 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:04,930 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:04,932 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:04,933 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:04,934 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:04,935 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:56:04,936 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:56:04,936 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:56:04,937 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:56:05,142 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:56:05,143 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:56:05,143 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:56:05,144 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:56:05,144 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:56:05,145 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:56:05,146 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:56:05,550 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:05,551 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:05,552 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:56:05,565 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:05,889 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:56:05,890 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:05,890 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:56:05,891 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:56:05,891 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:05,891 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:05,893 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:05,893 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:05,894 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:56:05,894 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:05,895 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:05,895 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:56:05,895 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:05,897 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:05,898 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:05,898 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:05,899 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:05,899 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:56:05,899 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:56:05,900 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:56:05,900 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:56:05,917 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:56:06,305 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:06,306 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:06,306 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:56:06,307 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:06,624 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:56:06,625 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:06,625 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:56:06,626 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:56:06,626 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:06,627 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:06,627 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:06,628 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:06,628 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:56:06,629 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:06,629 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:06,630 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:56:06,631 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:06,632 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:06,633 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:06,633 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:06,634 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:56:06,634 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:06,634 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:56:06,634 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:56:06,635 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:56:06,659 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:56:07,026 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:07,027 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:07,027 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:56:07,049 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:07,378 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:56:07,380 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:07,381 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:56:07,381 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:56:07,382 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:07,383 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:07,383 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:07,384 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:07,385 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:56:07,385 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:07,386 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:07,386 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:56:07,386 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:07,388 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:07,389 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:07,389 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:07,390 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:07,390 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:56:07,390 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:56:07,391 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:56:07,392 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:56:07,588 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:56:07,589 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:56:07,590 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:56:07,590 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:56:07,591 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:56:07,591 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:56:07,604 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:56:07,924 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:07,925 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:07,925 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:56:07,927 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:08,252 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:56:08,253 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:08,253 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:56:08,254 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:56:08,254 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:08,255 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:08,257 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:08,257 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:08,258 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:56:08,259 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:08,259 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:08,260 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:56:08,260 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:08,261 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:08,261 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:08,262 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:08,262 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:08,262 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:56:08,263 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:56:08,263 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:56:08,264 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:56:08,265 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:56:08,593 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:08,594 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:08,595 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:56:08,596 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:08,920 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:56:08,922 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:08,923 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:56:08,923 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:56:08,924 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:08,925 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:08,927 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:08,927 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:08,928 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:56:08,928 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:08,929 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:08,929 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:56:08,929 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:08,930 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:08,931 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:08,932 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:08,933 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:08,933 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:56:08,933 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:56:08,933 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:56:08,934 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:56:08,958 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:56:09,270 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:09,272 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:09,273 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:56:09,274 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:09,559 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:56:09,565 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:09,565 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:56:09,566 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:56:09,566 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:09,567 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:09,567 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:09,568 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:09,569 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:56:09,569 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:09,569 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:09,570 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:56:09,570 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:09,571 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:09,573 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:09,573 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:09,574 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:09,574 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:56:09,574 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:56:09,575 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:56:09,575 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:56:09,784 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:56:09,785 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:56:09,785 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:56:09,786 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:56:09,787 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:56:09,787 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:56:09,799 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:56:10,044 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:10,047 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:10,047 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:56:10,061 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:10,317 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:56:10,317 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:10,317 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:56:10,319 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:56:10,319 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:10,320 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:10,321 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:10,321 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:10,322 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:56:10,322 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:10,322 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:10,323 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:56:10,323 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:10,324 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:10,325 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:10,325 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:10,326 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:56:10,327 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:10,327 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:56:10,327 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:56:10,328 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:56:10,340 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:56:10,609 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:10,610 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:10,610 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:56:10,611 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:10,863 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:56:10,865 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:10,866 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:56:10,866 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:56:10,867 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:10,868 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:10,869 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:10,870 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:10,870 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:56:10,870 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:10,871 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:10,871 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:56:10,872 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:10,873 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:10,874 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:10,874 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:10,874 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:56:10,875 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:56:10,875 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:10,875 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:56:10,876 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:56:10,894 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:56:11,157 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:11,159 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:11,159 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:56:11,174 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:11,409 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:56:11,414 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:11,414 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:56:11,415 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:56:11,415 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:11,416 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:11,417 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:11,418 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:11,419 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:56:11,419 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:11,419 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:11,420 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:56:11,421 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:11,422 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:11,422 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:11,423 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:11,423 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:56:11,424 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:11,424 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:56:11,424 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:56:11,425 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:56:11,621 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:56:11,622 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:56:11,622 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:56:11,623 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:56:11,623 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:56:11,624 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:56:11,625 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:56:11,895 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:11,896 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:11,897 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:56:11,916 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:12,141 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:56:12,142 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:12,143 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:56:12,143 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:56:12,143 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:12,145 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:12,146 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:12,148 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:12,148 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:56:12,148 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:12,149 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:12,150 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:56:12,150 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:12,151 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:12,151 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:12,152 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:12,152 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:56:12,152 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:12,153 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:56:12,153 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:56:12,153 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:56:12,154 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:56:12,393 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:12,394 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:12,394 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:56:12,416 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:12,676 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:56:12,677 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:12,677 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:56:12,679 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:56:12,679 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:12,680 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:12,681 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:12,682 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:12,682 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:56:12,683 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:12,683 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:12,683 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:56:12,684 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:12,684 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:12,685 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:12,686 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:12,686 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:12,686 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:56:12,687 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:56:12,687 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:56:12,687 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:56:12,688 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:56:12,975 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:12,976 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:12,977 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:56:12,989 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:13,260 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:56:13,261 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:13,262 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:56:13,263 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:56:13,263 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:13,264 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:13,265 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:13,266 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:13,267 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:56:13,267 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:13,267 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:13,267 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:56:13,268 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:13,268 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:13,269 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:13,270 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:13,270 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:56:13,271 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:13,271 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:56:13,271 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:56:13,271 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:56:13,470 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:56:13,471 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:56:13,472 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:56:13,472 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:56:13,473 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:56:13,474 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:56:13,475 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:56:13,753 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:13,754 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:13,754 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:56:13,755 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:14,002 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:56:14,003 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:14,003 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:56:14,003 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:56:14,004 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:14,004 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:14,005 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:14,006 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:14,007 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:56:14,007 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:14,008 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:14,008 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:56:14,008 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:14,009 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:14,010 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:14,010 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:14,010 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:56:14,011 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:14,011 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:56:14,011 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:56:14,012 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:56:14,012 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:56:14,279 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:14,280 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:14,280 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:56:14,303 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:14,584 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:56:14,585 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:14,586 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:56:14,587 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:56:14,587 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:14,588 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:14,589 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:14,590 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:14,590 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:56:14,590 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:14,591 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:14,591 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:56:14,591 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:14,592 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:14,593 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:14,593 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:14,594 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:14,594 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:56:14,594 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:56:14,594 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:56:14,595 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:56:14,595 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:56:14,866 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:14,867 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:14,868 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:56:14,868 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:15,147 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:56:15,148 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:15,149 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:56:15,149 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:56:15,149 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:15,150 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:15,151 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:15,152 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:15,152 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:56:15,153 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:15,153 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:15,153 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:56:15,154 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:15,155 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:15,156 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:15,157 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:15,157 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:15,157 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:56:15,158 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:56:15,158 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:56:15,158 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:56:15,358 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:56:15,359 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:56:15,360 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:56:15,360 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:56:15,361 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:56:15,361 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:56:15,362 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:56:15,627 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:15,628 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:15,628 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:56:15,651 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:15,930 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:56:15,932 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:15,933 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:56:15,933 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:56:15,934 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:15,934 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:15,935 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:15,935 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:15,936 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:56:15,936 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:15,937 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:56:15,937 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:15,937 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:15,938 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:15,939 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:15,939 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:15,940 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:15,940 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:56:15,940 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:56:15,941 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:56:15,941 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:56:15,959 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:56:16,267 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:16,268 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:16,268 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:56:16,269 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:16,609 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:56:16,611 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:16,611 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:56:16,613 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:56:16,613 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:16,615 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:16,615 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:16,616 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:16,617 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:16,617 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:56:16,618 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:16,618 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:56:16,618 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:16,619 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:16,620 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:16,621 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:16,621 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:56:16,621 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:16,621 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:56:16,622 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:56:16,622 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:56:16,623 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:56:16,952 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:16,953 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:16,953 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:56:16,955 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:17,267 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:56:17,272 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:17,272 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:56:17,273 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:56:17,274 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:17,275 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:17,276 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:17,276 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:17,276 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:56:17,277 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:17,277 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:17,278 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:56:17,278 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:17,279 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:17,280 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:17,281 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:17,281 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:56:17,282 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:56:17,282 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:17,282 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:56:17,282 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:56:17,478 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:56:17,480 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:56:17,481 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:56:17,481 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:56:17,482 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:56:17,482 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:56:17,483 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:56:17,782 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:17,782 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:17,783 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:56:17,783 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:18,070 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:56:18,070 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:18,071 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:56:18,072 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:56:18,073 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:18,074 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:18,074 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:18,075 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:18,076 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:56:18,076 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:18,076 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:18,077 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:56:18,077 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:18,078 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:18,079 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:18,079 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:18,080 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:56:18,080 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:18,080 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:56:18,081 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:56:18,081 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:56:18,098 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:56:18,438 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:18,439 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:18,440 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:56:18,453 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:18,783 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:56:18,784 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:18,784 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:56:18,785 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:56:18,786 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:18,786 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:18,787 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:18,787 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:18,788 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:56:18,788 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:18,788 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:18,789 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:56:18,789 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:18,791 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:18,791 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:18,792 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:18,793 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:56:18,793 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:18,793 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:56:18,794 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:56:18,794 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:56:18,794 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:56:19,190 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:19,191 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:19,191 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:56:19,192 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:19,532 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:56:19,536 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:19,536 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:56:19,537 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:56:19,537 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:19,539 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:19,541 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:19,542 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:19,542 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:19,542 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:56:19,543 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:19,543 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:56:19,544 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:19,545 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:19,546 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:19,547 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:19,547 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:19,548 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:56:19,548 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:56:19,548 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:56:19,548 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:56:19,748 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:56:19,749 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:56:19,749 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:56:19,750 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:56:19,750 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:56:19,750 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:56:19,751 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:56:20,157 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:20,158 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:20,158 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:56:20,183 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:20,552 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:56:20,553 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:20,554 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:56:20,554 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:56:20,555 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:20,555 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:20,556 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:20,557 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:20,557 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:56:20,558 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:20,558 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:20,559 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:56:20,559 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:20,560 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:20,560 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:20,561 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:20,562 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:20,562 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:56:20,562 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:56:20,562 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:56:20,563 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:56:20,586 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:56:20,934 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:20,935 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:20,935 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:56:20,937 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:21,278 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:56:21,279 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:21,280 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:56:21,281 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:56:21,281 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:21,282 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:21,283 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:21,284 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:21,284 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:56:21,284 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:21,285 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:21,285 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:56:21,286 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:21,286 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:21,287 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:21,288 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:21,288 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:56:21,288 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:21,289 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:56:21,289 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:56:21,289 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:56:21,314 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:56:21,643 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:21,644 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:21,644 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:56:21,657 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:21,977 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:56:21,978 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:21,978 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:56:21,979 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:56:21,980 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:21,980 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:21,982 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:21,983 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:21,983 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:56:21,983 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:21,985 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:21,985 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:56:21,985 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:21,986 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:21,987 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:21,988 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:21,988 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:56:21,988 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:21,988 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:56:21,989 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:56:21,989 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:56:22,182 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:56:22,183 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:56:22,183 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:56:22,184 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:56:22,184 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:56:22,184 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:56:22,198 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:56:22,534 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:22,535 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:22,535 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:56:22,537 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:22,953 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:56:22,954 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:22,955 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:56:22,955 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:56:22,957 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:22,958 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:22,960 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:22,961 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:22,962 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:22,962 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:56:22,963 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:22,963 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:56:22,964 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:22,966 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:22,967 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:22,967 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:22,968 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:22,968 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:56:22,969 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:56:22,969 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:56:22,970 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:56:22,986 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:56:23,337 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:23,339 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:23,339 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:56:23,340 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:23,654 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:56:23,654 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:23,655 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:56:23,655 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:56:23,657 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:23,657 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:23,657 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:23,659 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:23,659 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:56:23,660 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:23,660 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:23,660 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:56:23,661 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:23,662 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:23,663 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:23,663 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:23,664 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:23,664 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:56:23,665 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:56:23,665 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:56:23,665 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:56:23,666 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:56:23,995 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:23,995 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:23,995 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:56:24,012 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:24,329 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:56:24,330 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:24,331 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:56:24,331 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:56:24,332 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:24,333 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:24,334 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:24,336 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:24,336 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:56:24,336 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:24,338 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:24,338 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:56:24,338 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:24,339 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:24,340 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:24,341 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:24,342 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:24,342 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:56:24,342 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:56:24,343 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:56:24,343 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:56:24,539 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:56:24,540 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:56:24,540 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:56:24,540 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:56:24,541 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:56:24,541 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:56:24,542 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:56:24,868 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:24,869 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:24,869 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:56:24,869 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:25,200 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:56:25,200 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:25,201 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:56:25,201 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:56:25,201 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:25,202 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:25,203 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:25,204 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:25,205 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:56:25,205 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:25,206 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:25,206 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:56:25,206 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:25,207 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:25,208 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:25,209 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:25,209 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:56:25,209 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:25,209 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:56:25,210 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:56:25,211 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:56:25,211 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:56:25,605 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:25,606 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:25,606 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:56:25,627 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:25,918 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:56:25,919 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:25,920 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:56:25,920 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:56:25,920 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:25,922 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:25,923 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:25,923 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:25,924 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:56:25,924 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:25,924 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:25,925 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:56:25,925 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:25,926 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:25,927 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:25,928 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:25,929 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:56:25,929 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:56:25,929 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:25,929 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:56:25,930 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:56:25,931 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:56:26,236 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:26,237 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:26,237 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:56:26,262 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:26,547 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:56:26,552 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:26,553 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:56:26,554 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:56:26,554 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:26,557 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:26,558 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:26,558 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:26,559 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:56:26,559 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:26,560 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:26,561 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:56:26,561 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:26,562 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:26,563 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:26,563 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:26,564 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:26,564 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:56:26,565 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:56:26,566 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:56:26,566 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:56:26,762 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:56:26,762 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:56:26,762 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:56:26,763 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:56:26,763 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:56:26,763 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:56:26,777 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:56:27,134 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:27,135 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:27,135 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:56:27,136 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:27,462 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:56:27,464 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:27,465 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:56:27,465 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:56:27,465 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:27,466 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:27,467 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:27,468 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:27,468 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:56:27,469 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:27,469 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:27,469 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:56:27,470 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:27,470 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:27,471 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:27,472 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:27,473 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:56:27,473 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:27,473 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:56:27,473 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:56:27,474 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:56:27,474 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:56:27,830 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:27,831 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:27,832 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:56:27,833 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:28,145 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:56:28,146 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:28,146 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:56:28,147 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:56:28,147 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:28,148 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:28,149 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:28,149 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:28,151 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:56:28,151 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:28,151 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:28,151 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:56:28,152 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:28,153 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:28,153 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:28,154 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:28,154 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:28,154 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:56:28,155 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:56:28,155 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:56:28,155 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:56:28,156 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:56:28,476 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:28,476 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:28,477 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:56:28,478 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:28,850 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:56:28,870 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:28,871 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:56:28,872 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:56:28,872 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:28,873 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:28,875 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:28,876 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:28,876 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:56:28,877 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:28,877 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:28,878 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:56:28,878 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:28,880 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:28,881 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:28,881 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:28,882 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:28,882 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:56:28,883 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:56:28,883 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:56:28,883 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:56:29,070 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:56:29,071 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:56:29,072 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:56:29,072 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:56:29,073 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:56:29,073 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:56:29,075 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:56:29,440 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:29,441 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:29,442 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:56:29,461 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:29,822 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:56:29,823 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:29,823 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:56:29,823 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:56:29,824 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:29,826 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:29,826 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:29,827 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:29,827 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:56:29,827 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:29,827 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:29,829 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:56:29,829 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:29,830 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:29,831 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:29,832 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:29,833 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:29,833 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:56:29,833 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:56:29,834 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:56:29,834 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:56:29,847 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:56:30,278 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:30,279 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:30,279 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:56:30,303 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:30,653 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:56:30,654 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:30,654 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:56:30,655 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:56:30,655 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:30,656 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:30,657 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:30,659 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:30,659 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:56:30,659 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:30,660 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:30,660 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:56:30,661 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:30,662 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:30,664 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:30,665 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:30,665 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:56:30,665 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:30,666 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:56:30,666 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:56:30,667 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:56:30,668 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:56:31,094 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:31,095 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:31,095 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:56:31,096 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:31,541 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:56:31,542 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:31,542 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:56:31,542 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:56:31,544 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:31,546 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:31,547 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:31,547 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:31,548 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:56:31,549 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:31,550 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:31,550 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:56:31,551 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:31,552 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:31,553 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:31,554 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:31,554 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:56:31,555 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:31,555 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:56:31,556 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:56:31,556 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:56:31,769 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:56:31,770 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:56:31,771 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:56:31,771 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:56:31,772 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:56:31,773 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:56:31,774 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:56:32,428 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:32,429 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:32,429 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:56:32,430 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:32,965 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:56:32,967 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:32,968 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:56:32,969 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:56:32,969 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:32,972 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:32,973 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:32,974 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:32,975 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:56:32,975 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:32,976 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:32,977 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:56:32,977 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:32,979 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:32,981 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:32,982 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:32,983 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:32,983 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:56:32,984 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:56:32,984 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:56:32,985 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:56:32,987 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:56:33,550 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:33,551 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:33,552 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:56:33,553 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:34,111 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:56:34,112 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:34,112 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:56:34,113 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:56:34,114 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:34,115 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:34,116 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:34,118 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:34,118 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:34,118 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:56:34,119 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:34,119 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:56:34,120 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:34,121 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:34,122 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:34,122 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:34,123 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:34,123 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:56:34,124 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:56:34,124 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:56:34,124 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:56:34,142 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:56:34,508 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:34,509 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:34,509 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:56:34,510 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:34,886 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:56:34,888 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:34,888 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:56:34,889 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:56:34,890 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:34,891 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:34,892 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:34,893 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:34,893 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:56:34,894 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:34,895 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:34,895 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:56:34,895 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:34,896 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:34,897 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:34,898 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:34,898 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:56:34,898 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:34,898 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:56:34,899 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:56:34,899 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:56:35,094 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:56:35,095 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:56:35,096 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:56:35,096 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:56:35,097 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:56:35,097 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:56:35,099 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:56:35,487 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:35,488 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:35,488 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:56:35,508 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:35,859 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:56:35,859 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:35,860 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:56:35,860 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:56:35,860 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:35,862 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:35,864 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:35,865 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:35,866 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:35,866 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:56:35,866 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:35,867 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:56:35,867 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:35,868 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:35,869 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:35,869 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:35,870 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:56:35,870 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:35,870 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:56:35,871 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:56:35,871 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:56:35,872 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:56:36,196 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:36,197 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:36,198 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:56:36,223 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:36,602 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:56:36,603 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:36,603 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:56:36,604 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:56:36,604 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:36,606 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:36,607 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:36,608 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:36,609 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:56:36,609 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:36,609 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:36,610 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:56:36,610 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:36,611 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:36,611 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:36,612 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:36,612 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:36,612 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:56:36,613 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:56:36,613 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:56:36,613 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:56:36,627 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:56:36,970 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:36,971 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:36,971 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:56:36,972 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:37,293 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:56:37,293 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:37,294 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:56:37,295 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:56:37,295 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:37,296 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:37,297 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:37,297 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:37,298 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:56:37,298 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:37,299 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:37,299 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:56:37,300 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:37,301 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:37,301 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:37,302 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:37,302 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:56:37,303 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:37,303 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:56:37,303 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:56:37,304 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:56:37,495 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:56:37,495 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:56:37,496 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:56:37,496 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:56:37,497 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:56:37,497 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:56:37,511 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:56:37,828 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:37,829 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:37,829 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:56:37,831 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:38,097 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:56:38,099 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:38,099 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:56:38,099 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:56:38,099 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:38,101 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:38,102 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:38,103 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:38,104 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:38,104 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:56:38,105 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:38,105 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:56:38,106 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:38,107 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:38,107 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:38,108 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:38,108 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:56:38,108 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:38,109 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:56:38,110 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:56:38,110 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:56:38,111 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:56:38,394 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:38,394 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:38,395 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:56:38,396 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:38,649 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:56:38,649 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:38,651 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:56:38,651 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:56:38,651 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:38,652 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:38,653 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:38,654 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:38,654 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:56:38,654 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:38,655 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:38,655 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:56:38,655 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:38,656 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:38,657 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:38,658 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:38,658 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:56:38,658 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:38,659 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:56:38,659 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:56:38,659 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:56:38,673 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:56:38,947 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:38,948 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:38,948 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:56:38,964 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:39,225 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:56:39,225 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:39,225 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:56:39,226 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:56:39,227 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:39,228 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:39,229 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:39,230 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:39,230 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:39,230 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:56:39,231 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:39,231 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:56:39,232 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:39,232 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:39,233 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:39,233 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:39,234 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:56:39,234 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:39,234 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:56:39,235 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:56:39,236 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:56:39,441 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:56:39,442 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:56:39,442 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:56:39,443 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:56:39,443 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:56:39,444 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:56:39,456 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:56:39,746 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:39,748 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:39,748 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:56:39,749 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:39,986 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:56:39,986 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:39,987 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:56:39,987 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:56:39,987 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:39,988 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:39,989 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:39,991 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:39,991 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:56:39,991 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:39,992 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:39,992 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:56:39,993 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:39,994 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:39,995 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:39,995 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:39,996 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:39,996 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:56:39,996 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:56:39,997 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:56:39,997 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:56:39,998 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:56:40,257 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:40,258 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:40,259 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:56:40,259 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:40,517 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:56:40,518 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:40,519 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:56:40,519 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:56:40,519 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:40,521 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:40,522 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:40,522 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:40,523 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:56:40,524 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:40,524 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:40,524 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:56:40,524 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:40,525 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:40,526 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:40,527 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:40,527 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:40,527 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:56:40,528 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:56:40,528 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:56:40,528 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:56:40,529 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:56:40,796 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:40,797 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:40,797 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:56:40,798 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:41,055 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:56:41,057 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:41,057 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:56:41,057 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:56:41,058 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:41,058 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:41,059 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:41,060 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:41,061 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:56:41,061 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:41,061 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:41,062 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:56:41,062 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:41,063 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:41,064 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:41,065 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:41,065 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:56:41,065 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:56:41,065 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:41,066 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:56:41,066 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:56:41,271 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:56:41,272 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:56:41,273 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:56:41,273 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:56:41,274 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:56:41,275 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:56:41,276 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:56:41,563 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:41,564 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:41,564 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:56:41,565 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:41,804 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:56:41,806 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:41,806 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:56:41,807 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:56:41,807 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:41,809 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:41,809 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:41,810 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:41,810 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:56:41,811 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:41,811 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:41,811 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:56:41,811 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:41,813 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:41,813 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:41,814 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:41,814 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:56:41,814 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:41,814 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:56:41,815 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:56:41,816 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:56:41,827 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:56:42,088 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:42,090 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:42,091 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:56:42,110 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:42,413 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:56:42,414 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:42,414 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:56:42,415 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:56:42,416 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:42,417 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:42,418 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:42,418 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:42,418 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:56:42,418 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:42,419 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:42,419 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:56:42,420 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:42,421 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:42,421 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:42,422 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:42,423 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:42,423 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:56:42,424 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:56:42,424 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:56:42,424 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:56:42,450 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:56:42,715 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:42,716 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:42,716 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:56:42,729 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:43,007 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:56:43,008 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:43,009 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:56:43,010 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:56:43,011 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:43,012 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:43,012 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:43,013 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:43,013 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:56:43,014 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:43,014 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:43,015 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:56:43,015 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:43,016 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:43,017 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:43,018 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:43,018 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:43,018 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:56:43,019 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:56:43,019 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:56:43,019 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:56:43,212 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:56:43,213 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:56:43,213 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:56:43,214 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:56:43,214 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:56:43,215 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:56:43,216 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:56:43,493 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:43,494 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:43,494 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:56:43,495 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:43,796 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:56:43,796 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:43,797 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:56:43,797 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:56:43,798 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:43,799 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:43,800 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:43,800 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:43,801 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:56:43,801 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:43,802 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:43,802 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:56:43,802 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:43,803 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:43,804 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:43,804 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:43,805 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:43,806 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:56:43,806 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:56:43,806 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:56:43,806 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:56:43,807 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:56:44,101 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:44,102 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:44,103 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:56:44,104 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:44,416 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:56:44,417 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:44,417 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:56:44,418 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:56:44,418 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:44,419 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:44,419 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:44,420 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:44,420 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:56:44,421 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:44,421 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:44,421 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:56:44,422 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:44,423 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:44,424 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:44,425 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:44,425 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:56:44,425 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:44,425 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:56:44,426 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:56:44,426 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:56:44,427 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:56:44,718 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:44,718 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:44,720 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:56:44,743 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:45,081 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:56:45,082 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:45,083 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:56:45,083 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:56:45,083 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:45,085 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:45,086 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:45,087 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:45,088 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:45,088 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:56:45,089 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:45,089 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:56:45,089 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:45,090 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:45,091 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:45,091 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:45,092 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:56:45,092 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:45,093 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:56:45,093 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:56:45,093 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:56:45,304 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:56:45,304 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:56:45,304 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:56:45,305 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:56:45,305 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:56:45,305 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:56:45,319 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:56:45,612 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:45,614 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:45,614 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:56:45,627 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:45,898 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:56:45,899 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:45,899 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:56:45,899 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:56:45,901 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:45,901 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:45,902 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:45,903 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:45,904 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:45,904 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:56:45,904 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:45,905 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:56:45,905 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:45,906 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:45,907 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:45,908 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:45,908 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:56:45,908 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:45,909 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:56:45,909 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:56:45,909 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:56:45,921 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:56:46,215 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:46,216 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:46,217 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:56:46,218 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:46,480 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:56:46,480 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:46,481 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:56:46,481 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:56:46,481 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:46,482 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:46,483 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:46,484 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:46,485 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:56:46,485 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:46,485 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:46,486 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:56:46,486 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:46,487 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:46,487 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:46,488 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:46,488 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:46,488 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:56:46,489 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:56:46,489 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:56:46,489 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:56:46,490 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:56:46,758 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:46,759 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:46,760 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:56:46,773 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:47,066 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:56:47,067 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:47,067 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:56:47,067 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:56:47,068 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:47,068 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:47,070 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:47,070 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:47,071 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:56:47,071 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:47,071 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:47,072 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:56:47,072 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:47,073 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:47,074 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:47,075 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:47,075 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:56:47,075 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:56:47,076 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:47,076 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:56:47,077 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:56:47,283 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:56:47,284 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:56:47,284 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:56:47,284 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:56:47,284 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:56:47,285 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:56:47,286 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:56:47,535 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:47,536 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:47,536 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:56:47,537 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:47,813 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:56:47,813 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:47,814 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:56:47,814 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:56:47,814 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:47,815 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:47,816 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:47,816 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:47,817 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:47,817 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:56:47,818 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:47,818 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:56:47,819 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:47,820 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:47,820 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:47,821 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:47,821 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:56:47,822 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:47,822 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:56:47,822 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:56:47,822 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:56:47,823 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:56:48,078 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:48,079 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:48,079 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:56:48,080 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:48,350 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:56:48,351 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:48,352 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:56:48,352 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:56:48,352 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:48,353 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:48,353 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:48,355 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:48,356 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:48,356 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:56:48,357 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:48,358 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:56:48,358 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:48,359 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:48,359 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:48,360 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:48,360 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:56:48,361 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:56:48,361 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:48,361 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:56:48,361 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:56:48,362 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:56:48,627 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:48,628 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:48,629 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:56:48,651 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:48,932 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:56:48,933 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:48,933 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:56:48,934 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:56:48,934 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:48,934 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:48,935 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:48,937 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:48,937 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:56:48,937 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:48,938 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:48,938 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:56:48,938 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:48,939 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:48,940 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:48,940 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:48,941 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:56:48,941 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:48,941 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:56:48,942 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:56:48,942 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:56:49,147 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:56:49,148 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:56:49,149 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:56:49,149 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:56:49,150 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:56:49,150 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:56:49,151 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:56:49,414 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:49,414 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:49,415 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:56:49,426 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:49,697 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:56:49,698 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:49,698 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:56:49,699 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:56:49,699 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:49,701 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:49,701 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:49,702 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:49,702 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:56:49,702 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:49,703 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:49,703 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:56:49,704 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:49,704 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:49,705 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:49,706 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:49,706 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:56:49,706 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:49,706 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:56:49,707 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:56:49,708 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:56:49,708 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:56:49,958 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:49,959 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:49,959 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:56:49,972 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:50,223 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:56:50,224 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:50,224 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:56:50,224 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:56:50,224 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:50,225 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:50,226 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:50,227 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:50,227 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:50,228 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:56:50,228 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:50,228 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:56:50,229 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:50,230 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:50,230 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:50,231 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:50,231 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:50,232 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:56:50,232 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:56:50,232 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:56:50,232 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:56:50,250 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:56:50,531 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:50,532 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:50,532 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:56:50,533 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:50,793 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:56:50,794 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:50,794 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:56:50,795 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:56:50,795 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:50,796 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:50,796 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:50,797 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:50,798 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:56:50,798 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:50,798 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:50,798 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:56:50,799 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:50,800 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:50,801 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:50,801 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:50,802 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:50,802 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:56:50,802 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:56:50,802 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:56:50,803 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:56:50,997 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:56:50,997 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:56:50,997 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:56:50,997 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:56:50,998 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:56:50,998 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:56:50,999 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:56:51,253 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:51,254 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:51,255 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:56:51,277 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:51,529 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:56:51,529 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:51,530 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:56:51,530 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:56:51,531 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:51,532 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:51,532 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:51,535 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:51,535 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:51,535 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:56:51,535 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:51,536 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:56:51,536 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:51,537 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:51,538 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:51,539 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:51,539 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:51,539 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:56:51,540 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:56:51,540 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:56:51,540 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:56:51,541 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:56:51,820 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:51,821 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:51,821 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:56:51,822 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:52,089 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:56:52,090 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:52,090 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:56:52,091 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:56:52,091 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:52,092 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:52,093 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:52,094 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:52,095 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:52,095 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:56:52,096 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:52,096 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:56:52,096 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:52,097 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:52,098 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:52,098 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:52,099 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:56:52,099 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:52,099 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:56:52,100 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:56:52,100 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:56:52,101 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:56:52,347 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:52,348 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:52,348 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:56:52,363 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:52,626 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:56:52,626 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:52,627 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:56:52,627 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:56:52,628 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:52,628 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:52,630 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:52,630 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:52,631 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:52,631 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:56:52,632 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:52,632 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:56:52,632 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:52,634 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:52,634 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:52,635 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:52,635 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:52,635 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:56:52,636 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:56:52,636 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:56:52,636 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:56:52,842 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:56:52,842 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:56:52,843 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:56:52,843 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:56:52,844 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:56:52,844 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:56:52,845 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:56:53,106 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:53,107 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:53,107 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:56:53,108 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:53,366 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:56:53,367 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:53,368 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:56:53,369 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:56:53,369 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:53,370 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:53,370 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:53,371 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:53,372 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:56:53,372 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:53,372 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:53,373 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:56:53,373 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:53,374 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:53,375 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:53,375 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:53,376 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:53,376 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:56:53,376 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:56:53,377 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:56:53,377 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:56:53,399 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:56:53,661 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:53,662 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:53,663 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:56:53,664 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:53,961 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:56:53,962 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:53,962 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:56:53,963 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:56:53,963 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:53,964 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:53,965 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:53,965 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:53,966 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:56:53,966 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:53,967 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:53,967 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:56:53,967 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:53,968 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:53,969 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:53,970 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:53,970 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:56:53,970 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:53,970 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:56:53,971 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:56:53,971 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:56:53,990 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:56:54,285 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:54,290 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:54,290 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:56:54,291 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:54,539 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:56:54,540 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:54,540 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:56:54,540 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:56:54,541 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:54,542 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:54,542 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:54,543 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:54,543 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:56:54,544 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:54,544 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:54,544 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:56:54,545 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:54,547 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:54,548 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:54,548 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:54,548 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:56:54,549 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:54,549 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:56:54,549 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:56:54,550 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:56:54,743 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:56:54,744 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:56:54,745 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:56:54,746 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:56:54,746 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:56:54,747 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:56:54,748 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:56:55,004 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:55,004 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:55,005 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:56:55,023 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:55,336 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:56:55,337 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:55,338 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:56:55,339 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:56:55,340 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:55,341 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:55,342 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:55,343 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:55,344 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:56:55,344 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:55,345 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:55,345 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:56:55,346 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:55,348 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:55,349 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:55,349 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:55,350 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:56:55,350 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:55,350 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:56:55,351 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:56:55,351 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:56:55,364 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:56:55,665 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:55,666 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:55,666 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:56:55,667 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:55,932 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:56:55,934 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:55,934 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:56:55,934 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:56:55,934 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:55,935 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:55,936 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:55,936 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:55,937 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:56:55,937 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:55,938 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:55,938 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:56:55,938 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:55,939 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:55,940 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:55,940 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:55,940 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:56:55,941 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:55,941 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:56:55,941 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:56:55,941 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:56:55,942 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:56:56,212 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:56,213 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:56,213 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:56:56,232 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:56,508 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:56:56,509 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:56,510 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:56:56,511 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:56:56,511 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:56,511 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:56,513 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:56,514 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:56,514 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:56:56,515 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:56,515 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:56,515 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:56:56,516 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:56,517 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:56,517 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:56,518 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:56,518 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:56:56,518 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:56,519 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:56:56,519 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:56:56,519 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:56:56,727 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:56:56,727 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:56:56,728 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:56:56,728 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:56:56,729 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:56:56,729 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:56:56,742 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:56:57,037 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:57,038 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:57,039 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:56:57,039 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:57,323 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:56:57,324 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:57,324 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:56:57,324 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:56:57,324 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:57,325 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:57,326 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:57,327 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:57,328 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:57,328 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:56:57,329 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:57,329 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:56:57,329 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:57,330 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:57,331 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:57,331 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:57,332 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:56:57,332 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:57,332 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:56:57,333 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:56:57,333 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:56:57,334 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:56:57,618 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:57,619 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:57,620 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:56:57,642 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:57,937 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:56:57,937 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:57,938 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:56:57,938 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:56:57,938 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:57,940 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:57,941 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:57,942 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:57,942 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:56:57,943 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:57,943 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:57,944 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:56:57,944 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:57,945 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:57,946 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:57,946 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:57,947 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:56:57,947 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:57,947 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:56:57,948 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:56:57,948 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:56:57,967 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:56:58,248 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:58,250 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:58,250 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:56:58,262 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:58,556 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:56:58,557 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:58,557 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:56:58,558 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:56:58,558 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:58,559 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:58,560 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:58,560 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:58,560 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:56:58,561 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:58,561 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:58,562 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:56:58,562 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:56:58,563 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:56:58,564 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:56:58,564 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:56:58,565 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:56:58,565 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:56:58,566 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:56:58,566 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:56:58,566 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:56:58,761 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:56:58,762 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:56:58,763 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:56:58,764 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:56:58,765 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:56:58,765 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:56:58,791 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:56:59,077 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:59,078 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:59,078 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:56:59,079 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:59,361 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:56:59,362 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:59,362 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:56:59,362 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:56:59,364 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:59,365 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:59,366 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:59,367 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:59,367 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:59,368 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:56:59,368 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:59,369 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:56:59,369 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:56:59,370 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:56:59,370 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:56:59,371 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:56:59,371 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:56:59,372 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:56:59,373 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:56:59,373 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:56:59,373 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:56:59,396 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:56:59,664 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:56:59,666 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:59,666 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:56:59,667 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:59,938 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:56:59,939 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:59,940 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:56:59,940 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:56:59,940 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:59,942 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:59,943 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:59,944 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:59,944 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:56:59,945 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:59,945 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:56:59,945 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:56:59,946 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:56:59,947 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:56:59,948 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:56:59,948 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:56:59,948 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:56:59,949 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:56:59,949 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:56:59,949 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:56:59,950 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:56:59,969 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:57:00,216 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:00,217 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:00,218 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:57:00,230 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:00,474 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:57:00,475 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:00,475 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:57:00,476 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:57:00,476 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:00,477 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:00,477 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:00,478 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:00,478 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:57:00,479 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:00,479 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:00,480 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:57:00,480 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:00,481 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:00,481 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:00,482 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:00,483 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:57:00,483 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:00,483 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:57:00,484 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:57:00,484 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:57:00,679 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:57:00,680 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:57:00,681 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:57:00,681 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:57:00,682 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:57:00,682 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:57:00,683 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:57:00,950 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:00,951 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:00,952 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:57:00,976 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:01,213 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:57:01,214 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:01,214 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:57:01,214 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:57:01,214 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:01,216 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:01,217 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:01,217 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:01,217 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:57:01,217 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:01,218 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:01,218 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:57:01,219 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:01,220 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:01,220 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:01,221 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:01,221 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:57:01,221 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:57:01,221 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:01,222 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:57:01,222 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:57:01,240 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:57:01,488 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:01,489 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:01,490 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:57:01,490 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:01,750 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:57:01,752 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:01,752 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:57:01,753 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:57:01,753 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:01,753 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:01,754 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:01,755 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:01,756 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:57:01,756 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:01,756 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:01,756 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:57:01,757 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:01,758 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:01,759 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:01,759 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:01,759 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:57:01,760 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:01,760 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:57:01,760 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:57:01,760 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:57:01,761 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:57:02,044 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:02,046 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:02,047 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:57:02,048 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:02,311 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:57:02,312 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:02,312 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:57:02,312 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:57:02,313 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:02,314 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:02,315 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:02,315 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:02,316 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:57:02,316 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:02,317 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:02,317 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:57:02,317 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:02,318 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:02,319 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:02,320 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:02,320 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:57:02,320 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:02,320 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:57:02,321 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:57:02,321 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:57:02,532 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:57:02,532 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:57:02,533 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:57:02,534 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:57:02,534 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:57:02,534 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:57:02,535 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:57:02,857 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:02,859 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:02,859 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:57:02,872 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:03,191 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:57:03,191 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:03,192 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:57:03,193 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:57:03,193 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:03,194 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:03,195 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:03,195 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:03,196 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:03,196 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:57:03,197 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:03,197 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:57:03,198 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:03,199 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:03,200 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:03,201 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:03,202 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:03,202 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:57:03,202 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:57:03,203 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:57:03,203 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:57:03,204 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:57:03,513 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:03,514 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:03,514 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:57:03,514 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:03,816 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:57:03,817 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:03,817 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:57:03,817 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:57:03,818 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:03,819 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:03,819 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:03,820 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:03,821 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:03,821 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:57:03,822 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:03,822 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:57:03,823 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:03,823 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:03,824 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:03,824 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:03,825 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:57:03,825 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:03,825 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:57:03,826 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:57:03,826 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:57:03,827 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:57:04,130 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:04,130 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:04,131 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:57:04,133 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:04,461 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:57:04,461 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:04,462 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:57:04,462 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:57:04,462 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:04,463 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:04,464 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:04,465 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:04,466 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:57:04,466 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:04,466 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:04,466 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:57:04,467 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:04,468 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:04,469 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:04,470 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:04,470 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:04,471 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:57:04,471 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:57:04,472 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:57:04,472 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:57:04,669 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:57:04,670 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:57:04,670 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:57:04,670 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:57:04,671 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:57:04,671 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:57:04,671 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:57:04,989 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:04,990 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:04,990 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:57:05,014 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:05,327 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:57:05,327 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:05,327 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:57:05,329 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:57:05,329 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:05,330 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:05,331 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:05,331 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:05,332 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:57:05,332 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:05,332 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:05,332 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:57:05,333 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:05,334 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:05,335 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:05,335 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:05,336 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:05,336 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:57:05,336 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:57:05,337 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:57:05,337 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:57:05,337 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:57:05,651 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:05,652 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:05,652 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:57:05,664 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:05,952 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:57:05,953 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:05,953 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:57:05,953 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:57:05,954 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:05,955 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:05,956 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:05,956 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:05,956 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:57:05,957 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:05,957 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:05,957 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:57:05,958 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:05,959 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:05,960 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:05,960 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:05,961 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:57:05,961 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:57:05,961 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:57:05,961 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:05,961 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:57:05,962 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:57:06,245 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:06,247 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:06,247 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:57:06,248 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:06,509 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:57:06,510 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:06,510 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:57:06,511 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:57:06,511 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:06,512 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:06,512 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:06,513 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:06,513 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:57:06,514 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:06,514 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:06,514 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:57:06,515 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:06,515 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:06,516 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:06,517 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:06,517 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:06,517 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:57:06,518 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:57:06,518 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:57:06,518 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:57:06,720 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:57:06,720 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:57:06,720 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:57:06,721 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:57:06,722 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:57:06,722 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:57:06,724 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:57:07,016 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:07,018 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:07,018 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:57:07,032 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:07,312 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:57:07,313 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:07,313 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:57:07,315 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:57:07,315 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:07,317 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:07,318 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:07,319 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:07,319 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:57:07,320 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:07,320 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:07,320 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:57:07,321 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:07,322 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:07,323 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:07,323 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:07,324 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:57:07,324 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:07,324 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:57:07,325 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:57:07,325 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:57:07,326 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:57:07,603 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:07,604 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:07,604 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:57:07,624 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:07,900 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:57:07,902 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:07,902 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:57:07,903 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:57:07,903 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:07,904 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:07,904 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:07,906 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:07,906 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:57:07,907 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:07,907 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:07,907 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:57:07,908 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:07,908 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:07,910 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:07,910 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:07,911 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:57:07,911 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:07,911 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:57:07,912 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:57:07,912 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:57:07,913 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:57:08,146 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:08,146 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:08,148 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:57:08,148 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:08,390 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:57:08,391 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:08,393 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:57:08,393 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:57:08,393 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:08,394 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:08,395 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:08,397 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:08,397 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:08,398 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:57:08,398 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:08,399 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:57:08,399 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:08,400 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:08,400 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:08,401 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:08,402 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:57:08,402 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:08,402 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:57:08,403 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:57:08,403 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:57:08,599 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:57:08,599 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:57:08,600 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:57:08,601 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:57:08,601 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:57:08,601 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:57:08,614 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:57:08,897 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:08,899 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:08,900 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:57:08,925 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:09,172 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:57:09,173 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:09,173 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:57:09,173 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:57:09,174 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:09,175 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:09,175 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:09,176 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:09,177 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:57:09,177 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:09,177 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:09,177 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:57:09,178 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:09,178 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:09,180 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:09,181 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:09,181 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:09,181 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:57:09,181 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:57:09,182 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:57:09,182 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:57:09,182 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:57:09,445 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:09,445 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:09,446 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:57:09,447 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:09,706 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:57:09,707 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:09,707 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:57:09,708 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:57:09,708 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:09,709 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:09,710 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:09,711 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:09,712 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:57:09,712 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:09,712 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:09,713 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:57:09,713 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:09,714 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:09,715 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:09,716 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:09,716 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:09,717 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:57:09,717 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:57:09,718 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:57:09,718 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:57:09,734 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:57:09,988 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:09,988 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:09,989 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:57:10,001 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:10,253 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:57:10,254 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:10,254 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:57:10,255 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:57:10,255 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:10,256 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:10,256 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:10,257 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:10,257 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:10,258 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:57:10,259 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:10,259 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:57:10,259 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:10,261 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:10,261 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:10,262 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:10,262 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:57:10,262 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:10,263 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:57:10,263 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:57:10,263 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:57:10,466 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:57:10,467 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:57:10,468 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:57:10,468 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:57:10,468 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:57:10,468 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:57:10,482 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:57:10,724 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:10,725 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:10,725 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:57:10,745 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:10,997 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:57:10,998 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:10,999 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:57:11,000 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:57:11,000 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:11,001 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:11,002 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:11,003 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:11,004 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:11,004 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:57:11,004 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:11,005 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:57:11,005 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:11,006 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:11,007 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:11,007 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:11,008 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:11,008 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:57:11,009 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:57:11,009 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:57:11,009 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:57:11,025 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:57:11,315 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:11,316 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:11,316 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:57:11,337 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:11,576 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:57:11,577 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:11,578 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:57:11,578 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:57:11,579 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:11,581 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:11,581 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:11,582 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:11,582 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:57:11,583 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:11,583 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:11,583 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:57:11,584 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:11,584 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:11,585 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:11,585 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:11,586 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:57:11,586 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:11,587 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:57:11,587 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:57:11,587 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:57:11,588 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:57:11,860 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:11,861 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:11,862 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:57:11,881 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:12,153 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:57:12,153 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:12,154 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:57:12,154 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:57:12,155 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:12,156 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:12,158 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:12,158 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:12,158 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:57:12,159 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:12,159 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:12,159 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:57:12,159 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:12,161 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:12,161 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:12,162 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:12,162 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:57:12,163 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:57:12,163 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:57:12,163 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:12,164 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:57:12,360 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:57:12,361 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:57:12,361 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:57:12,361 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:57:12,362 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:57:12,362 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:57:12,363 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:57:12,635 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:12,637 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:12,638 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:57:12,640 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:12,898 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:57:12,900 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:12,900 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:57:12,901 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:57:12,901 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:12,903 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:12,904 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:12,904 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:12,905 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:57:12,905 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:12,905 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:12,905 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:57:12,907 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:12,908 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:12,909 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:12,909 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:12,909 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:57:12,910 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:12,910 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:57:12,910 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:57:12,910 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:57:12,911 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:57:13,189 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:13,190 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:13,190 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:57:13,211 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:13,474 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:57:13,475 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:13,476 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:57:13,477 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:57:13,478 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:13,480 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:13,481 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:13,482 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:13,482 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:57:13,483 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:13,483 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:13,483 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:57:13,484 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:13,485 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:13,485 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:13,486 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:13,486 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:13,486 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:57:13,487 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:57:13,487 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:57:13,487 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:57:13,488 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:57:13,741 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:13,741 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:13,741 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:57:13,743 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:14,032 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:57:14,036 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:14,037 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:57:14,037 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:57:14,038 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:14,039 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:14,040 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:14,041 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:14,042 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:14,042 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:57:14,042 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:14,043 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:57:14,043 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:14,044 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:14,045 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:14,046 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:14,046 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:57:14,046 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:14,047 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:57:14,047 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:57:14,048 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:57:14,243 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:57:14,244 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:57:14,245 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:57:14,246 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:57:14,246 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:57:14,247 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:57:14,248 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:57:14,512 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:14,512 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:14,513 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:57:14,515 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:14,783 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:57:14,783 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:14,784 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:57:14,784 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:57:14,784 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:14,785 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:14,786 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:14,786 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:14,786 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:57:14,788 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:14,789 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:14,789 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:57:14,790 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:14,791 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:14,792 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:14,792 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:14,793 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:57:14,793 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:14,793 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:57:14,794 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:57:14,794 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:57:14,820 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:57:15,086 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:15,087 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:15,087 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:57:15,088 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:15,379 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:57:15,380 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:15,381 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:57:15,381 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:57:15,382 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:15,384 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:15,385 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:15,385 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:15,385 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:57:15,386 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:15,387 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:57:15,387 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:15,387 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:15,388 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:15,389 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:15,390 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:15,390 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:57:15,391 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:15,391 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:57:15,392 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:57:15,392 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:57:15,393 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:57:15,695 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:15,696 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:15,697 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:57:15,697 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:15,979 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:57:15,980 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:15,981 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:57:15,982 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:57:15,982 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:15,983 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:15,984 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:15,985 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:15,985 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:57:15,986 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:15,987 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:15,987 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:57:15,987 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:15,988 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:15,989 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:15,990 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:15,990 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:15,990 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:57:15,991 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:57:15,991 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:57:15,991 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:57:16,188 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:57:16,189 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:57:16,190 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:57:16,190 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:57:16,190 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:57:16,191 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:57:16,191 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:57:16,464 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:16,465 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:16,465 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:57:16,467 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:16,725 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:57:16,725 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:16,726 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:57:16,726 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:57:16,726 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:16,727 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:16,728 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:16,729 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:16,730 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:57:16,730 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:16,731 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:16,731 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:57:16,731 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:16,733 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:16,734 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:16,734 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:16,735 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:16,735 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:57:16,736 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:57:16,736 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:57:16,736 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:57:16,761 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:57:17,077 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:17,077 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:17,078 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:57:17,078 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:17,341 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:57:17,342 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:17,342 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:57:17,343 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:57:17,343 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:17,344 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:17,345 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:17,346 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:17,346 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:57:17,346 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:17,347 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:17,347 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:57:17,347 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:17,349 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:17,350 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:17,351 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:17,351 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:17,352 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:57:17,352 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:57:17,352 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:57:17,353 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:57:17,372 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:57:17,648 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:17,649 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:17,649 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:57:17,650 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:17,953 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:57:17,954 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:17,955 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:57:17,955 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:57:17,955 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:17,956 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:17,957 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:17,957 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:17,958 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:57:17,958 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:17,959 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:17,959 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:57:17,959 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:17,960 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:17,961 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:17,961 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:17,962 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:17,962 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:57:17,962 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:57:17,963 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:57:17,963 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:57:18,162 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:57:18,163 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:57:18,163 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:57:18,163 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:57:18,164 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:57:18,165 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:57:18,166 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:57:18,473 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:18,473 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:18,475 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:57:18,490 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:18,806 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:57:18,807 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:18,807 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:57:18,808 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:57:18,808 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:18,809 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:18,809 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:18,811 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:18,812 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:57:18,812 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:18,812 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:18,813 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:57:18,813 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:18,814 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:18,815 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:18,815 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:18,816 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:57:18,816 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:18,816 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:57:18,817 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:57:18,817 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:57:18,818 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:57:19,181 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:19,182 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:19,182 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:57:19,183 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:19,522 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:57:19,522 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:19,523 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:57:19,523 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:57:19,523 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:19,524 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:19,525 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:19,526 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:19,526 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:19,527 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:57:19,527 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:19,528 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:57:19,528 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:19,529 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:19,530 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:19,530 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:19,531 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:19,531 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:57:19,532 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:57:19,532 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:57:19,532 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:57:19,545 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:57:19,940 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:19,941 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:19,941 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:57:19,942 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:20,304 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:57:20,305 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:20,305 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:57:20,306 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:57:20,306 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:20,308 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:20,308 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:20,309 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:20,310 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:57:20,310 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:20,311 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:20,311 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:57:20,311 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:20,313 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:20,314 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:20,315 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:20,315 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:57:20,315 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:20,315 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:57:20,316 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:57:20,316 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:57:20,509 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:57:20,510 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:57:20,511 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:57:20,511 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:57:20,511 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:57:20,512 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:57:20,513 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:57:20,802 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:20,802 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:20,803 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:57:20,804 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:21,092 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:57:21,093 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:21,093 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:57:21,094 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:57:21,094 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:21,095 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:21,097 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:21,097 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:21,098 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:57:21,098 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:21,098 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:21,099 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:57:21,099 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:21,100 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:21,101 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:21,102 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:21,102 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:21,102 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:57:21,103 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:57:21,103 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:57:21,103 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:57:21,105 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:57:21,470 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:21,471 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:21,472 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:57:21,473 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:21,803 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:57:21,804 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:21,805 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:57:21,806 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:57:21,806 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:21,807 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:21,809 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:21,810 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:21,811 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:21,811 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:57:21,812 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:21,812 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:57:21,812 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:21,813 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:21,814 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:21,815 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:21,815 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:57:21,815 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:21,815 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:57:21,816 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:57:21,816 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:57:21,839 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:57:22,145 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:22,146 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:22,147 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:57:22,148 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:22,447 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:57:22,449 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:22,449 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:57:22,450 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:57:22,450 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:22,452 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:22,454 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:22,454 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:22,454 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:57:22,455 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:22,456 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:22,456 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:57:22,456 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:22,457 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:22,457 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:22,458 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:22,458 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:57:22,459 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:22,459 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:57:22,459 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:57:22,460 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:57:22,662 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:57:22,663 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:57:22,663 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:57:22,664 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:57:22,664 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:57:22,665 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:57:22,666 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:57:22,975 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:22,976 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:22,976 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:57:23,000 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:23,282 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:57:23,283 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:23,284 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:57:23,285 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:57:23,286 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:23,287 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:23,288 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:23,289 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:23,290 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:23,290 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:57:23,291 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:23,291 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:57:23,291 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:23,292 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:23,293 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:23,293 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:23,294 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:23,294 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:57:23,295 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:57:23,295 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:57:23,295 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:57:23,310 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:57:23,598 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:23,599 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:23,600 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:57:23,600 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:23,879 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:57:23,880 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:23,881 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:57:23,881 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:57:23,882 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:23,882 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:23,884 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:23,884 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:23,885 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:57:23,885 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:23,886 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:23,886 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:57:23,886 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:23,887 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:23,888 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:23,889 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:23,889 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:23,889 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:57:23,889 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:57:23,890 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:57:23,891 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:57:23,914 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:57:24,227 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:24,228 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:24,228 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:57:24,230 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:24,547 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:57:24,548 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:24,548 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:57:24,548 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:57:24,549 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:24,550 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:24,551 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:24,552 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:24,552 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:57:24,552 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:24,553 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:24,554 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:57:24,554 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:24,555 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:24,555 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:24,556 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:24,556 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:57:24,556 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:24,557 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:57:24,557 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:57:24,557 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:57:24,766 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:57:24,767 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:57:24,767 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:57:24,768 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:57:24,768 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:57:24,769 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:57:24,782 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:57:25,053 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:25,053 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:25,054 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:57:25,077 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:25,347 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:57:25,348 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:25,349 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:57:25,349 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:57:25,350 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:25,350 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:25,351 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:25,352 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:25,352 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:57:25,353 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:25,353 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:25,354 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:57:25,354 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:25,355 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:25,356 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:25,357 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:25,357 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:57:25,357 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:25,357 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:57:25,358 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:57:25,358 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:57:25,359 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:57:25,640 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:25,641 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:25,642 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:57:25,643 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:25,882 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:57:25,884 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:25,884 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:57:25,885 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:57:25,885 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:25,886 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:25,887 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:25,888 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:25,888 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:25,889 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:57:25,890 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:25,890 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:57:25,890 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:25,891 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:25,892 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:25,892 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:25,893 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:57:25,893 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:25,893 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:57:25,894 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:57:25,894 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:57:25,895 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:57:26,182 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:26,184 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:26,184 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:57:26,184 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:26,474 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:57:26,475 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:26,476 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:57:26,477 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:57:26,478 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:26,479 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:26,481 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:26,481 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:26,481 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:57:26,482 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:26,482 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:26,483 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:57:26,483 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:26,484 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:26,485 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:26,485 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:26,485 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:57:26,486 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:57:26,486 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:26,486 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:57:26,487 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:57:26,695 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:57:26,696 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:57:26,696 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:57:26,696 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:57:26,697 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:57:26,697 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:57:26,697 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:57:26,986 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:26,987 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:26,987 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:57:26,989 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:27,239 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:57:27,240 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:27,240 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:57:27,241 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:57:27,241 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:27,243 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:27,244 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:27,245 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:27,245 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:57:27,246 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:27,246 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:27,246 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:57:27,246 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:27,248 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:27,248 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:27,249 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:27,249 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:57:27,249 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:27,250 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:57:27,250 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:57:27,250 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:57:27,270 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:57:27,532 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:27,532 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:27,533 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:57:27,534 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:27,806 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:57:27,807 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:27,807 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:57:27,808 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:57:27,808 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:27,809 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:27,810 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:27,810 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:27,810 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:57:27,810 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:27,810 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:27,810 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:57:27,810 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:27,813 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:27,814 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:27,814 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:27,815 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:57:27,815 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:27,815 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:57:27,815 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:57:27,816 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:57:27,816 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:57:28,089 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:28,091 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:28,092 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:57:28,105 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:28,385 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:57:28,386 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:28,386 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:57:28,387 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:57:28,387 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:28,388 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:28,388 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:28,390 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:28,390 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:57:28,390 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:28,390 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:28,391 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:57:28,391 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:28,392 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:28,393 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:28,393 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:28,394 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:28,394 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:57:28,394 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:57:28,394 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:57:28,395 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:57:28,587 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:57:28,588 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:57:28,588 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:57:28,589 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:57:28,589 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:57:28,590 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:57:28,591 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:57:28,854 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:28,856 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:28,856 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:57:28,857 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:29,130 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:57:29,130 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:29,132 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:57:29,132 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:57:29,132 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:29,133 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:29,134 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:29,134 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:29,135 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:57:29,136 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:29,136 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:29,136 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:57:29,137 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:29,138 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:29,138 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:29,139 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:29,139 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:29,140 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:57:29,140 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:57:29,141 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:57:29,141 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:57:29,159 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:57:29,447 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:29,448 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:29,448 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:57:29,449 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:29,718 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:57:29,719 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:29,719 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:57:29,720 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:57:29,720 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:29,720 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:29,721 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:29,722 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:29,722 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:57:29,723 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:29,723 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:29,724 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:57:29,724 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:29,725 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:29,726 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:29,727 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:29,727 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:29,727 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:57:29,728 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:57:29,728 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:57:29,728 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:57:29,729 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:57:29,942 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:29,943 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:29,943 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:57:29,945 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:30,180 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:57:30,181 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:30,181 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:57:30,181 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:57:30,182 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:30,183 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:30,183 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:30,184 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:30,184 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:57:30,185 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:30,185 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:30,185 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:57:30,186 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:30,187 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:30,187 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:30,188 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:30,189 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:30,189 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:57:30,189 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:57:30,189 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:57:30,190 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:57:30,387 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:57:30,388 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:57:30,389 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:57:30,390 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:57:30,391 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:57:30,391 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:57:30,392 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:57:30,725 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:30,726 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:30,726 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:57:30,727 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:31,017 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:57:31,018 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:31,018 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:57:31,019 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:57:31,019 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:31,021 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:31,022 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:31,023 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:31,024 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:57:31,024 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:31,025 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:31,025 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:57:31,025 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:31,026 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:31,027 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:31,028 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:31,028 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:57:31,028 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:31,028 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:57:31,029 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:57:31,029 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:57:31,030 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:57:31,333 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:31,333 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:31,334 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:57:31,335 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:31,610 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:57:31,612 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:31,613 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:57:31,613 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:57:31,613 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:31,614 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:31,614 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:31,615 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:31,616 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:57:31,616 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:31,616 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:31,617 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:57:31,617 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:31,618 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:31,619 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:31,619 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:31,619 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:31,619 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:57:31,620 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:57:31,621 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:57:31,621 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:57:31,621 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:57:31,950 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:31,951 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:31,951 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:57:31,952 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:32,273 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:57:32,274 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:32,274 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:57:32,275 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:57:32,275 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:32,276 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:32,277 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:32,278 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:32,278 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:57:32,279 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:32,279 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:32,280 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:57:32,280 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:32,281 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:32,282 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:32,282 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:32,283 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:57:32,283 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:32,284 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:57:32,284 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:57:32,284 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:57:32,488 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:57:32,489 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:57:32,490 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:57:32,490 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:57:32,491 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:57:32,491 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:57:32,492 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:57:32,794 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:32,796 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:32,796 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:57:32,798 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:33,154 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:57:33,155 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:33,155 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:57:33,156 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:57:33,156 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:33,157 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:33,157 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:33,159 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:33,159 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:33,159 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:57:33,160 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:33,160 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:57:33,161 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:33,161 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:33,163 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:33,164 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:33,164 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:33,164 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:57:33,165 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:57:33,165 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:57:33,165 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:57:33,166 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:57:33,489 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:33,490 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:33,490 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:57:33,491 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:33,819 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:57:33,820 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:33,822 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:57:33,822 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:57:33,823 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:33,824 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:33,824 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:33,825 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:33,825 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:57:33,825 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:33,825 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:57:33,825 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:33,826 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:33,828 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:33,829 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:33,829 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:33,829 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:33,830 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:57:33,830 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:57:33,831 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:57:33,831 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:57:33,832 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:57:34,181 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:34,182 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:34,183 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:57:34,184 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:34,512 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:57:34,514 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:34,514 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:57:34,515 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:57:34,515 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:34,517 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:34,517 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:34,519 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:34,520 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:34,520 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:57:34,521 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:34,521 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:57:34,521 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:34,522 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:34,522 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:34,523 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:34,523 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:34,523 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:57:34,524 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:57:34,524 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:57:34,524 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:57:34,732 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:57:34,732 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:57:34,733 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:57:34,733 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:57:34,734 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:57:34,734 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:57:34,736 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:57:35,028 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:35,029 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:35,030 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:57:35,031 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:35,316 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:57:35,317 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:35,318 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:57:35,319 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:57:35,320 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:35,322 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:35,323 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:35,324 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:35,324 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:57:35,325 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:35,325 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:35,325 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:57:35,326 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:35,327 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:35,327 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:35,328 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:35,328 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:57:35,328 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:35,329 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:57:35,329 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:57:35,329 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:57:35,330 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:57:35,656 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:35,657 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:35,658 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:57:35,659 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:35,957 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:57:35,957 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:35,958 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:57:35,959 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:57:35,959 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:35,960 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:35,961 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:35,962 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:35,962 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:57:35,962 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:35,963 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:35,963 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:57:35,964 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:35,965 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:35,965 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:35,966 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:35,966 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:35,967 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:57:35,967 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:57:35,967 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:57:35,967 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:57:35,983 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:57:36,316 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:36,317 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:36,317 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:57:36,339 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:36,658 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:57:36,659 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:36,660 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:57:36,661 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:57:36,662 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:36,664 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:36,665 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:36,666 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:36,666 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:57:36,667 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:36,667 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:36,668 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:57:36,668 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:36,669 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:36,670 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:36,671 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:36,671 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:36,672 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:57:36,672 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:57:36,672 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:57:36,673 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:57:36,875 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:57:36,875 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:57:36,876 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:57:36,877 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:57:36,877 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:57:36,877 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:57:36,878 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:57:37,244 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:37,246 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:37,246 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:57:37,260 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:37,566 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:57:37,567 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:37,568 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:57:37,568 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:57:37,569 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:37,569 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:37,570 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:37,571 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:37,572 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:57:37,572 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:37,572 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:37,572 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:57:37,573 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:37,574 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:37,575 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:37,575 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:37,576 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:57:37,576 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:37,576 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:57:37,577 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:57:37,577 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:57:37,578 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:57:37,893 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:37,894 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:37,895 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:57:37,896 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:38,260 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:57:38,261 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:38,261 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:57:38,262 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:57:38,263 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:38,264 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:38,265 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:38,265 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:38,266 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:38,266 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:57:38,267 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:38,267 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:57:38,268 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:38,268 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:38,269 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:38,270 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:38,270 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:57:38,270 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:38,270 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:57:38,271 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:57:38,271 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:57:38,290 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:57:38,668 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:38,670 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:38,671 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:57:38,672 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:39,003 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:57:39,005 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:39,005 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:57:39,006 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:57:39,007 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:39,008 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:39,010 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:39,010 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:39,010 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:57:39,011 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:39,011 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:39,011 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:57:39,012 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:39,013 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:39,014 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:39,015 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:39,015 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:57:39,015 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:39,016 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:57:39,016 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:57:39,016 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:57:39,212 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:57:39,213 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:57:39,215 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:57:39,215 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:57:39,215 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:57:39,215 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:57:39,216 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:57:39,528 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:39,528 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:39,530 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:57:39,531 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:39,904 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:57:39,905 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:39,906 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:57:39,906 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:57:39,906 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:39,908 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:39,909 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:39,910 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:39,910 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:39,911 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:57:39,912 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:39,912 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:57:39,912 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:39,914 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:39,915 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:39,915 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:39,916 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:57:39,916 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:39,916 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:57:39,917 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:57:39,917 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:57:39,918 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:57:40,285 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:40,286 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:40,286 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:57:40,287 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:40,681 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:57:40,683 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:40,683 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:57:40,684 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:57:40,684 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:40,685 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:40,686 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:40,687 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:40,687 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:57:40,687 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:40,688 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:40,688 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:57:40,689 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:40,690 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:40,691 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:40,691 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:40,692 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:57:40,692 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:40,693 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:57:40,693 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:57:40,693 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:57:40,694 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:57:41,053 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:41,054 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:41,054 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:57:41,055 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:41,407 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:57:41,408 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:41,409 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:57:41,409 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:57:41,409 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:41,410 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:41,412 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:41,413 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:41,413 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:41,414 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:57:41,414 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:41,415 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:57:41,415 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:41,416 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:41,417 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:41,418 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:41,419 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:41,419 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:57:41,419 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:57:41,419 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:57:41,420 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:57:41,628 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:57:41,628 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:57:41,629 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:57:41,629 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:57:41,630 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:57:41,631 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:57:41,632 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:57:41,955 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:41,956 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:41,957 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:57:41,972 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:42,272 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:57:42,274 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:42,275 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:57:42,275 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:57:42,276 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:42,277 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:42,278 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:42,279 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:42,280 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:42,281 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:57:42,281 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:42,282 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:57:42,282 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:42,283 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:42,284 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:42,284 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:42,285 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:57:42,285 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:57:42,285 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:42,286 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:57:42,286 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:57:42,287 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:57:42,623 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:42,624 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:42,625 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:57:42,639 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:42,955 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:57:42,956 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:42,956 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:57:42,957 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:57:42,957 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:42,958 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:42,958 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:42,959 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:42,960 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:57:42,960 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:42,960 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:42,961 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:57:42,961 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:42,962 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:42,963 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:42,964 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:42,965 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:57:42,965 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:42,965 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:57:42,965 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:57:42,966 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:57:42,979 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:57:43,334 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:43,336 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:43,336 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:57:43,337 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:43,633 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:57:43,634 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:43,634 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:57:43,635 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:57:43,635 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:43,636 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:43,637 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:43,638 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:43,638 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:57:43,639 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:43,639 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:43,639 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:57:43,640 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:43,640 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:43,641 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:43,642 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:43,643 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:43,643 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:57:43,643 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:57:43,643 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:57:43,644 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:57:43,843 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:57:43,844 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:57:43,845 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:57:43,845 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:57:43,846 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:57:43,846 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:57:43,848 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:57:44,129 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:44,129 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:44,130 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:57:44,152 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:44,493 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:57:44,494 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:44,494 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:57:44,495 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:57:44,495 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:44,497 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:44,499 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:44,499 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:44,500 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:44,500 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:57:44,501 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:44,501 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:57:44,502 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:44,503 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:44,504 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:44,505 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:44,505 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:57:44,505 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:44,505 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:57:44,506 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:57:44,506 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:57:44,525 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:57:44,838 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:44,839 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:44,840 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:57:44,841 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:45,142 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:57:45,143 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:45,143 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:57:45,144 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:57:45,144 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:45,146 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:45,146 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:45,147 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:45,148 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:57:45,148 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:45,149 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:45,150 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:57:45,150 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:45,151 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:45,152 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:45,152 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:45,152 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:57:45,153 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:45,153 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:57:45,154 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:57:45,154 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:57:45,155 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:57:45,462 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:45,464 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:45,464 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:57:45,486 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:45,757 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:57:45,758 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:45,758 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:57:45,759 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:57:45,760 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:45,761 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:45,762 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:45,763 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:45,764 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:57:45,764 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:45,765 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:45,765 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:57:45,766 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:45,766 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:45,768 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:45,768 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:45,768 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:57:45,769 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:45,769 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:57:45,769 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:57:45,770 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:57:45,967 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:57:45,968 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:57:45,969 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:57:45,969 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:57:45,969 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:57:45,970 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:57:45,983 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:57:46,236 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:46,237 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:46,238 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:57:46,264 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:46,560 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:57:46,561 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:46,561 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:57:46,563 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:57:46,563 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:46,564 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:46,565 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:46,566 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:46,567 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:46,567 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:57:46,568 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:46,568 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:57:46,569 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:46,570 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:46,570 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:46,571 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:46,571 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:57:46,571 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:46,571 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:57:46,572 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:57:46,572 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:57:46,589 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:57:46,868 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:46,869 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:46,870 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:57:46,887 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:47,159 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:57:47,159 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:47,160 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:57:47,161 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:57:47,161 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:47,162 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:47,164 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:47,165 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:47,166 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:47,167 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:57:47,167 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:47,168 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:57:47,168 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:47,169 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:47,170 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:47,170 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:47,171 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:57:47,171 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:47,171 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:57:47,172 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:57:47,172 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:57:47,198 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:57:47,441 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:47,442 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:47,443 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:57:47,444 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:47,696 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:57:47,697 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:47,697 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:57:47,698 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:57:47,699 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:47,700 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:47,702 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:47,703 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:47,704 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:47,704 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:57:47,704 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:47,705 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:57:47,705 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:47,706 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:47,706 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:47,707 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:47,707 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:57:47,707 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:47,707 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:57:47,708 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:57:47,708 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:57:47,914 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:57:47,914 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:57:47,914 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:57:47,916 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:57:47,916 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:57:47,916 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:57:47,917 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:57:48,157 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:48,158 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:48,158 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:57:48,178 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:48,417 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:57:48,418 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:48,418 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:57:48,419 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:57:48,419 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:48,420 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:48,421 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:48,422 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:48,422 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:57:48,423 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:48,423 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:48,423 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:57:48,424 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:48,424 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:48,425 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:48,425 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:48,426 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:57:48,426 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:48,427 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:57:48,427 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:57:48,427 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:57:48,428 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:57:48,666 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:48,667 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:48,667 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:57:48,669 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:48,925 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:57:48,925 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:48,926 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:57:48,926 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:57:48,926 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:48,928 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:48,929 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:48,929 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:48,930 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:57:48,930 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:48,931 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:57:48,931 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:48,931 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:48,933 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:48,933 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:48,934 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:48,934 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:48,935 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:57:48,936 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:57:48,936 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:57:48,936 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:57:48,948 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:57:49,196 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:49,197 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:49,198 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:57:49,199 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:49,443 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:57:49,444 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:49,445 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:57:49,445 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:57:49,446 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:49,447 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:49,449 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:49,450 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:49,450 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:57:49,450 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:49,451 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:49,451 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:57:49,451 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:49,452 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:49,453 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:49,453 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:49,454 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:57:49,454 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:49,454 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:57:49,455 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:57:49,455 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:57:49,661 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:57:49,662 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:57:49,662 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:57:49,663 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:57:49,664 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:57:49,664 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:57:49,665 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:57:49,937 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:49,938 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:49,939 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:57:49,939 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:50,220 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:57:50,221 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:50,222 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:57:50,223 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:57:50,224 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:50,225 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:50,226 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:50,227 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:50,227 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:57:50,227 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:50,227 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:50,227 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:57:50,227 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:50,229 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:50,230 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:50,231 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:50,231 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:50,231 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:57:50,232 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:57:50,232 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:57:50,232 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:57:50,233 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:57:50,559 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:50,560 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:50,561 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:57:50,581 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:50,874 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:57:50,875 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:50,875 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:57:50,876 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:57:50,877 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:50,878 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:50,879 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:50,880 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:50,880 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:50,881 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:57:50,882 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:50,882 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:57:50,882 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:50,883 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:50,883 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:50,884 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:50,884 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:57:50,884 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:50,885 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:57:50,885 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:57:50,885 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:57:50,887 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:57:51,196 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:51,197 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:51,198 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:57:51,198 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:51,509 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:57:51,510 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:51,510 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:57:51,511 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:57:51,512 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:51,513 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:51,513 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:51,514 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:51,514 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:57:51,515 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:51,516 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:51,516 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:57:51,516 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:51,518 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:51,518 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:51,519 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:51,519 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:51,520 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:57:51,520 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:57:51,520 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:57:51,521 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:57:51,713 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:57:51,714 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:57:51,714 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:57:51,715 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:57:51,715 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:57:51,716 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:57:51,716 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:57:52,025 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:52,026 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:52,027 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:57:52,027 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:52,338 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:57:52,339 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:52,340 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:57:52,340 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:57:52,341 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:52,342 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:52,343 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:52,344 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:52,345 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:57:52,345 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:52,345 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:52,346 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:57:52,346 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:52,347 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:52,348 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:52,348 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:52,349 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:57:52,349 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:52,349 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:57:52,350 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:57:52,350 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:57:52,361 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:57:52,712 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:52,713 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:52,714 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:57:52,714 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:53,127 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:57:53,129 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:53,129 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:57:53,130 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:57:53,130 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:53,131 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:53,132 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:53,133 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:53,133 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:57:53,134 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:53,134 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:53,134 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:57:53,135 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:53,136 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:53,137 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:53,137 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:53,138 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:57:53,138 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:57:53,138 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:53,138 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:57:53,139 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:57:53,163 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:57:53,553 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:53,554 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:53,556 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:57:53,557 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:53,931 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:57:53,931 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:53,932 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:57:53,933 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:57:53,933 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:53,934 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:53,934 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:53,936 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:53,936 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:53,936 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:57:53,937 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:53,938 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:57:53,938 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:53,939 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:53,939 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:53,940 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:53,940 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:57:53,941 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:53,941 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:57:53,941 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:57:53,942 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:57:54,145 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:57:54,146 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:57:54,146 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:57:54,147 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:57:54,147 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:57:54,148 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:57:54,160 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:57:54,510 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:54,511 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:54,511 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:57:54,533 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:54,877 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:57:54,878 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:54,878 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:57:54,878 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:57:54,879 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:54,879 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:54,881 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:54,881 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:54,882 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:57:54,882 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:54,883 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:54,883 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:57:54,884 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:54,884 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:54,885 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:54,886 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:54,887 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:57:54,887 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:54,887 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:57:54,887 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:57:54,888 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:57:54,889 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:57:55,275 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:55,276 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:55,277 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:57:55,278 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:55,688 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:57:55,689 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:55,690 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:57:55,691 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:57:55,692 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:55,694 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:55,696 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:55,697 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:55,698 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:55,698 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:57:55,699 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:55,700 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:57:55,700 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:55,702 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:55,703 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:55,704 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:55,704 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:55,705 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:57:55,705 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:57:55,706 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:57:55,707 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:57:55,721 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:57:56,131 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:56,132 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:56,132 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:57:56,157 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:56,535 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:57:56,536 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:56,536 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:57:56,537 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:57:56,537 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:56,538 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:56,539 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:56,540 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:56,540 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:56,541 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:57:56,541 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:56,542 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:57:56,543 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:56,544 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:56,544 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:56,545 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:56,545 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:57:56,546 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:56,546 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:57:56,546 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:57:56,547 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:57:56,750 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:57:56,751 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:57:56,752 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:57:56,752 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:57:56,753 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:57:56,753 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:57:56,754 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:57:57,145 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:57,146 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:57,147 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:57:57,148 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:57,564 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:57:57,565 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:57,566 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:57:57,567 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:57:57,567 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:57,569 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:57,570 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:57,570 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:57,571 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:57:57,572 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:57,572 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:57,572 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:57:57,573 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:57,574 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:57:57,575 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:57:57,575 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:57:57,576 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:57:57,576 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:57:57,576 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:57:57,577 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:57:57,577 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:57:57,578 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:57:57,955 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:57,956 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:57,956 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:57:57,957 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:58,311 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:57:58,312 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:58,312 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:57:58,313 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:57:58,313 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:58,315 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:58,315 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:58,316 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:58,317 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:57:58,317 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:58,318 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:58,318 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:57:58,319 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:57:58,320 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:57:58,321 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:57:58,322 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:57:58,322 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:57:58,323 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:57:58,324 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:57:58,324 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:57:58,324 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:57:58,325 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:57:58,714 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:58,715 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:58,716 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:57:58,716 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:59,084 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:57:59,085 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:59,085 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:57:59,085 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:57:59,086 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:59,087 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:59,088 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:59,089 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:59,090 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:57:59,091 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:59,091 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:57:59,091 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:57:59,092 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:57:59,093 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:57:59,094 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:57:59,095 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:57:59,095 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:57:59,095 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:57:59,096 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:57:59,096 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:57:59,096 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:57:59,293 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:57:59,293 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:57:59,293 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:57:59,294 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:57:59,294 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:57:59,295 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:57:59,296 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:57:59,679 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:57:59,680 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:57:59,681 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:57:59,701 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:00,075 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:58:00,075 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:00,077 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:58:00,077 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:58:00,077 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:00,077 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:58:00,078 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:58:00,080 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:58:00,080 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:58:00,080 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:58:00,081 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:00,082 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:58:00,082 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:00,083 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:58:00,083 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:58:00,084 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:58:00,084 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:58:00,085 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:58:00,085 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:58:00,085 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:58:00,086 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:58:00,086 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:58:00,439 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:00,440 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:00,441 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:58:00,442 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:00,782 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:58:00,782 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:00,784 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:58:00,784 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:58:00,784 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:00,785 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:58:00,786 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:58:00,787 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:58:00,787 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:58:00,788 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:58:00,788 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:00,789 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:58:00,789 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:00,790 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:58:00,791 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:58:00,791 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:58:00,792 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:58:00,792 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:58:00,792 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:58:00,793 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:58:00,793 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:58:00,794 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:58:01,150 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:01,151 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:01,151 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:58:01,152 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:01,513 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:58:01,514 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:01,515 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:58:01,515 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:58:01,517 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:01,517 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:58:01,518 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:58:01,519 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:58:01,520 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:58:01,520 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:58:01,520 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:01,521 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:58:01,521 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:01,521 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:58:01,523 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:58:01,523 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:58:01,524 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:58:01,524 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:58:01,524 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:58:01,525 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:58:01,525 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:58:01,730 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:58:01,731 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:58:01,731 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:58:01,732 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:58:01,733 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:58:01,733 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:58:01,734 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:58:02,107 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:02,108 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:02,108 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:58:02,109 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:02,444 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:58:02,446 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:02,446 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:58:02,446 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:58:02,447 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:02,448 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:58:02,448 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:58:02,449 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:58:02,449 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:58:02,450 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:58:02,450 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:02,451 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:58:02,451 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:02,452 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:58:02,453 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:58:02,453 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:58:02,454 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:58:02,454 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:58:02,454 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:58:02,454 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:58:02,455 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:58:02,456 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:58:02,800 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:02,800 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:02,801 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:58:02,801 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:03,171 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:58:03,172 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:03,173 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:58:03,174 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:58:03,174 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:03,175 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:58:03,176 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:58:03,176 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:58:03,176 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:58:03,177 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:58:03,178 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:03,178 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:58:03,179 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:03,179 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:58:03,180 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:58:03,181 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:58:03,181 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:58:03,181 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:58:03,182 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:58:03,183 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:58:03,183 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:58:03,184 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:58:03,572 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:03,573 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:03,573 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:58:03,575 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:03,929 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:58:03,930 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:03,931 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:58:03,932 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:58:03,932 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:03,933 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:58:03,935 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:58:03,935 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:58:03,936 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:58:03,936 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:58:03,936 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:03,937 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:58:03,937 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:03,938 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:58:03,939 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:58:03,939 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:58:03,940 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:58:03,940 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:58:03,940 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:58:03,941 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:58:03,941 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:58:04,144 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:58:04,144 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:58:04,145 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:58:04,145 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:58:04,146 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:58:04,146 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:58:04,147 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:58:04,573 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:04,574 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:04,575 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:58:04,594 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:05,007 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:58:05,010 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:05,011 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:58:05,012 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:58:05,013 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:05,014 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:58:05,015 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:58:05,016 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:58:05,016 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:58:05,017 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:58:05,018 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:05,018 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:58:05,019 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:05,020 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:58:05,021 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:58:05,022 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:58:05,022 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:58:05,022 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:58:05,022 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:58:05,023 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:58:05,023 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:58:05,024 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:58:05,467 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:05,468 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:05,468 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:58:05,470 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:05,868 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:58:05,869 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:05,869 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:58:05,869 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:58:05,870 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:05,871 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:58:05,872 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:58:05,873 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:58:05,874 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:58:05,874 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:58:05,875 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:05,875 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:58:05,875 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:05,876 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:58:05,877 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:58:05,878 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:58:05,878 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:58:05,878 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:58:05,879 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:58:05,879 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:58:05,879 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:58:05,880 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:58:06,249 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:06,251 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:06,251 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:58:06,252 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:06,594 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:58:06,596 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:06,596 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:58:06,597 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:58:06,597 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:06,599 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:58:06,600 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:58:06,600 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:58:06,601 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:58:06,601 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:06,601 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:58:06,601 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:58:06,602 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:06,603 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:58:06,604 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:58:06,605 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:58:06,605 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:58:06,606 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:58:06,606 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:58:06,606 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:58:06,606 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:58:06,803 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:58:06,803 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:58:06,804 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:58:06,804 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:58:06,805 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:58:06,805 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:58:06,806 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:58:07,152 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:07,152 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:07,153 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:58:07,153 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:07,468 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:58:07,468 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:07,469 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:58:07,470 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:58:07,470 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:07,472 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:58:07,473 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:58:07,473 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:58:07,473 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:58:07,474 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:58:07,474 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:07,475 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:58:07,475 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:07,476 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:58:07,477 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:58:07,477 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:58:07,477 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:58:07,478 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:58:07,478 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:58:07,478 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:58:07,478 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:58:07,496 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:58:07,892 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:07,893 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:07,894 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:58:07,916 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:08,272 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:58:08,274 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:08,275 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:58:08,276 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:58:08,276 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:08,278 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:58:08,279 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:58:08,280 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:58:08,280 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:58:08,280 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:58:08,281 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:08,281 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:58:08,282 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:08,283 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:58:08,284 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:58:08,284 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:58:08,285 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:58:08,285 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:58:08,285 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:58:08,286 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:58:08,286 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:58:08,305 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:58:08,669 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:08,670 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:08,670 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:58:08,694 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:09,051 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:58:09,051 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:09,052 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:58:09,053 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:58:09,053 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:09,054 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:58:09,055 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:58:09,056 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:58:09,056 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:58:09,057 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:58:09,058 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:09,058 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:58:09,059 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:09,059 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:58:09,060 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:58:09,061 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:58:09,061 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:58:09,062 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:58:09,062 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:58:09,062 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:58:09,063 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:58:09,266 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:58:09,270 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:58:09,270 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:58:09,272 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:58:09,272 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:58:09,272 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:58:09,273 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:58:09,624 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:09,625 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:09,625 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:58:09,627 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:09,963 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:58:09,964 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:09,965 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:58:09,966 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:58:09,967 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:09,967 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:58:09,968 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:58:09,968 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:58:09,969 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:58:09,970 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:58:09,970 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:09,971 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:58:09,971 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:09,972 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:58:09,973 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:58:09,973 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:58:09,974 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:58:09,974 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:58:09,974 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:58:09,975 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:58:09,975 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:58:09,976 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:58:10,330 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:10,331 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:10,331 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:58:10,333 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:10,691 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:58:10,693 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:10,693 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:58:10,694 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:58:10,695 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:10,696 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:58:10,697 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:58:10,698 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:58:10,699 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:58:10,699 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:58:10,699 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:10,700 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:58:10,700 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:10,701 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:58:10,702 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:58:10,703 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:58:10,703 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:58:10,703 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:58:10,704 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:58:10,704 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:58:10,704 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:58:10,727 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:58:11,056 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:11,057 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:11,057 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:58:11,069 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:11,387 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:58:11,388 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:11,389 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:58:11,390 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:58:11,390 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:11,392 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:58:11,393 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:58:11,393 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:58:11,394 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:58:11,394 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:58:11,395 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:11,395 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:58:11,396 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:11,397 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:58:11,398 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:58:11,398 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:58:11,399 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:58:11,399 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:58:11,400 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:58:11,400 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:58:11,400 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:58:11,596 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:58:11,597 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:58:11,597 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:58:11,598 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:58:11,598 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:58:11,599 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:58:11,600 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:58:11,951 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:11,952 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:11,952 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:58:11,968 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:12,294 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:58:12,295 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:12,295 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:58:12,296 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:58:12,296 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:12,298 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:58:12,298 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:58:12,298 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:58:12,300 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:58:12,300 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:58:12,301 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:12,301 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:58:12,302 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:12,303 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:58:12,304 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:58:12,304 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:58:12,305 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:58:12,305 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:58:12,305 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:58:12,306 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:58:12,306 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:58:12,307 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:58:12,671 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:12,672 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:12,673 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:58:12,674 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:13,086 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:58:13,087 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:13,087 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:58:13,089 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:58:13,090 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:13,091 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:58:13,092 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:58:13,093 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:58:13,093 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:58:13,093 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:58:13,094 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:13,095 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:58:13,095 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:13,097 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:58:13,098 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:58:13,098 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:58:13,099 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:58:13,099 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:58:13,100 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:58:13,100 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:58:13,101 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:58:13,102 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:58:13,518 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:13,520 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:13,520 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:58:13,522 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:13,912 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:58:13,914 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:13,915 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:58:13,915 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:58:13,915 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:13,916 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:58:13,918 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:58:13,919 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:58:13,919 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:58:13,919 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:58:13,920 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:13,921 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:58:13,921 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:13,922 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:58:13,923 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:58:13,924 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:58:13,925 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:58:13,925 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:58:13,926 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:58:13,926 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:58:13,926 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:58:14,126 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:58:14,126 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:58:14,127 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:58:14,127 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:58:14,128 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:58:14,128 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:58:14,129 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:58:14,496 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:14,498 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:14,499 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:58:14,513 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:14,872 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:58:14,872 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:14,874 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:58:14,874 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:58:14,875 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:14,876 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:58:14,877 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:58:14,878 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:58:14,878 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:58:14,879 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:58:14,879 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:14,880 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:58:14,880 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:14,881 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:58:14,883 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:58:14,884 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:58:14,884 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:58:14,884 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:58:14,885 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:58:14,885 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:58:14,886 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:58:14,887 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:58:15,287 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:15,288 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:15,289 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:58:15,307 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:15,734 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:58:15,736 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:15,737 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:58:15,738 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:58:15,738 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:15,740 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:58:15,742 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:58:15,743 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:58:15,744 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:58:15,744 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:58:15,745 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:15,745 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:58:15,746 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:15,748 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:58:15,749 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:58:15,750 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:58:15,750 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:58:15,751 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:58:15,751 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:58:15,752 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:58:15,752 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:58:15,769 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:58:16,150 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:16,150 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:16,151 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:58:16,151 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:16,516 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:58:16,517 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:16,518 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:58:16,518 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:58:16,518 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:16,520 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:58:16,521 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:58:16,522 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:58:16,522 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:58:16,522 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:58:16,523 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:16,524 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:58:16,524 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:16,525 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:58:16,526 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:58:16,527 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:58:16,527 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:58:16,527 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:58:16,527 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:58:16,528 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:58:16,528 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:58:16,730 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:58:16,731 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:58:16,732 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:58:16,732 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:58:16,733 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:58:16,733 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:58:16,734 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:58:17,095 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:17,096 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:17,096 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:58:17,097 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:17,438 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:58:17,439 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:17,439 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:58:17,440 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:58:17,440 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:17,442 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:58:17,442 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:58:17,443 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:58:17,443 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:58:17,443 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:58:17,443 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:17,443 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:58:17,445 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:17,448 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:58:17,449 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:58:17,449 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:58:17,450 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:58:17,450 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:58:17,450 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:58:17,450 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:58:17,451 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:58:17,476 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:58:17,826 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:17,827 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:17,828 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:58:17,849 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:18,188 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:58:18,189 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:18,190 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:58:18,190 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:58:18,191 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:18,193 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:58:18,194 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:58:18,195 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:58:18,196 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:58:18,196 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:58:18,196 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:18,197 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:58:18,197 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:18,198 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:58:18,199 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:58:18,200 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:58:18,200 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:58:18,200 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:58:18,201 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:58:18,201 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:58:18,202 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:58:18,202 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:58:18,571 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:18,573 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:18,573 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:58:18,574 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:18,935 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:58:18,936 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:18,937 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:58:18,937 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:58:18,938 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:18,938 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:58:18,939 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:58:18,940 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:58:18,940 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:58:18,941 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:58:18,941 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:18,942 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:58:18,942 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:18,943 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:58:18,944 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:58:18,945 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:58:18,945 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:58:18,945 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:58:18,946 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:58:18,946 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:58:18,947 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:58:19,155 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:58:19,155 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:58:19,155 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:58:19,156 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:58:19,156 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:58:19,157 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:58:19,158 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:58:19,499 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:19,499 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:19,499 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:58:19,501 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:19,849 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:58:19,850 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:19,850 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:58:19,851 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:58:19,852 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:19,854 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:58:19,856 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:58:19,857 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:58:19,857 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:58:19,858 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:58:19,858 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:19,858 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:58:19,859 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:19,860 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:58:19,861 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:58:19,861 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:58:19,862 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:58:19,862 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:58:19,862 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:58:19,863 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:58:19,863 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:58:19,864 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:58:20,275 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:20,276 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:20,276 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:58:20,278 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:20,618 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:58:20,619 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:20,619 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:58:20,620 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:58:20,620 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:20,620 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:58:20,623 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:58:20,624 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:58:20,624 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:58:20,625 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:58:20,625 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:20,626 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:58:20,626 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:20,627 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:58:20,628 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:58:20,628 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:58:20,629 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:58:20,629 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:58:20,630 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:58:20,630 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:58:20,631 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:58:20,632 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:58:20,996 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:20,997 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:20,997 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:58:20,998 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:21,330 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:58:21,330 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:21,331 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:58:21,331 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:58:21,331 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:21,333 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:58:21,334 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:58:21,335 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:58:21,335 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:58:21,336 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:58:21,336 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:21,337 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:58:21,337 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:21,338 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:58:21,339 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:58:21,340 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:58:21,340 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:58:21,340 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:58:21,340 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:58:21,341 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:58:21,341 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:58:21,545 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:58:21,546 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:58:21,546 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:58:21,546 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:58:21,546 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:58:21,547 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:58:21,547 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:58:21,874 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:21,875 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:21,876 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:58:21,877 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:22,245 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:58:22,246 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:22,247 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:58:22,247 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:58:22,247 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:22,249 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:58:22,250 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:58:22,250 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:58:22,251 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:58:22,251 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:58:22,251 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:22,252 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:58:22,252 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:22,253 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:58:22,254 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:58:22,254 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:58:22,255 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:58:22,255 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:58:22,255 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:58:22,256 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:58:22,256 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:58:22,257 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:58:22,583 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:22,583 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:22,584 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:58:22,585 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:22,922 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:58:22,923 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:22,924 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:58:22,925 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:58:22,925 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:22,927 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:58:22,929 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:58:22,930 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:58:22,930 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:58:22,931 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:58:22,932 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:22,932 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:58:22,933 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:22,933 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:58:22,934 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:58:22,935 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:58:22,935 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:58:22,936 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:58:22,936 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:58:22,936 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:58:22,937 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:58:22,960 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:58:23,329 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:23,330 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:23,331 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:58:23,332 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:23,669 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:58:23,670 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:23,670 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:58:23,671 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:58:23,671 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:23,672 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:58:23,673 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:58:23,674 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:58:23,674 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:58:23,674 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:58:23,675 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:23,675 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:58:23,676 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:23,676 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:58:23,677 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:58:23,678 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:58:23,678 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:58:23,678 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:58:23,678 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:58:23,679 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:58:23,680 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:58:23,881 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:58:23,882 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:58:23,882 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:58:23,882 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:58:23,883 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:58:23,883 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:58:23,885 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:58:24,215 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:24,217 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:24,217 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:58:24,236 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:24,595 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:58:24,595 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:24,595 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:58:24,596 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:58:24,596 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:24,597 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:58:24,599 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:58:24,599 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:58:24,600 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:58:24,600 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:58:24,600 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:24,601 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:58:24,601 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:24,602 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:58:24,603 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:58:24,603 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:58:24,603 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:58:24,604 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:58:24,604 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:58:24,604 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:58:24,604 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:58:24,624 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:58:24,960 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:24,961 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:24,961 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:58:24,964 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:25,318 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:58:25,320 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:25,321 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:58:25,321 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:58:25,321 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:25,322 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:58:25,323 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:58:25,326 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:58:25,326 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:58:25,326 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:58:25,327 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:25,327 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:58:25,328 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:25,329 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:58:25,330 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:58:25,330 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:58:25,331 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:58:25,331 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:58:25,331 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:58:25,332 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:58:25,332 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:58:25,333 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:58:25,734 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:25,735 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:25,736 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:58:25,736 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:26,062 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:58:26,063 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:26,064 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:58:26,064 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:58:26,065 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:26,066 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:58:26,066 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:58:26,067 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:58:26,068 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:58:26,068 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:58:26,069 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:26,069 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:58:26,070 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:26,071 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:58:26,071 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:58:26,072 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:58:26,072 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:58:26,072 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:58:26,073 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:58:26,074 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:58:26,074 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:58:26,281 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:58:26,282 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:58:26,282 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:58:26,283 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:58:26,283 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:58:26,283 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:58:26,285 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:58:26,655 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:26,656 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:26,656 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:58:26,658 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:26,988 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:58:26,989 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:26,989 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:58:26,989 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:58:26,990 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:26,990 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:58:26,992 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:58:26,993 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:58:26,993 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:58:26,994 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:58:26,994 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:26,995 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:58:26,995 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:26,997 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:58:26,998 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:58:26,998 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:58:26,998 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:58:26,999 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:58:26,999 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:58:26,999 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:58:27,000 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:58:27,001 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:58:27,342 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:27,343 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:27,344 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:58:27,356 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:27,690 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:58:27,690 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:27,691 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:58:27,691 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:58:27,692 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:27,692 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:58:27,693 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:58:27,693 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:58:27,696 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:58:27,696 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:58:27,696 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:27,697 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:58:27,697 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:27,698 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:58:27,699 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:58:27,699 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:58:27,700 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:58:27,700 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:58:27,700 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:58:27,701 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:58:27,701 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:58:27,702 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:58:28,077 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:28,079 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:28,079 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:58:28,080 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:28,482 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:58:28,483 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:28,484 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:58:28,485 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:58:28,485 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:28,486 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:58:28,487 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:58:28,489 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:58:28,490 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:58:28,490 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:58:28,492 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:28,492 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:58:28,492 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:28,494 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:58:28,495 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:58:28,496 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:58:28,497 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:58:28,498 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:58:28,498 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:58:28,499 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:58:28,499 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:58:28,700 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:58:28,701 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:58:28,701 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:58:28,702 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:58:28,702 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:58:28,703 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:58:28,704 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:58:29,414 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:29,415 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:29,416 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:58:29,416 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:29,817 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:58:29,819 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:29,819 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:58:29,820 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:58:29,821 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:29,822 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:58:29,823 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:58:29,823 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:58:29,823 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:58:29,824 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:58:29,825 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:29,825 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:58:29,826 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:29,828 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:58:29,829 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:58:29,830 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:58:29,831 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:58:29,831 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:58:29,832 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:58:29,832 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:58:29,832 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:58:29,833 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:58:30,281 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:30,282 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:30,283 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:58:30,304 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:30,725 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:58:30,726 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:30,726 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:58:30,727 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:58:30,727 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:30,729 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:58:30,729 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:58:30,730 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:58:30,731 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:58:30,731 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:58:30,732 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:30,733 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:58:30,733 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:30,734 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:58:30,735 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:58:30,736 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:58:30,737 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:58:30,737 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:58:30,737 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:58:30,738 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:58:30,738 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:58:30,739 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:58:31,157 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:31,158 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:31,158 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:58:31,159 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:31,543 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:58:31,545 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:31,545 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:58:31,546 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:58:31,547 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:31,548 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:58:31,549 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:58:31,549 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:58:31,550 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:58:31,551 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:58:31,551 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:31,551 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:58:31,552 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:31,553 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:58:31,555 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:58:31,555 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:58:31,556 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:58:31,556 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:58:31,556 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:58:31,556 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:58:31,557 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:58:31,763 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:58:31,763 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:58:31,764 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:58:31,764 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:58:31,765 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:58:31,765 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:58:31,766 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:58:32,114 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:32,115 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:32,116 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:58:32,137 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:32,448 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:58:32,449 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:32,449 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:58:32,449 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:58:32,449 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:32,451 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:58:32,452 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:58:32,453 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:58:32,453 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:58:32,454 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:58:32,454 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:32,455 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:58:32,455 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:32,456 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:58:32,457 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:58:32,457 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:58:32,457 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:58:32,458 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:58:32,458 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:58:32,458 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:58:32,459 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:58:32,459 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:58:32,827 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:32,828 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:32,829 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:58:32,829 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:33,201 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:58:33,203 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:33,204 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:58:33,204 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:58:33,206 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:33,207 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:58:33,208 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:58:33,209 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:58:33,210 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:58:33,210 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:58:33,210 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:33,211 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:58:33,211 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:33,212 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:58:33,214 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:58:33,214 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:58:33,215 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:58:33,215 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:58:33,216 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:58:33,216 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:58:33,216 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:58:33,236 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:58:33,616 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:33,617 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:33,617 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:58:33,618 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:33,969 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:58:33,971 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:33,971 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:58:33,972 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:58:33,972 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:33,973 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:58:33,974 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:58:33,975 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:58:33,976 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:58:33,976 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:58:33,976 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:33,977 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:58:33,978 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:33,979 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:58:33,980 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:58:33,981 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:58:33,981 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:58:33,981 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:58:33,982 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:58:33,982 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:58:33,982 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:58:34,186 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:58:34,187 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:58:34,188 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:58:34,188 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:58:34,189 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:58:34,189 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:58:34,191 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:58:34,577 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:34,579 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:34,579 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:58:34,580 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:34,940 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:58:34,941 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:34,942 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:58:34,943 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:58:34,943 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:34,944 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:58:34,945 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:58:34,945 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:58:34,945 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:58:34,947 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:58:34,947 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:34,948 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:58:34,948 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:34,949 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:58:34,950 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:58:34,951 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:58:34,952 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:58:34,952 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:58:34,952 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:58:34,952 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:58:34,953 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:58:34,964 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:58:35,324 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:35,325 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:35,325 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:58:35,326 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:35,654 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:58:35,654 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:35,655 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:58:35,655 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:58:35,656 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:35,657 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:58:35,657 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:58:35,659 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:58:35,659 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:58:35,659 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:58:35,661 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:35,661 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:58:35,662 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:35,663 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:58:35,664 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:58:35,664 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:58:35,665 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:58:35,665 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:58:35,665 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:58:35,666 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:58:35,666 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:58:35,667 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:58:36,044 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:36,045 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:36,045 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:58:36,046 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:36,377 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:58:36,377 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:36,378 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:58:36,378 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:58:36,379 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:36,380 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:58:36,380 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:58:36,382 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:58:36,382 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:58:36,382 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:58:36,383 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:36,383 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:58:36,384 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:36,384 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:58:36,385 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:58:36,386 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:58:36,386 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:58:36,386 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:58:36,387 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:58:36,387 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:58:36,387 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:58:36,586 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:58:36,586 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:58:36,587 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:58:36,588 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:58:36,589 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:58:36,589 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:58:36,591 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:58:36,946 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:36,947 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:36,947 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:58:36,948 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:37,278 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:58:37,279 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:37,279 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:58:37,279 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:58:37,280 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:37,281 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:58:37,282 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:58:37,282 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:58:37,282 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:58:37,283 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:58:37,283 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:37,283 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:58:37,284 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:37,285 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:58:37,285 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:58:37,286 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:58:37,286 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:58:37,286 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:58:37,287 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:58:37,287 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:58:37,287 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:58:37,288 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:58:37,650 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:37,650 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:37,651 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:58:37,651 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:37,981 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:58:37,983 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:37,983 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:58:37,984 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:58:37,984 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:37,986 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:58:37,986 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:58:37,988 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:58:37,988 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:58:37,989 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:58:37,989 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:37,990 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:58:37,990 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:37,991 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:58:37,992 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:58:37,992 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:58:37,992 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:58:37,993 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:58:37,993 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:58:37,994 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:58:37,994 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:58:37,995 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:58:38,354 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:38,354 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:38,356 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:58:38,372 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:38,701 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:58:38,702 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:38,702 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:58:38,703 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:58:38,703 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:38,704 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:58:38,705 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:58:38,706 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:58:38,706 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:58:38,706 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:58:38,706 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:38,707 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:58:38,707 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:38,708 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:58:38,709 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:58:38,709 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:58:38,710 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:58:38,710 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:58:38,710 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:58:38,711 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:58:38,711 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:58:38,914 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:58:38,914 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:58:38,915 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:58:38,916 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:58:38,916 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:58:38,916 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:58:38,917 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:58:39,286 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:39,287 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:39,287 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:58:39,302 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:39,662 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:58:39,664 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:39,665 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:58:39,665 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:58:39,665 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:39,666 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:58:39,666 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:58:39,667 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:58:39,668 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:58:39,668 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:58:39,668 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:39,669 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:58:39,669 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:39,670 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:58:39,671 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:58:39,671 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:58:39,672 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:58:39,672 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:58:39,673 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:58:39,673 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:58:39,673 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:58:39,690 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:58:40,023 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:40,024 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:40,024 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:58:40,026 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:40,365 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:58:40,365 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:40,366 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:58:40,367 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:58:40,367 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:40,368 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:58:40,369 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:58:40,370 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:58:40,371 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:58:40,371 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:58:40,371 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:40,372 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:58:40,372 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:40,373 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:58:40,374 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:58:40,374 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:58:40,375 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:58:40,375 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:58:40,375 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:58:40,376 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:58:40,376 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:58:40,390 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:58:40,749 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:40,750 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:40,751 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:58:40,751 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:41,147 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:58:41,148 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:41,149 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:58:41,149 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:58:41,150 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:41,150 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:58:41,151 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:58:41,152 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:58:41,153 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:58:41,153 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:58:41,154 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:41,154 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:58:41,154 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:41,155 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:58:41,156 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:58:41,156 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:58:41,157 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:58:41,157 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:58:41,158 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:58:41,158 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:58:41,159 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:58:41,360 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:58:41,361 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:58:41,361 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:58:41,361 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:58:41,362 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:58:41,362 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:58:41,363 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:58:41,741 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:41,741 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:41,742 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:58:41,743 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:42,156 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:58:42,158 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:42,158 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:58:42,159 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:58:42,160 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:42,161 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:58:42,162 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:58:42,164 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:58:42,164 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:58:42,164 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:58:42,165 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:42,166 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:58:42,166 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:42,167 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:58:42,168 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:58:42,168 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:58:42,169 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:58:42,169 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:58:42,169 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:58:42,170 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:58:42,171 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:58:42,189 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:58:42,598 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:42,599 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:42,599 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:58:42,601 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:43,018 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:58:43,019 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:43,020 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:58:43,021 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:58:43,021 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:43,022 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:58:43,024 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:58:43,024 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:58:43,025 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:58:43,025 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:58:43,027 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:43,027 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:58:43,028 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:43,029 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:58:43,030 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:58:43,031 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:58:43,031 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:58:43,032 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:58:43,032 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:58:43,033 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:58:43,033 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:58:43,035 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:58:43,500 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:43,501 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:43,502 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:58:43,503 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:43,905 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:58:43,905 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:43,906 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:58:43,907 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:58:43,908 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:43,909 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:58:43,910 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:58:43,911 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:58:43,911 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:58:43,911 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:58:43,911 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:43,911 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:58:43,913 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:43,914 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:58:43,915 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:58:43,916 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:58:43,916 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:58:43,916 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:58:43,917 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:58:43,917 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:58:43,917 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:58:44,113 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:58:44,114 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:58:44,114 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:58:44,115 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:58:44,115 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:58:44,116 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:58:44,116 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:58:44,516 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:44,518 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:44,518 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:58:44,529 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:44,916 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:58:44,917 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:44,918 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:58:44,919 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:58:44,920 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:44,920 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:58:44,922 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:58:44,922 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:58:44,923 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:58:44,925 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:58:44,926 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:44,926 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:58:44,926 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:44,927 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:58:44,928 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:58:44,929 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:58:44,930 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:58:44,930 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:58:44,930 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:58:44,931 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:58:44,931 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:58:44,944 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:58:45,325 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:45,326 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:45,327 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:58:45,328 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:45,705 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:58:45,707 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:45,707 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:58:45,708 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:58:45,708 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:45,709 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:58:45,710 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:58:45,711 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:58:45,711 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:58:45,712 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:58:45,712 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:45,712 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:58:45,713 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:45,714 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:58:45,715 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:58:45,716 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:58:45,717 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:58:45,717 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:58:45,717 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:58:45,717 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:58:45,718 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:58:45,719 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:58:46,141 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:46,142 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:46,143 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:58:46,144 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:46,501 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:58:46,501 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:46,502 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:58:46,502 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:58:46,503 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:46,504 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:58:46,504 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:58:46,505 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:58:46,506 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:58:46,506 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:58:46,507 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:46,507 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:58:46,507 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:46,508 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:58:46,509 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:58:46,510 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:58:46,510 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:58:46,510 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:58:46,511 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:58:46,511 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:58:46,511 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:58:46,712 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:58:46,713 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:58:46,714 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:58:46,714 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:58:46,715 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:58:46,715 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:58:46,716 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:58:47,058 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:47,059 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:47,059 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:58:47,060 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:47,409 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:58:47,411 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:47,412 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:58:47,412 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:58:47,413 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:47,414 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:58:47,415 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:58:47,416 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:58:47,416 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:58:47,416 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:58:47,417 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:47,417 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:58:47,418 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:47,418 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:58:47,419 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:58:47,420 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:58:47,421 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:58:47,421 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:58:47,421 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:58:47,422 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:58:47,422 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:58:47,423 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:58:47,748 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:47,749 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:47,750 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:58:47,751 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:48,068 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:58:48,068 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:48,069 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:58:48,069 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:58:48,070 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:48,071 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:58:48,071 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:58:48,072 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:58:48,073 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:58:48,074 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:48,074 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:58:48,074 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:58:48,075 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:48,077 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:58:48,077 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:58:48,078 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:58:48,078 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:58:48,079 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:58:48,079 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:58:48,079 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:58:48,080 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:58:48,081 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:58:48,412 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:48,413 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:48,415 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:58:48,430 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:48,744 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:58:48,745 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:48,745 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:58:48,746 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:58:48,747 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:48,747 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:58:48,748 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:58:48,748 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:58:48,749 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:58:48,749 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:58:48,749 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:48,751 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:58:48,751 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:48,753 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:58:48,753 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:58:48,754 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:58:48,754 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:58:48,755 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:58:48,755 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:58:48,756 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:58:48,756 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:58:48,957 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:58:48,958 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:58:48,958 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:58:48,959 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:58:48,959 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:58:48,960 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:58:48,961 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:58:49,248 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:49,248 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:49,249 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:58:49,250 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:49,557 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:58:49,558 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:49,558 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:58:49,559 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:58:49,559 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:49,560 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:58:49,561 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:58:49,561 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:58:49,562 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:58:49,562 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:58:49,563 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:49,563 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:58:49,564 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:49,565 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:58:49,567 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:58:49,567 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:58:49,568 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:58:49,568 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:58:49,569 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:58:49,569 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:58:49,569 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:58:49,593 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:58:49,946 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:49,947 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:49,947 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:58:49,962 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:50,311 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:58:50,312 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:50,312 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:58:50,313 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:58:50,313 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:50,314 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:58:50,315 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:58:50,317 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:58:50,318 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:58:50,318 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:58:50,319 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:50,319 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:58:50,320 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:50,321 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:58:50,321 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:58:50,322 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:58:50,322 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:58:50,323 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:58:50,323 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:58:50,323 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:58:50,324 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:58:50,325 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:58:50,617 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:50,618 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:50,618 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:58:50,643 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:50,978 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:58:50,979 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:50,981 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:58:50,981 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:58:50,981 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:50,983 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:58:50,984 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:58:50,984 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:58:50,985 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:58:50,986 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:58:50,986 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:50,986 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:58:50,987 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:50,988 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:58:50,989 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:58:50,989 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:58:50,990 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:58:50,990 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:58:50,990 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:58:50,991 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:58:50,991 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:58:51,190 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:58:51,190 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:58:51,190 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:58:51,190 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:58:51,192 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:58:51,192 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:58:51,193 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:58:51,459 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:51,459 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:51,460 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:58:51,483 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:51,812 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:58:51,813 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:51,813 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:58:51,814 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:58:51,814 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:51,815 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:58:51,815 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:58:51,816 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:58:51,817 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:58:51,817 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:58:51,818 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:51,818 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:58:51,818 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:51,819 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:58:51,821 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:58:51,821 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:58:51,821 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:58:51,822 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:58:51,822 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:58:51,822 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:58:51,823 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:58:51,823 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:58:52,139 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:52,140 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:52,140 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:58:52,165 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:52,501 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:58:52,502 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:52,503 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:58:52,503 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:58:52,503 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:52,505 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:58:52,507 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:58:52,508 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:58:52,508 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:58:52,509 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:58:52,509 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:52,510 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:58:52,510 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:52,511 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:58:52,512 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:58:52,513 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:58:52,513 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:58:52,514 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:58:52,514 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:58:52,515 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:58:52,515 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:58:52,516 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:58:52,988 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:52,989 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:52,990 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:58:53,012 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:53,367 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:58:53,367 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:53,368 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:58:53,369 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:58:53,369 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:53,370 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:58:53,370 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:58:53,371 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:58:53,371 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:58:53,372 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:58:53,372 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:53,373 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:58:53,373 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:53,375 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:58:53,375 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:58:53,376 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:58:53,376 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:58:53,377 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:58:53,377 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:58:53,377 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:58:53,378 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:58:53,572 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:58:53,573 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:58:53,574 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:58:53,574 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:58:53,574 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:58:53,575 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:58:53,575 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:58:53,892 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:53,893 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:53,893 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:58:53,895 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:54,293 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:58:54,294 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:54,294 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:58:54,295 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:58:54,295 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:54,297 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:58:54,299 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:58:54,300 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:58:54,302 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:58:54,303 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:58:54,305 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:54,306 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:58:54,307 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:54,310 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:58:54,312 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:58:54,313 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:58:54,314 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:58:54,316 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:58:54,318 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:58:54,318 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:58:54,319 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:58:54,321 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:58:54,957 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:54,957 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:54,959 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:58:54,961 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:55,709 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:58:55,710 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:55,711 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:58:55,711 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:58:55,712 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:55,715 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:58:55,717 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:58:55,718 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:58:55,719 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:58:55,720 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:58:55,721 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:55,721 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:58:55,722 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:55,724 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:58:55,725 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:58:55,726 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:58:55,726 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:58:55,727 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:58:55,727 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:58:55,728 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:58:55,729 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:58:55,730 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:58:56,307 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:56,308 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:56,309 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:58:56,320 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:56,581 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:58:56,582 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:56,582 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:58:56,583 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:58:56,584 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:56,585 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:58:56,585 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:58:56,586 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:58:56,586 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:58:56,587 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:58:56,587 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:56,587 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:58:56,588 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:56,588 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:58:56,589 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:58:56,590 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:58:56,591 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:58:56,591 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:58:56,591 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:58:56,591 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:58:56,592 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:58:56,797 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:58:56,797 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:58:56,797 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:58:56,798 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:58:56,798 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:58:56,798 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:58:56,799 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:58:57,055 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:57,056 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:57,057 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:58:57,075 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:57,327 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:58:57,328 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:57,328 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:58:57,328 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:58:57,330 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:57,331 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:58:57,331 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:58:57,332 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:58:57,333 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:58:57,333 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:58:57,334 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:57,334 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:58:57,335 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:57,336 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:58:57,337 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:58:57,338 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:58:57,338 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:58:57,339 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:58:57,339 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:58:57,339 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:58:57,340 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:58:57,354 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:58:57,620 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:57,621 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:57,621 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:58:57,621 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:58,008 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:58:58,010 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:58,010 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:58:58,011 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:58:58,011 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:58,013 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:58:58,014 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:58:58,016 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:58:58,016 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:58:58,017 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:58:58,018 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:58,018 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:58:58,018 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:58:58,020 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:58:58,021 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:58:58,021 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:58:58,022 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:58:58,023 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:58:58,023 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:58:58,024 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:58:58,024 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:58:58,025 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:58:58,373 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:58,374 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:58,374 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:58:58,375 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:58,757 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:58:58,757 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:58,758 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:58:58,758 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:58:58,758 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:58,760 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:58:58,761 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:58:58,761 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:58:58,761 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:58:58,764 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:58:58,764 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:58,765 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:58:58,766 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:58:58,768 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:58:58,769 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:58:58,770 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:58:58,771 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:58:58,771 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:58:58,772 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:58:58,773 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:58:58,775 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:58:58,989 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:58:58,990 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:58:58,991 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:58:58,991 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:58:58,992 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:58:58,992 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:58:59,005 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:58:59,398 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:58:59,399 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:59,400 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:58:59,401 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:59,733 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:58:59,734 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:59,735 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:58:59,735 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:58:59,736 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:59,737 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:58:59,738 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:58:59,738 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:58:59,739 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:58:59,740 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:58:59,740 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:58:59,741 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:58:59,741 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:58:59,742 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:58:59,743 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:58:59,743 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:58:59,743 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:58:59,744 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:58:59,744 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:58:59,744 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:58:59,745 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:58:59,745 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:59:00,053 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:00,054 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:00,054 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:59:00,057 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:00,353 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:59:00,354 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:00,355 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:59:00,356 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:59:00,356 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:00,357 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:00,358 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:00,359 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:00,359 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:59:00,360 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:00,360 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:00,361 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:59:00,361 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:00,362 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:00,363 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:00,363 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:00,364 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:00,364 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:59:00,364 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:59:00,365 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:59:00,365 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:59:00,387 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:59:00,706 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:00,707 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:00,707 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:59:00,708 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:00,983 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:59:00,984 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:00,985 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:59:00,986 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:59:00,986 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:00,988 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:00,988 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:00,989 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:00,990 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:00,990 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:59:00,991 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:00,992 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:59:00,992 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:00,993 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:00,994 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:00,994 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:00,995 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:00,995 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:59:00,995 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:59:00,996 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:59:00,996 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:59:01,195 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:59:01,196 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:59:01,196 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:59:01,196 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:59:01,196 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:59:01,198 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:59:01,199 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:59:01,472 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:01,473 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:01,474 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:59:01,491 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:01,779 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:59:01,780 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:01,781 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:59:01,782 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:59:01,782 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:01,784 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:01,786 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:01,787 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:01,788 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:01,788 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:59:01,789 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:01,790 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:59:01,791 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:01,792 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:01,793 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:01,794 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:01,794 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:01,795 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:59:01,796 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:59:01,796 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:59:01,797 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:59:01,798 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:59:02,152 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:02,153 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:02,154 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:59:02,154 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:02,510 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:59:02,511 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:02,512 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:59:02,513 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:59:02,513 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:02,515 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:02,516 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:02,516 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:02,517 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:59:02,517 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:02,518 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:02,519 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:59:02,519 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:02,520 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:02,521 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:02,522 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:02,522 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:59:02,522 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:02,523 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:59:02,523 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:59:02,523 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:59:02,524 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:59:02,965 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:02,966 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:02,967 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:59:02,968 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:03,374 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:59:03,375 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:03,376 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:59:03,376 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:59:03,377 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:03,378 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:03,379 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:03,380 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:03,381 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:59:03,381 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:03,382 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:03,383 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:59:03,383 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:03,384 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:03,385 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:03,386 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:03,386 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:03,387 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:59:03,387 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:59:03,387 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:59:03,388 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:59:03,593 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:59:03,594 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:59:03,594 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:59:03,594 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:59:03,594 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:59:03,595 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:59:03,608 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:59:04,004 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:04,005 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:04,005 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:59:04,006 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:04,346 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:59:04,348 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:04,349 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:59:04,349 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:59:04,349 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:04,350 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:04,351 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:04,352 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:04,353 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:59:04,353 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:04,353 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:04,354 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:59:04,354 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:04,355 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:04,356 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:04,356 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:04,357 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:59:04,357 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:04,357 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:59:04,357 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:59:04,358 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:59:04,382 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:59:04,719 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:04,719 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:04,721 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:59:04,739 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:05,058 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:59:05,058 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:05,059 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:59:05,061 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:59:05,062 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:05,063 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:05,063 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:05,064 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:05,065 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:59:05,066 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:05,066 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:05,067 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:59:05,067 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:05,068 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:05,068 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:05,069 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:05,069 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:05,069 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:59:05,070 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:59:05,070 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:59:05,070 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:59:05,071 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:59:05,463 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:05,464 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:05,464 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:59:05,480 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:05,867 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:59:05,868 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:05,868 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:59:05,870 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:59:05,870 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:05,871 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:05,872 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:05,872 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:05,873 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:05,873 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:59:05,874 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:05,874 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:59:05,874 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:05,875 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:05,876 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:05,876 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:05,877 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:05,877 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:59:05,877 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:59:05,878 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:59:05,878 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:59:06,080 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:59:06,081 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:59:06,082 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:59:06,082 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:59:06,082 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:59:06,082 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:59:06,083 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:59:06,393 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:06,394 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:06,394 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:59:06,395 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:06,723 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:59:06,725 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:06,726 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:59:06,726 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:59:06,727 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:06,729 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:06,731 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:06,732 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:06,733 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:59:06,733 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:06,733 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:06,734 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:59:06,734 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:06,734 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:06,736 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:06,737 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:06,737 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:06,737 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:59:06,738 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:59:06,738 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:59:06,738 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:59:06,739 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:59:07,121 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:07,122 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:07,123 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:59:07,140 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:07,466 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:59:07,468 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:07,469 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:59:07,469 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:59:07,469 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:07,470 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:07,471 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:07,472 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:07,472 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:59:07,473 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:07,473 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:07,473 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:59:07,474 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:07,475 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:07,475 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:07,476 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:07,476 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:59:07,476 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:07,477 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:59:07,477 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:59:07,478 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:59:07,498 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:59:07,859 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:07,860 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:07,861 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:59:07,862 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:08,182 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:59:08,182 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:08,183 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:59:08,183 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:59:08,183 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:08,184 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:08,185 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:08,186 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:08,186 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:59:08,187 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:08,187 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:08,188 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:59:08,188 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:08,189 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:08,190 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:08,190 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:08,191 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:59:08,191 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:08,191 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:59:08,191 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:59:08,191 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:59:08,397 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:59:08,398 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:59:08,399 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:59:08,399 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:59:08,400 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:59:08,400 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:59:08,401 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:59:08,724 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:08,724 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:08,726 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:59:08,726 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:09,072 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:59:09,074 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:09,074 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:59:09,076 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:59:09,077 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:09,078 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:09,079 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:09,080 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:09,081 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:59:09,081 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:09,081 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:09,082 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:59:09,082 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:09,083 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:09,085 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:09,085 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:09,086 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:59:09,086 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:09,086 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:59:09,087 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:59:09,087 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:59:09,111 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:59:09,466 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:09,467 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:09,467 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:59:09,468 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:09,820 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:59:09,821 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:09,821 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:59:09,822 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:59:09,823 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:09,824 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:09,825 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:09,826 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:09,827 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:09,827 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:59:09,828 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:09,828 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:59:09,829 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:09,830 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:09,831 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:09,832 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:09,832 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:59:09,833 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:09,833 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:59:09,834 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:59:09,834 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:59:09,835 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:59:10,302 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:10,303 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:10,303 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:59:10,304 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:10,671 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:59:10,673 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:10,673 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:59:10,673 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:59:10,674 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:10,676 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:10,678 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:10,678 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:10,679 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:10,680 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:59:10,681 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:10,681 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:59:10,681 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:10,683 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:10,684 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:10,685 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:10,685 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:59:10,685 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:10,686 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:59:10,686 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:59:10,686 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:59:10,897 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:59:10,898 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:59:10,898 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:59:10,899 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:59:10,899 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:59:10,899 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:59:10,901 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:59:11,232 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:11,233 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:11,233 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:59:11,235 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:11,597 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:59:11,598 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:11,599 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:59:11,600 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:59:11,600 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:11,602 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:11,603 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:11,604 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:11,604 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:11,604 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:59:11,605 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:11,605 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:59:11,606 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:11,607 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:11,608 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:11,608 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:11,609 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:59:11,609 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:11,609 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:59:11,610 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:59:11,610 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:59:11,611 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:59:12,003 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:12,004 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:12,004 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:59:12,005 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:12,348 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:59:12,349 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:12,349 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:59:12,349 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:59:12,350 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:12,350 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:12,351 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:12,352 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:12,353 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:59:12,353 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:12,353 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:12,353 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:59:12,354 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:12,355 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:12,357 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:12,357 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:12,358 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:59:12,358 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:12,358 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:59:12,358 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:59:12,359 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:59:12,359 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:59:12,696 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:12,698 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:12,698 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:59:12,699 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:13,050 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:59:13,051 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:13,052 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:59:13,052 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:59:13,054 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:13,055 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:13,056 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:13,057 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:13,058 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:59:13,058 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:13,058 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:13,059 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:59:13,059 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:13,060 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:13,061 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:13,062 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:13,063 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:59:13,063 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:13,063 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:59:13,064 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:59:13,064 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:59:13,262 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:59:13,262 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:59:13,262 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:59:13,264 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:59:13,264 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:59:13,264 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:59:13,266 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:59:13,609 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:13,610 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:13,610 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:59:13,611 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:13,947 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:59:13,947 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:13,948 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:59:13,948 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:59:13,949 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:13,950 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:13,950 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:13,951 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:13,952 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:59:13,952 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:13,953 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:13,953 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:59:13,953 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:13,954 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:13,955 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:13,955 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:13,956 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:59:13,956 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:13,957 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:59:13,957 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:59:13,957 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:59:13,958 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:59:14,268 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:14,269 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:14,270 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:59:14,271 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:14,577 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:59:14,577 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:14,578 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:59:14,578 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:59:14,579 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:14,580 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:14,580 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:14,581 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:14,582 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:59:14,583 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:14,583 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:14,584 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:59:14,584 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:14,585 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:14,586 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:14,587 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:14,588 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:59:14,588 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:14,588 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:59:14,589 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:59:14,589 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:59:14,590 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:59:14,926 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:14,927 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:14,927 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:59:14,928 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:15,336 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:59:15,337 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:15,337 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:59:15,338 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:59:15,339 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:15,340 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:15,342 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:15,343 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:15,343 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:15,343 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:59:15,344 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:15,345 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:59:15,345 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:15,346 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:15,346 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:15,347 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:15,348 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:15,348 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:59:15,348 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:59:15,348 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:59:15,349 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:59:15,541 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:59:15,542 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:59:15,543 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:59:15,543 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:59:15,543 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:59:15,544 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:59:15,557 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:59:15,917 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:15,917 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:15,917 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:59:15,918 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:16,232 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:59:16,232 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:16,233 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:59:16,233 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:59:16,234 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:16,235 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:16,235 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:16,237 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:16,237 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:59:16,237 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:16,238 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:16,238 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:59:16,238 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:16,239 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:16,240 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:16,241 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:16,241 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:59:16,241 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:59:16,242 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:59:16,242 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:16,242 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:59:16,244 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:59:16,563 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:16,563 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:16,564 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:59:16,565 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:16,872 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:59:16,873 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:16,874 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:59:16,874 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:59:16,875 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:16,876 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:16,878 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:16,879 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:16,880 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:59:16,880 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:16,880 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:16,880 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:59:16,882 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:16,882 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:16,883 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:16,884 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:16,884 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:59:16,884 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:59:16,884 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:16,884 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:59:16,885 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:59:16,886 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:59:17,197 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:17,198 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:17,199 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:59:17,216 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:17,520 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:59:17,521 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:17,522 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:59:17,523 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:59:17,523 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:17,525 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:17,526 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:17,528 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:17,528 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:59:17,528 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:17,528 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:17,530 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:59:17,530 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:17,531 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:17,532 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:17,532 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:17,533 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:59:17,533 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:17,534 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:59:17,534 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:59:17,534 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:59:17,732 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:59:17,733 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:59:17,734 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:59:17,735 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:59:17,735 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:59:17,735 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:59:17,738 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:59:18,054 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:18,055 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:18,055 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:59:18,074 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:18,375 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:59:18,376 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:18,378 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:59:18,378 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:59:18,379 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:18,381 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:18,382 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:18,383 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:18,383 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:18,384 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:59:18,385 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:18,386 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:59:18,386 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:18,387 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:18,388 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:18,389 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:18,389 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:59:18,389 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:18,389 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:59:18,390 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:59:18,390 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:59:18,411 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:59:18,689 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:18,690 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:18,691 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:59:18,691 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:18,977 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:59:18,978 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:18,980 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:59:18,980 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:59:18,981 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:18,982 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:18,983 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:18,985 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:18,985 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:59:18,985 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:18,986 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:18,986 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:59:18,986 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:18,987 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:18,988 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:18,989 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:18,989 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:59:18,989 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:18,989 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:59:18,990 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:59:18,991 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:59:18,991 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:59:19,297 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:19,298 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:19,298 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:59:19,300 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:19,579 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:59:19,580 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:19,580 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:59:19,581 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:59:19,581 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:19,582 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:19,583 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:19,584 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:19,585 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:59:19,585 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:19,585 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:19,586 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:59:19,587 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:19,587 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:19,588 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:19,588 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:19,589 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:19,589 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:59:19,589 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:59:19,590 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:59:19,590 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:59:19,796 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:59:19,797 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:59:19,798 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:59:19,798 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:59:19,799 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:59:19,799 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:59:19,800 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:59:20,083 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:20,083 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:20,084 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:59:20,084 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:20,350 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:59:20,351 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:20,351 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:59:20,352 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:59:20,352 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:20,353 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:20,353 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:20,354 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:20,354 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:59:20,355 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:20,355 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:20,355 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:59:20,356 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:20,357 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:20,357 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:20,358 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:20,359 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:20,359 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:59:20,359 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:59:20,360 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:59:20,360 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:59:20,361 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:59:20,646 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:20,647 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:20,647 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:59:20,666 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:20,947 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:59:20,948 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:20,948 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:59:20,948 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:59:20,950 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:20,951 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:20,951 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:20,951 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:20,953 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:20,953 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:59:20,954 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:20,954 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:59:20,954 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:20,955 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:20,956 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:20,956 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:20,957 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:20,957 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:59:20,958 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:59:20,958 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:59:20,958 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:59:20,959 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:59:21,253 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:21,253 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:21,254 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:59:21,255 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:21,540 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:59:21,541 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:21,542 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:59:21,542 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:59:21,542 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:21,543 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:21,544 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:21,545 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:21,545 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:59:21,546 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:21,546 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:21,546 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:59:21,547 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:21,548 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:21,549 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:21,549 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:21,550 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:59:21,550 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:21,550 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:59:21,551 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:59:21,551 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:59:21,751 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:59:21,752 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:59:21,753 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:59:21,753 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:59:21,754 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:59:21,754 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:59:21,755 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:59:22,034 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:22,036 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:22,036 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:59:22,037 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:22,322 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:59:22,323 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:22,324 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:59:22,324 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:59:22,324 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:22,325 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:22,326 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:22,327 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:22,327 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:59:22,327 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:22,327 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:22,328 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:59:22,329 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:22,329 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:22,330 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:22,331 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:22,331 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:59:22,331 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:22,331 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:59:22,332 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:59:22,332 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:59:22,333 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:59:22,632 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:22,632 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:22,633 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:59:22,653 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:22,958 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:59:22,959 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:22,959 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:59:22,960 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:59:22,960 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:22,962 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:22,962 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:22,964 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:22,964 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:59:22,965 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:22,965 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:22,965 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:59:22,966 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:22,966 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:22,967 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:22,968 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:22,968 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:59:22,968 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:22,968 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:59:22,969 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:59:22,969 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:59:22,971 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:59:23,325 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:23,326 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:23,327 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:59:23,350 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:23,672 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:59:23,673 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:23,673 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:59:23,674 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:59:23,674 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:23,675 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:23,676 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:23,677 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:23,677 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:23,677 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:59:23,679 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:23,679 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:59:23,679 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:23,680 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:23,681 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:23,681 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:23,682 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:59:23,682 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:59:23,682 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:23,682 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:59:23,683 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:59:23,882 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:59:23,883 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:59:23,884 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:59:23,884 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:59:23,885 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:59:23,886 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:59:23,887 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:59:24,182 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:24,183 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:24,183 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:59:24,184 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:24,501 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:59:24,502 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:24,502 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:59:24,502 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:59:24,503 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:24,503 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:24,504 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:24,505 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:24,506 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:59:24,506 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:24,506 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:24,507 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:59:24,507 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:24,508 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:24,509 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:24,509 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:24,510 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:24,510 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:59:24,510 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:59:24,511 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:59:24,512 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:59:24,532 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:59:24,877 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:24,877 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:24,878 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:59:24,890 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:25,218 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:59:25,219 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:25,219 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:59:25,220 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:59:25,220 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:25,222 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:25,222 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:25,223 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:25,224 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:25,224 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:59:25,225 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:25,225 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:59:25,225 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:25,226 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:25,227 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:25,228 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:25,229 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:25,229 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:59:25,230 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:59:25,230 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:59:25,230 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:59:25,231 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:59:25,527 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:25,528 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:25,529 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:59:25,529 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:25,864 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:59:25,865 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:25,866 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:59:25,866 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:59:25,867 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:25,867 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:25,868 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:25,868 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:25,869 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:59:25,870 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:25,870 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:25,871 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:59:25,871 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:25,872 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:25,872 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:25,873 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:25,873 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:59:25,873 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:25,874 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:59:25,874 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:59:25,874 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:59:26,082 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:59:26,083 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:59:26,084 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:59:26,084 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:59:26,085 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:59:26,086 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:59:26,086 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:59:26,389 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:26,390 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:26,390 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:59:26,391 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:26,677 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:59:26,677 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:26,678 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:59:26,678 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:59:26,679 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:26,680 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:26,680 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:26,681 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:26,681 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:59:26,682 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:26,683 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:26,684 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:59:26,684 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:26,685 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:26,685 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:26,686 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:26,687 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:59:26,687 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:26,687 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:59:26,687 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:59:26,688 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:59:26,703 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:59:27,015 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:27,016 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:27,016 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:59:27,017 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:27,305 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:59:27,306 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:27,307 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:59:27,307 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:59:27,307 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:27,308 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:27,309 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:27,310 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:27,310 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:59:27,311 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:27,311 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:27,311 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:59:27,311 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:27,312 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:27,313 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:27,314 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:27,314 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:27,314 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:59:27,315 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:59:27,315 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:59:27,315 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:59:27,315 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:59:27,617 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:27,618 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:27,618 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:59:27,620 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:27,921 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:59:27,923 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:27,923 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:59:27,924 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:59:27,924 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:27,925 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:27,926 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:27,928 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:27,928 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:59:27,929 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:27,929 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:27,930 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:59:27,930 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:27,931 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:27,932 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:27,932 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:27,933 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:59:27,933 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:27,933 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:59:27,933 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:59:27,934 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:59:28,132 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:59:28,132 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:59:28,133 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:59:28,133 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:59:28,135 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:59:28,135 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:59:28,136 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:59:28,404 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:28,406 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:28,407 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:59:28,425 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:28,684 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:59:28,684 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:28,685 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:59:28,685 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:59:28,687 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:28,688 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:28,688 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:28,689 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:28,690 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:59:28,690 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:28,690 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:28,690 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:59:28,691 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:28,692 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:28,692 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:28,693 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:28,694 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:59:28,694 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:28,694 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:59:28,695 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:59:28,695 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:59:28,695 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:59:28,997 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:28,998 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:28,998 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:59:29,015 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:29,264 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:59:29,265 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:29,265 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:59:29,266 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:59:29,266 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:29,267 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:29,268 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:29,269 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:29,270 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:59:29,270 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:29,271 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:29,271 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:59:29,271 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:29,272 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:29,273 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:29,273 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:29,274 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:59:29,274 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:29,274 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:59:29,274 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:59:29,275 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:59:29,276 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:59:29,566 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:29,567 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:29,567 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:59:29,568 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:29,851 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:59:29,853 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:29,853 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:59:29,854 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:59:29,854 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:29,855 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:29,855 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:29,855 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:29,857 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:59:29,857 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:29,858 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:29,858 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:59:29,858 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:29,859 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:29,860 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:29,861 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:29,862 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:29,862 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:59:29,862 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:59:29,863 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:59:29,863 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:59:30,069 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:59:30,070 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:59:30,071 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:59:30,071 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:59:30,072 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:59:30,072 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:59:30,073 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:59:30,364 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:30,365 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:30,366 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:59:30,367 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:30,625 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:59:30,626 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:30,626 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:59:30,627 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:59:30,628 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:30,629 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:30,630 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:30,630 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:30,631 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:59:30,631 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:30,631 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:30,632 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:59:30,632 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:30,633 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:30,634 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:30,634 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:30,635 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:59:30,635 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:30,635 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:59:30,636 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:59:30,636 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:59:30,637 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:59:30,923 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:30,924 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:30,924 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:59:30,925 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:31,179 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:59:31,180 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:31,180 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:59:31,181 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:59:31,181 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:31,182 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:31,182 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:31,183 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:31,183 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:59:31,184 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:31,184 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:31,184 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:59:31,185 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:31,186 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:31,186 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:31,187 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:31,187 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:59:31,187 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:31,188 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:59:31,188 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:59:31,188 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:59:31,207 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:59:31,487 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:31,488 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:31,489 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:59:31,490 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:31,775 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:59:31,776 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:31,776 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:59:31,777 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:59:31,777 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:31,778 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:31,779 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:31,779 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:31,779 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:59:31,780 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:31,780 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:31,780 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:59:31,781 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:31,782 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:31,783 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:31,783 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:31,783 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:59:31,784 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:59:31,784 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:31,785 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:59:31,785 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:59:31,986 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:59:31,987 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:59:31,988 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:59:31,988 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:59:31,989 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:59:31,989 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:59:31,990 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:59:32,256 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:32,258 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:32,258 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:59:32,284 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:32,519 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:59:32,520 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:32,521 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:59:32,522 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:59:32,522 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:32,523 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:32,524 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:32,525 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:32,525 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:59:32,526 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:32,526 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:32,526 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:59:32,527 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:32,527 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:32,528 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:32,529 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:32,529 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:32,529 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:59:32,530 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:59:32,530 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:59:32,531 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:59:32,532 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:59:32,802 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:32,803 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:32,803 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:59:32,804 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:33,111 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:59:33,112 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:33,112 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:59:33,113 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:59:33,114 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:33,115 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:33,116 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:33,117 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:33,118 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:33,118 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:59:33,119 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:33,119 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:59:33,120 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:33,120 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:33,121 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:33,122 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:33,122 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:33,122 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:59:33,122 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:59:33,123 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:59:33,123 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:59:33,147 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:59:33,450 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:33,451 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:33,451 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:59:33,451 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:33,718 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:59:33,718 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:33,719 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:59:33,719 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:59:33,720 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:33,721 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:33,722 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:33,723 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:33,723 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:59:33,723 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:33,724 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:33,724 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:59:33,724 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:33,725 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:33,725 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:33,726 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:33,726 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:59:33,727 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:33,727 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:59:33,727 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:59:33,728 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:59:33,924 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:59:33,924 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:59:33,925 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:59:33,925 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:59:33,925 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:59:33,925 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:59:33,927 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:59:34,201 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:34,202 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:34,202 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:59:34,203 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:34,547 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:59:34,549 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:34,550 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:59:34,550 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:59:34,550 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:34,552 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:34,552 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:34,553 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:34,553 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:59:34,554 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:34,554 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:34,554 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:59:34,554 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:34,556 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:34,557 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:34,557 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:34,558 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:34,558 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:59:34,558 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:59:34,559 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:59:34,559 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:59:34,579 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:59:34,869 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:34,870 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:34,870 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:59:34,871 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:35,159 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:59:35,160 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:35,161 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:59:35,161 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:59:35,162 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:35,163 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:35,163 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:35,164 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:35,165 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:59:35,165 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:35,165 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:35,166 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:59:35,166 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:35,167 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:35,168 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:35,169 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:35,169 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:59:35,170 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:35,170 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:59:35,170 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:59:35,171 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:59:35,172 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:59:35,482 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:35,483 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:35,483 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:59:35,484 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:35,774 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:59:35,774 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:35,775 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:59:35,775 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:59:35,775 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:35,776 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:35,777 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:35,778 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:35,778 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:59:35,779 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:35,779 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:35,780 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:59:35,780 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:35,781 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:35,782 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:35,783 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:35,784 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:35,784 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:59:35,784 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:59:35,785 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:59:35,785 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:59:35,987 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:59:35,988 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:59:35,988 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:59:35,989 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:59:35,990 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:59:35,990 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:59:35,992 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:59:36,293 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:36,294 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:36,295 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:59:36,296 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:36,581 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:59:36,582 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:36,582 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:59:36,583 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:59:36,584 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:36,585 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:36,586 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:36,587 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:36,587 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:36,588 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:59:36,589 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:36,589 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:59:36,589 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:36,590 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:36,591 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:36,591 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:36,592 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:59:36,592 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:36,592 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:59:36,593 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:59:36,593 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:59:36,594 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:59:36,911 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:36,912 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:36,913 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:59:36,931 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:37,211 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:59:37,212 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:37,212 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:59:37,213 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:59:37,213 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:37,214 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:37,214 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:37,215 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:37,216 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:59:37,216 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:37,217 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:37,217 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:59:37,217 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:37,219 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:37,220 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:37,220 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:37,220 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:37,222 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:59:37,222 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:59:37,222 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:59:37,222 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:59:37,244 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:59:37,540 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:37,540 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:37,541 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:59:37,542 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:37,827 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:59:37,828 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:37,829 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:59:37,829 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:59:37,830 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:37,831 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:37,832 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:37,833 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:37,833 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:59:37,833 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:37,833 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:37,834 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:59:37,835 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:37,836 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:37,836 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:37,837 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:37,838 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:59:37,838 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:37,838 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:59:37,838 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:59:37,839 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:59:38,039 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:59:38,040 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:59:38,041 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:59:38,041 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:59:38,042 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:59:38,042 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:59:38,055 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:59:38,344 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:38,345 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:38,345 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:59:38,346 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:38,603 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:59:38,604 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:38,604 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:59:38,604 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:59:38,604 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:38,605 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:38,607 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:38,607 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:38,608 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:38,608 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:59:38,609 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:38,609 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:59:38,609 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:38,610 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:38,611 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:38,612 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:38,612 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:59:38,612 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:38,612 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:59:38,613 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:59:38,613 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:59:38,614 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:59:38,891 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:38,892 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:38,892 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:59:38,893 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:39,163 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:59:39,164 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:39,165 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:59:39,166 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:59:39,166 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:39,167 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:39,168 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:39,169 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:39,169 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:59:39,169 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:39,170 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:39,170 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:59:39,171 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:39,172 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:39,173 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:39,174 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:39,174 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:59:39,174 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:39,174 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:59:39,175 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:59:39,175 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:59:39,176 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:59:39,419 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:39,420 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:39,420 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:59:39,422 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:39,666 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:59:39,668 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:39,668 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:59:39,669 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:59:39,669 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:39,671 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:39,671 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:39,672 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:39,672 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:59:39,673 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:39,673 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:39,673 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:59:39,674 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:39,675 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:39,676 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:39,676 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:39,677 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:59:39,677 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:39,677 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:59:39,678 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:59:39,678 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:59:39,880 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:59:39,880 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:59:39,880 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:59:39,880 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:59:39,881 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:59:39,881 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:59:39,882 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:59:40,136 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:40,138 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:40,138 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:59:40,139 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:40,388 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:59:40,388 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:40,389 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:59:40,389 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:59:40,390 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:40,390 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:40,391 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:40,391 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:40,392 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:59:40,393 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:40,393 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:40,394 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:59:40,394 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:40,395 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:40,396 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:40,396 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:40,397 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:59:40,397 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:59:40,397 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:40,397 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:59:40,398 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:59:40,423 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:59:40,699 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:40,700 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:40,701 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:59:40,719 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:40,983 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:59:40,984 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:40,984 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:59:40,985 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:59:40,985 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:40,986 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:40,987 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:40,987 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:40,989 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:40,989 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:59:40,990 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:40,990 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:59:40,990 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:40,991 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:40,992 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:40,992 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:40,993 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:40,993 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:59:40,993 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:59:40,994 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:59:40,994 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:59:40,995 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:59:41,291 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:41,292 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:41,292 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:59:41,293 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:41,575 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:59:41,578 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:41,578 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:59:41,579 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:59:41,579 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:41,580 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:41,581 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:41,581 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:41,582 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:59:41,582 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:41,582 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:41,583 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:59:41,583 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:41,584 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:41,585 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:41,586 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:41,586 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:59:41,586 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:41,586 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:59:41,587 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:59:41,587 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:59:41,790 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:59:41,791 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:59:41,791 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:59:41,792 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:59:41,792 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:59:41,792 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:59:41,794 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:59:42,075 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:42,076 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:42,077 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:59:42,078 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:42,336 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:59:42,337 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:42,337 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:59:42,337 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:59:42,339 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:42,339 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:42,340 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:42,340 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:42,341 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:59:42,341 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:42,342 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:42,342 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:59:42,342 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:42,343 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:42,344 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:42,345 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:42,345 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:59:42,345 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:42,346 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:59:42,346 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:59:42,346 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:59:42,347 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:59:42,596 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:42,597 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:42,597 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:59:42,598 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:42,919 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:59:42,920 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:42,921 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:59:42,922 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:59:42,923 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:42,923 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:42,924 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:42,925 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:42,926 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:42,926 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:59:42,927 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:42,928 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:59:42,928 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:42,929 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:42,930 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:42,930 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:42,931 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:42,931 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:59:42,931 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:59:42,931 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:59:42,932 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:59:42,955 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:59:43,285 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:43,287 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:43,287 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:59:43,289 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:43,605 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:59:43,606 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:43,607 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:59:43,607 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:59:43,608 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:43,608 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:43,610 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:43,610 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:43,611 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:59:43,611 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:43,612 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:43,612 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:59:43,612 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:43,614 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:43,614 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:43,615 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:43,615 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:59:43,615 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:59:43,615 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:43,616 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:59:43,616 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:59:43,810 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:59:43,810 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:59:43,811 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:59:43,812 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:59:43,812 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:59:43,813 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:59:43,814 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:59:44,145 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:44,147 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:44,147 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:59:44,148 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:44,434 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:59:44,435 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:44,435 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:59:44,437 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:59:44,437 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:44,438 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:44,439 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:44,440 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:44,441 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:59:44,441 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:44,442 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:44,442 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:59:44,443 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:44,444 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:44,444 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:44,445 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:44,445 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:59:44,445 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:59:44,446 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:44,446 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:59:44,446 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:59:44,447 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:59:44,755 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:44,755 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:44,756 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:59:44,757 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:45,065 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:59:45,066 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:45,067 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:59:45,067 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:59:45,068 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:45,069 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:45,070 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:45,070 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:45,071 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:59:45,071 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:45,071 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:45,071 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:59:45,072 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:45,074 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:45,075 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:45,075 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:45,076 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:59:45,076 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:45,076 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:59:45,077 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:59:45,077 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:59:45,077 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:59:45,415 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:45,416 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:45,417 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:59:45,440 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:45,768 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:59:45,768 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:45,769 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:59:45,769 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:59:45,770 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:45,770 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:45,771 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:45,772 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:45,772 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:59:45,772 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:45,773 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:45,774 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:59:45,774 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:45,775 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:45,775 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:45,776 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:45,776 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:45,777 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:59:45,777 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:59:45,777 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:59:45,778 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:59:45,980 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:59:45,980 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:59:45,981 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:59:45,981 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:59:45,982 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:59:45,982 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:59:45,984 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:59:46,273 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:46,274 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:46,275 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:59:46,292 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:46,558 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:59:46,559 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:46,560 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:59:46,560 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:59:46,561 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:46,562 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:46,562 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:46,564 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:46,564 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:59:46,565 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:46,565 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:46,566 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:59:46,566 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:46,567 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:46,568 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:46,568 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:46,569 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:46,569 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:59:46,569 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:59:46,569 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:59:46,570 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:59:46,570 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:59:46,847 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:46,848 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:46,850 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:59:46,851 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:47,134 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:59:47,134 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:47,135 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:59:47,135 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:59:47,136 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:47,137 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:47,138 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:47,138 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:47,138 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:59:47,139 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:47,139 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:47,140 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:59:47,141 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:47,141 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:47,142 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:47,143 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:47,143 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:59:47,143 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:47,144 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:59:47,144 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:59:47,144 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:59:47,145 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:59:47,453 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:47,453 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:47,454 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:59:47,454 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:47,717 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:59:47,718 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:47,719 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:59:47,720 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:59:47,720 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:47,721 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:47,722 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:47,722 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:47,724 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:59:47,724 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:47,724 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:47,725 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:59:47,725 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:47,726 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:47,727 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:47,727 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:47,727 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:59:47,728 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:47,728 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:59:47,728 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:59:47,728 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:59:47,933 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:59:47,933 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:59:47,934 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:59:47,934 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:59:47,934 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:59:47,935 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:59:47,935 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:59:48,252 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:48,252 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:48,253 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:59:48,273 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:48,580 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:59:48,580 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:48,581 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:59:48,581 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:59:48,582 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:48,582 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:48,583 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:48,584 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:48,585 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:59:48,585 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:48,585 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:48,586 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:59:48,586 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:48,587 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:48,588 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:48,588 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:48,589 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:48,589 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:59:48,589 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:59:48,590 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:59:48,590 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:59:48,612 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:59:48,901 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:48,902 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:48,902 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:59:48,919 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:49,256 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:59:49,257 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:49,258 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:59:49,258 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:59:49,258 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:49,259 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:49,260 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:49,262 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:49,262 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:49,263 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:59:49,263 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:49,264 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:59:49,264 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:49,265 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:49,266 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:49,266 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:49,266 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:59:49,267 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:49,267 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:59:49,267 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:59:49,268 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:59:49,268 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:59:49,597 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:49,598 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:49,598 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:59:49,599 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:50,005 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:59:50,006 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:50,006 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:59:50,007 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:59:50,007 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:50,008 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:50,010 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:50,010 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:50,011 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:59:50,011 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:50,011 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:50,012 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:59:50,012 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:50,014 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:50,014 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:50,015 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:50,016 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:59:50,016 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:50,016 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:59:50,016 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:59:50,017 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:59:50,214 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:59:50,215 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:59:50,216 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:59:50,217 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:59:50,217 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:59:50,217 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:59:50,219 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:59:50,569 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:50,570 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:50,570 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:59:50,571 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:50,938 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:59:50,939 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:50,939 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:59:50,939 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:59:50,940 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:50,941 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:50,941 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:50,942 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:50,943 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:59:50,943 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:50,943 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:50,944 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:59:50,944 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:50,945 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:50,946 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:50,947 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:50,948 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:59:50,948 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:50,948 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:59:50,949 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:59:50,949 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:59:50,969 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:59:51,353 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:51,354 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:51,355 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:59:51,369 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:51,735 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:59:51,736 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:51,736 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:59:51,737 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:59:51,737 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:51,738 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:51,740 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:51,740 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:51,741 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:59:51,741 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:51,741 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:51,742 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:59:51,742 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:51,743 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:51,744 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:51,744 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:51,745 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:59:51,745 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:59:51,745 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:51,745 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:59:51,746 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:59:51,768 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:59:52,146 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:52,147 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:52,148 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:59:52,148 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:52,529 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:59:52,530 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:52,530 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:59:52,531 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:59:52,531 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:52,532 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:52,533 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:52,534 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:52,535 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:52,535 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:59:52,536 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:52,536 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:59:52,536 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:52,537 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:52,538 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:52,538 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:52,539 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:59:52,539 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:52,539 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:59:52,540 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:59:52,540 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:59:52,737 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:59:52,737 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:59:52,738 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:59:52,738 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:59:52,739 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:59:52,739 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:59:52,740 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:59:53,130 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:53,131 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:53,131 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:59:53,132 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:53,496 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:59:53,497 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:53,498 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:59:53,498 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:59:53,499 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:53,499 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:53,500 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:53,501 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:53,501 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:59:53,502 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:53,502 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:53,502 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:59:53,503 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:53,503 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:53,504 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:53,504 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:53,505 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:59:53,505 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:59:53,505 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:53,506 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:59:53,506 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:59:53,520 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:59:53,826 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:53,827 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:53,828 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:59:53,829 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:54,123 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:59:54,124 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:54,124 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:59:54,125 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:59:54,125 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:54,126 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:54,127 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:54,127 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:54,128 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:59:54,128 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:54,128 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:54,129 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:59:54,129 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:54,130 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:54,131 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:54,132 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:54,133 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:54,133 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:59:54,133 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:59:54,134 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:59:54,134 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:59:54,154 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:59:54,492 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:54,494 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:54,494 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:59:54,495 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:54,865 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:59:54,866 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:54,867 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:59:54,867 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:59:54,867 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:54,868 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:54,869 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:54,870 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:54,871 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:54,871 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:59:54,872 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:54,872 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:59:54,873 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:54,873 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:54,875 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:54,875 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:54,876 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:59:54,876 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:54,876 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:59:54,877 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:59:54,877 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:59:55,084 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:59:55,085 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:59:55,086 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:59:55,086 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:59:55,087 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:59:55,087 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:59:55,088 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:59:55,425 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:55,426 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:55,427 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:59:55,440 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:55,762 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:59:55,763 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:55,763 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:59:55,764 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:59:55,764 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:55,765 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:55,766 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:55,767 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:55,768 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:59:55,768 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:55,768 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:55,769 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:59:55,769 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:55,771 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:55,772 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:55,772 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:55,772 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:59:55,773 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:55,773 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:59:55,773 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:59:55,774 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:59:55,774 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:59:56,096 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:56,097 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:56,097 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:59:56,098 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:56,353 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:59:56,354 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:56,354 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:59:56,355 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:59:56,356 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:56,358 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:56,358 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:56,359 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:56,359 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:59:56,360 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:56,360 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:56,360 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:59:56,361 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:56,361 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:56,362 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:56,363 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:56,363 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:59:56,363 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:56,364 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:59:56,364 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:59:56,364 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:59:56,365 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:59:56,692 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:56,693 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:56,693 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:59:56,711 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:57,017 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:59:57,019 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:57,019 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:59:57,020 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:59:57,020 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:57,021 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:57,023 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:57,025 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:57,025 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:57,025 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:59:57,026 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:57,027 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:59:57,027 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:57,028 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:57,030 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:57,030 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:57,031 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:59:57,031 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:57,032 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:59:57,033 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:59:57,034 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:59:57,227 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:59:57,227 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:59:57,227 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:59:57,228 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:59:57,228 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:59:57,228 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:59:57,230 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:59:57,505 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:57,506 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:57,506 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:59:57,523 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:57,837 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 14:59:57,838 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:57,838 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 14:59:57,839 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 14:59:57,839 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:57,840 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:57,841 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:57,841 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:57,842 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 14:59:57,842 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:57,843 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:57,843 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 14:59:57,843 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:57,844 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 14:59:57,845 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 14:59:57,845 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 14:59:57,846 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 14:59:57,846 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 14:59:57,847 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 14:59:57,847 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 14:59:57,847 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 14:59:57,864 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 14:59:58,202 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:58,203 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:58,203 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 14:59:58,221 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:58,498 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 14:59:58,499 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:58,500 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 14:59:58,500 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 14:59:58,500 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:58,502 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:58,503 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:58,503 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:58,504 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 14:59:58,504 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:58,504 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:58,505 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 14:59:58,505 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 14:59:58,506 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 14:59:58,507 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 14:59:58,507 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 14:59:58,508 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 14:59:58,508 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 14:59:58,508 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 14:59:58,509 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 14:59:58,509 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 14:59:58,510 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 14:59:58,862 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:58,862 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:58,862 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 14:59:58,864 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:59,219 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 14:59:59,220 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:59,221 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 14:59:59,221 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 14:59:59,222 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:59,224 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:59,225 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:59,227 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:59,228 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:59,228 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 14:59:59,229 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 14:59:59,229 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 14:59:59,230 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 14:59:59,231 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 14:59:59,232 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 14:59:59,233 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 14:59:59,234 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 14:59:59,234 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 14:59:59,234 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 14:59:59,235 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 14:59:59,235 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 14:59:59,435 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 14:59:59,436 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 14:59:59,436 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 14:59:59,436 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 14:59:59,436 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 14:59:59,437 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 14:59:59,437 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 14:59:59,742 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 14:59:59,743 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 14:59:59,743 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 14:59:59,745 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:00,065 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:00:00,067 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:00,068 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:00:00,069 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:00:00,069 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:00,070 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:00,071 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:00,072 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:00,072 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:00:00,073 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:00,073 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:00,073 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:00:00,074 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:00,075 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:00,076 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:00,076 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:00,077 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:00:00,077 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:00,077 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:00:00,078 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:00:00,078 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:00:00,101 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:00:00,419 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:00,420 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:00,420 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:00:00,443 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:00,774 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:00:00,775 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:00,775 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:00:00,776 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:00:00,776 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:00,777 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:00,778 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:00,779 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:00,779 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:00:00,780 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:00,781 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:00,781 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:00:00,782 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:00,783 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:00,784 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:00,784 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:00,785 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:00:00,785 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:00,785 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:00:00,786 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:00:00,786 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:00:00,787 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:00:01,163 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:01,164 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:01,164 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:00:01,165 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:01,501 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:00:01,502 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:01,502 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:00:01,503 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:00:01,503 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:01,504 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:01,505 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:01,506 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:01,507 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:00:01,507 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:01,507 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:01,508 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:00:01,508 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:01,509 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:01,510 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:01,511 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:01,511 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:00:01,511 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:00:01,511 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:01,512 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:00:01,512 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:00:01,710 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:00:01,711 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:00:01,711 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:00:01,711 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:00:01,712 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:00:01,713 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:00:01,715 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:00:02,067 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:02,068 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:02,069 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:00:02,069 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:02,413 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:00:02,414 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:02,414 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:00:02,415 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:00:02,415 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:02,417 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:02,418 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:02,418 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:02,419 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:00:02,420 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:02,420 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:02,420 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:00:02,421 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:02,421 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:02,422 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:02,423 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:02,423 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:00:02,423 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:02,423 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:00:02,424 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:00:02,424 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:00:02,438 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:00:02,814 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:02,815 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:02,815 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:00:02,816 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:03,177 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:00:03,179 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:03,179 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:00:03,180 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:00:03,180 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:03,181 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:03,182 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:03,183 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:03,183 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:00:03,184 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:03,184 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:03,184 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:00:03,185 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:03,186 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:03,187 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:03,187 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:03,188 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:03,188 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:00:03,189 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:00:03,189 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:00:03,189 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:00:03,190 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:00:03,528 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:03,529 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:03,530 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:00:03,554 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:03,863 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:00:03,864 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:03,865 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:00:03,865 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:00:03,866 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:03,867 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:03,867 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:03,869 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:03,869 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:00:03,870 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:03,870 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:03,870 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:00:03,871 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:03,872 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:03,872 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:03,873 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:03,874 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:00:03,874 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:03,874 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:00:03,875 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:00:03,875 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:00:04,076 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:00:04,077 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:00:04,078 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:00:04,078 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:00:04,078 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:00:04,078 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:00:04,079 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:00:04,470 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:04,470 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:04,470 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:00:04,471 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:04,846 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:00:04,848 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:04,848 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:00:04,849 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:00:04,849 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:04,850 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:04,852 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:04,852 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:04,852 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:00:04,853 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:04,853 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:04,854 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:00:04,854 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:04,855 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:04,856 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:04,857 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:04,857 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:00:04,857 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:04,857 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:00:04,858 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:00:04,858 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:00:04,881 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:00:05,238 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:05,239 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:05,240 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:00:05,241 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:05,600 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:00:05,600 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:05,601 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:00:05,601 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:00:05,601 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:05,604 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:05,605 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:05,606 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:05,606 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:05,607 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:00:05,607 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:05,608 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:00:05,608 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:05,609 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:05,610 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:05,610 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:05,611 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:00:05,611 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:05,611 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:00:05,612 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:00:05,612 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:00:05,613 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:00:05,896 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:05,897 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:05,897 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:00:05,922 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:06,222 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:00:06,223 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:06,223 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:00:06,223 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:00:06,223 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:06,225 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:06,226 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:06,226 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:06,226 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:00:06,227 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:06,227 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:06,227 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:00:06,228 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:06,228 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:06,229 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:06,229 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:06,231 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:06,231 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:00:06,231 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:00:06,232 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:00:06,232 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:00:06,438 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:00:06,438 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:00:06,438 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:00:06,439 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:00:06,439 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:00:06,439 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:00:06,440 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:00:06,753 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:06,754 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:06,755 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:00:06,776 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:07,082 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:00:07,082 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:07,083 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:00:07,083 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:00:07,084 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:07,084 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:07,085 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:07,086 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:07,087 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:00:07,087 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:07,088 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:07,088 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:00:07,089 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:07,089 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:07,090 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:07,090 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:07,091 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:00:07,091 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:07,091 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:00:07,092 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:00:07,092 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:00:07,118 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:00:07,468 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:07,469 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:07,470 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:00:07,493 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:07,831 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:00:07,832 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:07,833 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:00:07,834 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:00:07,834 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:07,835 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:07,836 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:07,837 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:07,837 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:00:07,837 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:07,838 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:07,838 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:00:07,839 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:07,839 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:07,840 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:07,840 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:07,841 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:00:07,841 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:07,841 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:00:07,842 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:00:07,842 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:00:07,864 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:00:08,174 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:08,175 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:08,175 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:00:08,176 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:08,502 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:00:08,502 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:08,503 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:00:08,503 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:00:08,503 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:08,505 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:08,506 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:08,506 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:08,507 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:00:08,507 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:08,508 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:08,508 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:00:08,509 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:08,509 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:08,510 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:08,511 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:08,511 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:00:08,511 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:08,511 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:00:08,512 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:00:08,512 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:00:08,721 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:00:08,721 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:00:08,721 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:00:08,721 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:00:08,723 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:00:08,723 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:00:08,724 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:00:09,054 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:09,055 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:09,056 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:00:09,077 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:09,345 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:00:09,346 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:09,346 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:00:09,347 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:00:09,347 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:09,348 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:09,349 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:09,349 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:09,350 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:00:09,350 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:09,350 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:09,350 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:00:09,351 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:09,352 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:09,353 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:09,353 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:09,354 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:09,354 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:00:09,355 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:00:09,355 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:00:09,355 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:00:09,356 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:00:09,694 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:09,694 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:09,695 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:00:09,715 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:10,032 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:00:10,032 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:10,033 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:00:10,033 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:00:10,034 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:10,034 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:10,035 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:10,035 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:10,036 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:00:10,036 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:10,037 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:10,037 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:00:10,037 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:10,039 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:10,039 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:10,040 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:10,040 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:00:10,040 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:10,040 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:00:10,041 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:00:10,041 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:00:10,055 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:00:10,345 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:10,345 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:10,346 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:00:10,346 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:10,669 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:00:10,670 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:10,670 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:00:10,671 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:00:10,671 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:10,672 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:10,673 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:10,674 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:10,675 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:10,676 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:00:10,676 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:10,676 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:00:10,677 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:10,677 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:10,678 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:10,679 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:10,679 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:00:10,679 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:10,680 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:00:10,680 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:00:10,680 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:00:10,884 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:00:10,884 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:00:10,884 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:00:10,885 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:00:10,885 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:00:10,887 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:00:10,888 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:00:11,221 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:11,222 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:11,223 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:00:11,243 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:11,536 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:00:11,536 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:11,537 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:00:11,538 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:00:11,538 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:11,539 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:11,540 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:11,540 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:11,541 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:00:11,541 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:11,541 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:11,542 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:00:11,542 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:11,543 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:11,544 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:11,544 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:11,545 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:11,545 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:00:11,545 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:00:11,546 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:00:11,547 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:00:11,548 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:00:11,854 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:11,855 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:11,855 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:00:11,875 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:12,187 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:00:12,188 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:12,189 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:00:12,190 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:00:12,190 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:12,191 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:12,192 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:12,194 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:12,194 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:12,194 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:00:12,195 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:12,195 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:00:12,196 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:12,196 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:12,197 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:12,198 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:12,198 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:00:12,198 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:12,198 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:00:12,199 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:00:12,200 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:00:12,200 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:00:12,531 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:12,533 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:12,533 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:00:12,534 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:12,845 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:00:12,845 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:12,846 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:00:12,847 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:00:12,847 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:12,848 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:12,849 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:12,850 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:12,850 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:00:12,850 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:12,852 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:12,852 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:00:12,852 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:12,853 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:12,854 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:12,856 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:12,856 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:12,856 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:00:12,857 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:00:12,857 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:00:12,858 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:00:13,051 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:00:13,051 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:00:13,051 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:00:13,052 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:00:13,052 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:00:13,053 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:00:13,054 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:00:13,408 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:13,409 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:13,410 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:00:13,411 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:13,726 - app.services.device_manager - INFO - Getting proxy status for proxyid: None
2025-10-21 15:00:13,726 - app.services.device_manager - INFO - All device status from cache: {55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}, 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}, 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:00:13,727 - app.services.device_manager - INFO - Returning status list with 3 items
2025-10-21 15:00:13,728 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:00:13,729 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:13,729 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:00:13,729 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:00:13,730 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:13,731 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:13,732 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:13,732 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:13,733 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:00:13,733 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:13,734 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:13,734 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:00:13,735 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:13,736 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:13,736 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:13,737 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:13,737 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:13,737 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:00:13,738 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:00:13,738 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:00:13,739 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:00:13,739 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:00:14,102 - app.services.device_manager - INFO - Getting proxy status for proxyid: None
2025-10-21 15:00:14,103 - app.services.device_manager - INFO - All device status from cache: {55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}, 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}, 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:00:14,103 - app.services.device_manager - INFO - Returning status list with 3 items
2025-10-21 15:00:14,106 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:14,107 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:14,107 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:00:14,108 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:14,485 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:00:14,486 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:14,487 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:00:14,488 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:00:14,488 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:14,489 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:14,489 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:14,490 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:14,490 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:00:14,491 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:14,491 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:14,492 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:00:14,492 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:14,493 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:14,494 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:14,495 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:14,495 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:00:14,495 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:14,496 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:00:14,496 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:00:14,497 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:00:14,519 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:00:14,879 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:14,880 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:14,880 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:00:14,905 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:15,225 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:00:15,226 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:15,226 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:00:15,227 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:00:15,227 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:15,228 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:15,229 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:15,230 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:15,230 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:15,230 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:00:15,232 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:15,233 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:00:15,233 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:15,235 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:15,236 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:15,236 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:15,237 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:00:15,237 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:15,237 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:00:15,238 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:00:15,238 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:00:15,434 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:00:15,435 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:00:15,435 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:00:15,436 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:00:15,436 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:00:15,437 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:00:15,450 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:00:15,783 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:15,784 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:15,785 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:00:15,786 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:16,072 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:00:16,074 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:16,074 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:00:16,075 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:00:16,076 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:16,077 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:16,078 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:16,078 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:16,080 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:16,080 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:00:16,081 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:16,081 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:00:16,082 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:16,083 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:16,084 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:16,085 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:16,085 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:00:16,086 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:00:16,086 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:16,086 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:00:16,087 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:00:16,102 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:00:16,414 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:16,415 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:16,415 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:00:16,428 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:16,815 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:00:16,816 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:16,816 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:00:16,817 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:00:16,817 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:16,818 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:16,819 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:16,819 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:16,820 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:00:16,820 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:16,820 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:16,821 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:00:16,821 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:16,822 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:16,823 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:16,824 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:16,824 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:16,824 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:00:16,825 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:00:16,825 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:00:16,825 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:00:16,826 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:00:17,172 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:17,173 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:17,174 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:00:17,175 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:17,469 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:00:17,471 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:17,472 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:00:17,472 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:00:17,473 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:17,474 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:17,475 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:17,475 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:17,476 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:17,476 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:00:17,477 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:17,477 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:00:17,478 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:17,479 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:17,480 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:17,481 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:17,482 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:17,483 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:00:17,483 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:00:17,483 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:00:17,484 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:00:17,687 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:00:17,688 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:00:17,688 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:00:17,689 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:00:17,690 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:00:17,690 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:00:17,691 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:00:18,007 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:18,008 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:18,008 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:00:18,009 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:18,353 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:00:18,354 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:18,354 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:00:18,355 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:00:18,355 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:18,356 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:18,356 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:18,358 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:18,359 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:00:18,359 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:18,360 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:18,360 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:00:18,361 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:18,361 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:18,362 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:18,362 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:18,363 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:18,363 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:00:18,364 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:00:18,364 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:00:18,365 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:00:18,366 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:00:18,674 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:18,674 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:18,675 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:00:18,676 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:19,016 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:00:19,017 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:19,018 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:00:19,018 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:00:19,019 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:19,020 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:19,021 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:19,023 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:19,024 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:19,024 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:00:19,025 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:19,026 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:00:19,026 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:19,027 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:19,028 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:19,028 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:19,029 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:00:19,029 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:00:19,029 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:00:19,030 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:19,030 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:00:19,031 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:00:19,376 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:19,376 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:19,376 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:00:19,391 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:19,718 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:00:19,719 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:19,719 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:00:19,719 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:00:19,719 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:19,721 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:19,721 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:19,722 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:19,723 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:00:19,723 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:19,724 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:19,724 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:00:19,724 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:19,725 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:19,726 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:19,726 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:19,727 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:19,727 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:00:19,727 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:00:19,728 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:00:19,728 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:00:19,924 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:00:19,925 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:00:19,925 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:00:19,926 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:00:19,926 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:00:19,926 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:00:19,927 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:00:20,240 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:20,241 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:20,242 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:00:20,244 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:20,560 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:00:20,566 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:20,566 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:00:20,567 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:00:20,567 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:20,568 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:20,569 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:20,570 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:20,571 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:20,571 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:00:20,572 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:20,572 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:00:20,572 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:20,574 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:20,574 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:20,575 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:20,575 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:20,575 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:00:20,576 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:00:20,576 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:00:20,577 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:00:20,578 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:00:20,907 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:20,908 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:20,909 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:00:20,911 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:21,185 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:00:21,186 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:21,187 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:00:21,187 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:00:21,188 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:21,189 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:21,190 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:21,192 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:21,192 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:00:21,193 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:21,193 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:21,194 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:00:21,194 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:21,195 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:21,196 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:21,197 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:21,197 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:21,198 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:00:21,198 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:00:21,198 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:00:21,199 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:00:21,216 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:00:21,530 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:21,531 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:21,531 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:00:21,558 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:21,871 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:00:21,872 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:21,872 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:00:21,873 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:00:21,873 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:21,874 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:21,875 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:21,876 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:21,876 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:00:21,878 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:21,878 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:21,879 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:00:21,879 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:21,880 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:21,881 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:21,882 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:21,882 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:21,882 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:00:21,883 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:00:21,883 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:00:21,883 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:00:22,087 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:00:22,087 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:00:22,088 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:00:22,088 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:00:22,089 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:00:22,089 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:00:22,090 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:00:22,353 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:22,354 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:22,354 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:00:22,355 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:22,659 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:00:22,660 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:22,660 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:00:22,661 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:00:22,662 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:22,663 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:22,665 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:22,665 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:22,665 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:00:22,665 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:22,665 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:22,667 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:00:22,667 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:22,668 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:22,669 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:22,669 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:22,670 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:00:22,670 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:22,670 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:00:22,671 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:00:22,671 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:00:22,672 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:00:22,972 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:22,973 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:22,974 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:00:22,975 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:23,278 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:00:23,279 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:23,279 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:00:23,280 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:00:23,280 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:23,280 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:23,281 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:23,281 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:23,283 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:23,283 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:00:23,284 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:23,285 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:00:23,285 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:23,286 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:23,287 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:23,287 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:23,288 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:00:23,288 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:00:23,288 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:23,288 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:00:23,289 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:00:23,290 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:00:23,566 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:23,567 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:23,567 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:00:23,586 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:23,885 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:00:23,886 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:23,887 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:00:23,887 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:00:23,888 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:23,889 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:23,890 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:23,890 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:23,892 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:00:23,892 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:23,893 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:23,893 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:00:23,894 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:23,895 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:23,895 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:23,896 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:23,897 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:23,897 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:00:23,897 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:00:23,898 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:00:23,898 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:00:24,097 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:00:24,097 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:00:24,097 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:00:24,097 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:00:24,099 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:00:24,099 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:00:24,100 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:00:24,465 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:24,467 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:24,468 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:00:24,469 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:24,793 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:00:24,794 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:24,794 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:00:24,794 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:00:24,795 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:24,796 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:24,796 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:24,797 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:24,798 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:24,798 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:00:24,799 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:24,799 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:00:24,800 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:24,801 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:24,801 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:24,802 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:24,803 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:00:24,803 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:24,803 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:00:24,803 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:00:24,804 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:00:24,826 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:00:25,168 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:25,169 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:25,170 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:00:25,171 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:25,574 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:00:25,576 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:25,576 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:00:25,577 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:00:25,577 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:25,578 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:25,580 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:25,580 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:25,580 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:00:25,581 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:25,581 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:25,581 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:00:25,582 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:25,583 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:25,584 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:25,584 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:25,585 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:00:25,585 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:25,585 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:00:25,585 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:00:25,586 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:00:25,587 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:00:25,925 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:25,926 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:25,928 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:00:25,928 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:26,240 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:00:26,241 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:26,241 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:00:26,242 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:00:26,242 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:26,244 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:26,245 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:26,246 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:26,247 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:26,247 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:00:26,248 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:26,248 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:00:26,248 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:26,249 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:26,250 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:26,250 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:26,250 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:00:26,251 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:26,251 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:00:26,251 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:00:26,251 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:00:26,455 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:00:26,456 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:00:26,456 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:00:26,457 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:00:26,457 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:00:26,458 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:00:26,459 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:00:26,752 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:26,753 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:26,753 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:00:26,766 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:27,039 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:00:27,040 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:27,041 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:00:27,041 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:00:27,042 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:27,043 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:27,045 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:27,046 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:27,047 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:00:27,047 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:27,047 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:27,048 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:00:27,048 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:27,049 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:27,050 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:27,050 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:27,051 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:00:27,051 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:27,051 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:00:27,052 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:00:27,052 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:00:27,077 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:00:27,393 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:27,394 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:27,394 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:00:27,395 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:27,655 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:00:27,657 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:27,657 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:00:27,658 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:00:27,658 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:27,660 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:27,661 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:27,662 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:27,662 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:00:27,662 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:27,664 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:27,664 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:00:27,664 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:27,666 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:27,666 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:27,667 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:27,667 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:00:27,667 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:27,668 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:00:27,668 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:00:27,668 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:00:27,687 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:00:27,983 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:27,984 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:27,984 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:00:27,985 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:28,246 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:00:28,247 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:28,248 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:00:28,249 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:00:28,249 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:28,250 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:28,250 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:28,251 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:28,252 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:00:28,252 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:28,252 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:28,253 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:00:28,253 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:28,254 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:28,255 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:28,255 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:28,256 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:28,256 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:00:28,256 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:00:28,256 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:00:28,257 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:00:28,449 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:00:28,449 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:00:28,449 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:00:28,449 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:00:28,450 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:00:28,450 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:00:28,451 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:00:28,704 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:28,706 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:28,707 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:00:28,726 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:29,000 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:00:29,000 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:29,002 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:00:29,003 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:00:29,003 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:29,004 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:29,005 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:29,005 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:29,006 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:00:29,007 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:29,007 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:29,007 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:00:29,008 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:29,009 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:29,010 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:29,010 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:29,011 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:00:29,011 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:29,011 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:00:29,012 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:00:29,012 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:00:29,037 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:00:29,315 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:29,316 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:29,317 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:00:29,317 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:29,594 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:00:29,596 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:29,596 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:00:29,597 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:00:29,597 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:29,598 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:29,598 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:29,600 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:29,600 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:29,600 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:00:29,601 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:29,601 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:00:29,602 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:29,603 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:29,603 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:29,604 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:29,604 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:29,604 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:00:29,605 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:00:29,605 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:00:29,605 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:00:29,606 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:00:29,883 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:29,884 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:29,885 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:00:29,885 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:30,160 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:00:30,161 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:30,161 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:00:30,161 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:00:30,161 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:30,162 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:30,163 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:30,164 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:30,165 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:00:30,166 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:30,166 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:30,166 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:00:30,167 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:30,168 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:30,168 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:30,169 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:30,170 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:00:30,170 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:30,170 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:00:30,171 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:00:30,171 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:00:30,372 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:00:30,372 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:00:30,373 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:00:30,373 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:00:30,374 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:00:30,374 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:00:30,376 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:00:30,694 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:30,694 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:30,695 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:00:30,696 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:31,001 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:00:31,002 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:31,003 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:00:31,003 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:00:31,004 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:31,005 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:31,007 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:31,008 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:31,009 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:00:31,009 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:31,010 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:31,010 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:00:31,010 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:31,011 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:31,013 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:31,013 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:31,013 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:00:31,014 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:31,014 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:00:31,014 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:00:31,015 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:00:31,039 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:00:31,382 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:31,384 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:31,384 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:00:31,385 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:31,705 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:00:31,707 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:31,708 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:00:31,708 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:00:31,709 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:31,710 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:31,712 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:31,712 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:31,713 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:31,713 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:00:31,714 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:31,714 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:00:31,714 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:31,716 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:31,716 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:31,717 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:31,717 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:31,717 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:00:31,718 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:00:31,718 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:00:31,718 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:00:31,737 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:00:32,045 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:32,045 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:32,046 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:00:32,046 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:32,362 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:00:32,363 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:32,363 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:00:32,364 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:00:32,364 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:32,365 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:32,366 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:32,366 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:32,367 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:00:32,367 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:32,367 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:32,368 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:00:32,368 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:32,369 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:32,370 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:32,370 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:32,371 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:32,371 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:00:32,371 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:00:32,371 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:00:32,372 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:00:32,574 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:00:32,575 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:00:32,575 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:00:32,576 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:00:32,576 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:00:32,576 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:00:32,590 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:00:32,921 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:32,922 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:32,922 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:00:32,943 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:33,292 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:00:33,293 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:33,293 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:00:33,294 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:00:33,294 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:33,297 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:33,297 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:33,298 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:33,298 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:00:33,299 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:33,299 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:33,299 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:00:33,299 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:33,301 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:33,302 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:33,302 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:33,303 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:00:33,303 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:33,303 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:00:33,304 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:00:33,304 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:00:33,315 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:00:33,671 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:33,671 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:33,672 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:00:33,674 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:34,015 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:00:34,016 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:34,016 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:00:34,017 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:00:34,017 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:34,018 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:34,019 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:34,019 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:34,020 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:00:34,020 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:34,020 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:34,021 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:00:34,022 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:34,023 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:34,023 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:34,024 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:34,024 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:00:34,024 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:34,025 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:00:34,025 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:00:34,025 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:00:34,026 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:00:34,336 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:34,338 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:34,338 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:00:34,340 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:34,618 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:00:34,619 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:34,619 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:00:34,620 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:00:34,621 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:34,622 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:34,623 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:34,623 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:34,624 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:00:34,625 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:34,625 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:34,625 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:00:34,626 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:34,627 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:34,627 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:34,628 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:34,628 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:00:34,628 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:34,629 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:00:34,629 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:00:34,629 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:00:34,832 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:00:34,833 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:00:34,834 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:00:34,834 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:00:34,835 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:00:34,835 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:00:34,837 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:00:35,118 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:35,120 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:35,120 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:00:35,146 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:35,463 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:00:35,464 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:35,465 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:00:35,466 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:00:35,466 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:35,467 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:35,468 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:35,469 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:35,469 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:00:35,470 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:35,470 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:35,470 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:00:35,471 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:35,473 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:35,474 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:35,474 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:35,475 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:35,475 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:00:35,475 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:00:35,475 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:00:35,476 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:00:35,478 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:00:35,756 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:35,757 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:35,757 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:00:35,759 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:36,018 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:00:36,019 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:36,019 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:00:36,020 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:00:36,020 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:36,021 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:36,022 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:36,023 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:36,023 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:36,023 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:00:36,024 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:36,025 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:00:36,025 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:36,026 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:36,026 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:36,027 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:36,027 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:36,028 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:00:36,028 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:00:36,028 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:00:36,028 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:00:36,044 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:00:36,324 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:36,325 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:36,325 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:00:36,326 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:36,599 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:00:36,599 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:36,600 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:00:36,601 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:00:36,601 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:36,604 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:36,605 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:36,606 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:36,606 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:00:36,606 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:36,607 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:36,608 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:00:36,609 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:36,610 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:36,610 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:36,611 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:36,611 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:36,612 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:00:36,612 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:00:36,612 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:00:36,613 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:00:36,820 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:00:36,820 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:00:36,820 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:00:36,821 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:00:36,821 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:00:36,822 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:00:36,822 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:00:37,077 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:37,078 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:37,078 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:00:37,079 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:37,329 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:00:37,330 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:37,331 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:00:37,331 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:00:37,331 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:37,332 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:37,334 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:37,335 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:37,336 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:00:37,336 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:37,336 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:37,336 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:00:37,337 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:37,337 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:37,338 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:37,339 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:37,339 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:00:37,339 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:37,340 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:00:37,340 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:00:37,340 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:00:37,361 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:00:37,653 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:37,654 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:37,654 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:00:37,655 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:37,894 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:00:37,895 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:37,896 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:00:37,896 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:00:37,897 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:37,897 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:37,898 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:37,899 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:37,900 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:37,900 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:00:37,901 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:37,901 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:00:37,901 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:37,902 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:37,903 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:37,904 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:37,904 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:00:37,904 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:37,904 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:00:37,905 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:00:37,905 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:00:37,906 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:00:38,159 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:38,160 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:38,160 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:00:38,161 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:38,443 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:00:38,444 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:38,445 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:00:38,446 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:00:38,447 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:38,448 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:38,449 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:38,450 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:38,450 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:00:38,451 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:38,451 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:38,452 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:00:38,452 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:38,453 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:38,454 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:38,454 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:38,455 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:38,455 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:00:38,455 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:00:38,456 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:00:38,456 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:00:38,654 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:00:38,654 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:00:38,655 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:00:38,655 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:00:38,656 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:00:38,656 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:00:38,657 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:00:38,931 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:38,932 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:38,933 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:00:38,933 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:39,176 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:00:39,176 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:39,177 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:00:39,178 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:00:39,178 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:39,178 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:39,180 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:39,181 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:39,182 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:00:39,182 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:39,182 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:39,183 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:00:39,183 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:39,184 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:39,185 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:39,185 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:39,186 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:00:39,186 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:39,186 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:00:39,187 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:00:39,188 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:00:39,188 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:00:39,450 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:39,451 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:39,451 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:00:39,451 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:39,701 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:00:39,702 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:39,702 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:00:39,703 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:00:39,703 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:39,705 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:39,706 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:39,706 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:39,706 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:00:39,707 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:39,708 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:39,708 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:00:39,708 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:39,709 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:39,710 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:39,710 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:39,711 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:00:39,711 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:00:39,712 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:39,712 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:00:39,712 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:00:39,713 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:00:39,974 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:39,976 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:39,977 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:00:39,978 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:40,235 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:00:40,236 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:40,236 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:00:40,237 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:00:40,238 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:40,239 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:40,240 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:40,240 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:40,241 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:40,241 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:00:40,242 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:40,243 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:00:40,243 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:40,244 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:40,245 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:40,245 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:40,246 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:00:40,246 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:40,246 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:00:40,247 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:00:40,247 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:00:40,457 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:00:40,457 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:00:40,458 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:00:40,458 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:00:40,459 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:00:40,460 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:00:40,460 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:00:40,710 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:40,711 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:40,711 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:00:40,722 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:40,952 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:00:40,953 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:40,953 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:00:40,954 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:00:40,954 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:40,955 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:40,955 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:40,957 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:40,957 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:40,957 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:00:40,958 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:40,958 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:00:40,959 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:40,959 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:40,960 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:40,960 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:40,961 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:00:40,961 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:40,961 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:00:40,962 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:00:40,962 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:00:40,963 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:00:41,238 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:41,240 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:41,240 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:00:41,252 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:41,498 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:00:41,499 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:41,499 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:00:41,500 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:00:41,500 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:41,502 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:41,503 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:41,504 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:41,504 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:00:41,505 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:41,505 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:41,505 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:00:41,506 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:41,506 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:41,507 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:41,507 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:41,508 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:00:41,509 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:41,509 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:00:41,509 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:00:41,510 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:00:41,510 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:00:41,785 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:41,786 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:41,787 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:00:41,787 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:42,032 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:00:42,033 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:42,034 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:00:42,034 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:00:42,036 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:42,038 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:42,039 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:42,040 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:42,040 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:42,041 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:00:42,042 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:42,042 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:00:42,042 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:42,043 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:42,044 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:42,044 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:42,045 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:42,045 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:00:42,046 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:00:42,046 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:00:42,046 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:00:42,246 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:00:42,247 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:00:42,248 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:00:42,249 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:00:42,249 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:00:42,250 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:00:42,250 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:00:42,507 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:42,507 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:42,508 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:00:42,524 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:42,763 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:00:42,764 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:42,765 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:00:42,765 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:00:42,765 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:42,766 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:42,767 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:42,768 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:42,768 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:00:42,769 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:42,769 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:42,770 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:00:42,770 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:42,771 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:42,772 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:42,773 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:42,773 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:00:42,774 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:00:42,774 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:00:42,774 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:42,774 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:00:42,776 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:00:43,074 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:43,075 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:43,075 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:00:43,094 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:43,396 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:00:43,397 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:43,397 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:00:43,398 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:00:43,399 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:43,400 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:43,400 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:43,400 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:43,401 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:00:43,401 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:43,402 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:43,402 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:00:43,402 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:43,404 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:43,404 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:43,405 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:43,405 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:43,406 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:00:43,406 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:00:43,406 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:00:43,407 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:00:43,431 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:00:43,720 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:43,720 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:43,722 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:00:43,723 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:44,003 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:00:44,005 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:44,006 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:00:44,006 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:00:44,007 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:44,007 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:44,008 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:44,009 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:44,010 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:44,010 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:00:44,011 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:44,011 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:00:44,011 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:44,013 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:44,014 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:44,014 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:44,015 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:00:44,015 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:44,015 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:00:44,016 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:00:44,016 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:00:44,221 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:00:44,222 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:00:44,223 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:00:44,223 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:00:44,224 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:00:44,224 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:00:44,225 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:00:44,489 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:44,490 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:44,490 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:00:44,490 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:44,741 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:00:44,741 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:44,743 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:00:44,743 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:00:44,744 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:44,744 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:44,745 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:44,746 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:44,746 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:00:44,747 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:44,747 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:44,747 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:00:44,748 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:44,750 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:44,750 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:44,751 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:44,751 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:00:44,751 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:44,752 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:00:44,752 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:00:44,752 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:00:44,778 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:00:45,038 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:45,039 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:45,040 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:00:45,040 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:45,298 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:00:45,300 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:45,300 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:00:45,301 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:00:45,301 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:45,302 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:45,303 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:45,303 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:45,304 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:00:45,304 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:45,305 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:45,305 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:00:45,305 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:45,306 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:45,307 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:45,308 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:45,308 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:00:45,309 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:45,309 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:00:45,309 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:00:45,310 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:00:45,324 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:00:45,637 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:45,638 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:45,640 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:00:45,663 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:45,956 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:00:45,957 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:45,958 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:00:45,958 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:00:45,958 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:45,959 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:45,960 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:45,960 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:45,961 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:00:45,962 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:45,962 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:45,962 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:00:45,963 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:45,964 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:45,964 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:45,965 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:45,965 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:00:45,965 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:00:45,965 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:45,966 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:00:45,966 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:00:46,162 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:00:46,163 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:00:46,163 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:00:46,164 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:00:46,164 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:00:46,164 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:00:46,165 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:00:46,437 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:46,438 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:46,439 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:00:46,460 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:46,713 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:00:46,714 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:46,715 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:00:46,716 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:00:46,716 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:46,717 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:46,717 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:46,718 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:46,719 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:00:46,720 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:46,720 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:46,720 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:00:46,721 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:46,721 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:46,722 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:46,723 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:46,723 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:00:46,723 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:46,723 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:00:46,724 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:00:46,724 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:00:46,737 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:00:47,012 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:47,012 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:47,012 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:00:47,013 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:47,271 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:00:47,271 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:47,272 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:00:47,272 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:00:47,273 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:47,275 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:47,276 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:47,277 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:47,277 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:47,278 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:00:47,279 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:47,279 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:00:47,279 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:47,280 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:47,281 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:47,282 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:47,282 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:00:47,282 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:47,282 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:00:47,283 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:00:47,283 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:00:47,284 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:00:47,536 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:47,537 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:47,538 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:00:47,539 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:47,773 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:00:47,775 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:47,776 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:00:47,776 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:00:47,777 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:47,779 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:47,779 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:47,781 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:47,781 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:00:47,782 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:47,782 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:47,782 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:00:47,783 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:47,783 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:47,784 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:47,784 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:47,784 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:00:47,784 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:47,786 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:00:47,786 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:00:47,786 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:00:47,994 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:00:47,995 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:00:47,996 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:00:47,996 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:00:47,997 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:00:47,998 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:00:47,999 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:00:48,264 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:48,265 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:48,265 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:00:48,267 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:48,510 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:00:48,512 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:48,514 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:00:48,514 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:00:48,515 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:48,515 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:48,516 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:48,516 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:48,518 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:00:48,518 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:48,518 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:48,519 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:00:48,519 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:48,520 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:48,521 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:48,521 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:48,522 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:00:48,522 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:48,522 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:00:48,523 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:00:48,523 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:00:48,524 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:00:48,793 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:48,794 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:48,794 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:00:48,796 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:49,042 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:00:49,043 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:49,043 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:00:49,044 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:00:49,044 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:49,045 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:49,046 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:49,046 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:49,047 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:00:49,047 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:49,048 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:49,048 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:00:49,048 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:49,049 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:49,050 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:49,051 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:49,051 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:49,051 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:00:49,052 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:00:49,052 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:00:49,053 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:00:49,053 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:00:49,305 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:49,306 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:49,307 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:00:49,307 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:49,572 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:00:49,572 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:49,573 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:00:49,574 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:00:49,574 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:49,577 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:49,577 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:49,578 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:49,579 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:49,579 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:00:49,580 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:49,580 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:00:49,581 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:49,582 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:49,582 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:49,583 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:49,583 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:00:49,584 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:49,584 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:00:49,584 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:00:49,585 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:00:49,777 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:00:49,778 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:00:49,779 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:00:49,779 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:00:49,780 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:00:49,780 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:00:49,782 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:00:50,009 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:50,011 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:50,011 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:00:50,013 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:50,254 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:00:50,254 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:50,256 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:00:50,256 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:00:50,257 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:50,257 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:50,258 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:50,259 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:50,259 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:50,259 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:00:50,260 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:50,260 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:00:50,261 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:50,262 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:50,262 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:50,263 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:50,263 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:00:50,263 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:50,264 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:00:50,265 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:00:50,265 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:00:50,289 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:00:50,534 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:50,535 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:50,535 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:00:50,536 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:50,770 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:00:50,771 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:50,771 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:00:50,772 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:00:50,772 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:50,773 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:50,774 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:50,774 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:50,775 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:00:50,776 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:50,776 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:50,776 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:00:50,777 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:50,778 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:50,778 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:50,779 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:50,779 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:00:50,779 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:50,780 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:00:50,780 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:00:50,780 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:00:50,782 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:00:51,035 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:51,037 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:51,038 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:00:51,039 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:51,264 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:00:51,265 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:51,265 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:00:51,266 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:00:51,266 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:51,268 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:51,269 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:51,270 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:51,270 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:00:51,271 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:51,271 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:51,272 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:00:51,273 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:51,274 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:51,274 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:51,275 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:51,275 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:00:51,275 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:00:51,276 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:51,276 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:00:51,276 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:00:51,471 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:00:51,476 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:00:51,476 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:00:51,477 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:00:51,478 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:00:51,478 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:00:51,479 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:00:51,731 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:51,732 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:51,732 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:00:51,752 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:52,016 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:00:52,017 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:52,018 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:00:52,019 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:00:52,019 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:52,021 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:52,021 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:52,021 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:52,023 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:00:52,023 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:52,023 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:52,024 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:00:52,024 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:52,025 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:52,026 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:52,026 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:52,027 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:00:52,027 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:00:52,027 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:52,027 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:00:52,027 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:00:52,052 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:00:52,297 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:52,298 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:52,299 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:00:52,319 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:52,577 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:00:52,577 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:52,578 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:00:52,578 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:00:52,580 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:52,581 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:52,582 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:52,583 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:52,583 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:52,584 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:00:52,584 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:52,586 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:00:52,586 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:52,587 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:52,587 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:52,588 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:52,588 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:00:52,589 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:52,589 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:00:52,589 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:00:52,589 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:00:52,590 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:00:52,903 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:52,904 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:52,904 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:00:52,905 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:53,270 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:00:53,271 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:53,271 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:00:53,272 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:00:53,272 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:53,273 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:53,274 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:53,275 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:53,276 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:00:53,276 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:53,276 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:53,277 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:00:53,277 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:53,278 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:53,279 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:53,279 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:53,279 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:00:53,279 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:00:53,280 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:53,280 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:00:53,281 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:00:53,479 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:00:53,479 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:00:53,479 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:00:53,480 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:00:53,480 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:00:53,481 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:00:53,495 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:00:53,857 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:53,859 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:53,859 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:00:53,882 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:54,271 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:00:54,272 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:54,272 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:00:54,272 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:00:54,273 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:54,274 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:54,274 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:54,275 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:54,276 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:00:54,276 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:54,277 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:54,277 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:00:54,277 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:54,278 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:54,279 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:54,280 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:54,280 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:54,281 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:00:54,281 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:00:54,281 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:00:54,282 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:00:54,283 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:00:54,648 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:54,649 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:54,649 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:00:54,650 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:55,072 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:00:55,073 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:55,074 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:00:55,075 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:00:55,075 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:55,077 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:55,077 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:55,078 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:55,079 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:00:55,079 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:55,080 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:55,081 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:00:55,081 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:55,083 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:55,084 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:55,084 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:55,085 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:00:55,085 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:55,086 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:00:55,087 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:00:55,087 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:00:55,088 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:00:55,532 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:55,533 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:55,534 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:00:55,534 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:55,981 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:00:55,982 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:55,982 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:00:55,982 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:00:55,982 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:55,984 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:55,986 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:55,986 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:55,987 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:55,987 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:00:55,988 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:55,988 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:00:55,988 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:55,989 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:55,990 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:55,990 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:55,992 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:00:55,992 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:55,992 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:00:55,993 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:00:55,993 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:00:56,193 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:00:56,194 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:00:56,195 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:00:56,196 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:00:56,196 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:00:56,197 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:00:56,198 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:00:56,624 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:56,625 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:56,625 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:00:56,627 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:57,033 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:00:57,034 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:57,035 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:00:57,036 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:00:57,036 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:57,038 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:57,039 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:57,040 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:57,040 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:57,040 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:00:57,041 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:57,041 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:00:57,042 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:57,044 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:57,045 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:57,045 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:57,046 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:57,046 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:00:57,047 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:00:57,047 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:00:57,048 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:00:57,049 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:00:57,446 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:57,448 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:57,448 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:00:57,467 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:57,886 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:00:57,887 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:57,887 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:00:57,888 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:00:57,888 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:57,890 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:57,890 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:57,891 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:57,891 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:00:57,892 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:57,893 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:57,893 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:00:57,894 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:00:57,894 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:00:57,895 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:00:57,896 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:00:57,896 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:00:57,896 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:00:57,896 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:00:57,897 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:00:57,897 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:00:57,915 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:00:58,372 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:58,374 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:58,374 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:00:58,376 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:58,796 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:00:58,797 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:58,797 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:00:58,798 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:00:58,798 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:58,799 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:58,800 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:58,800 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:58,801 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:00:58,801 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:58,802 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:58,802 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:00:58,802 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:00:58,804 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:00:58,805 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:00:58,806 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:00:58,807 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:00:58,807 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:00:58,807 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:00:58,808 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:00:58,808 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:00:59,012 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:00:59,012 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:00:59,012 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:00:59,013 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:00:59,013 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:00:59,013 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:00:59,014 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:00:59,403 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:00:59,405 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:59,405 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:00:59,406 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:59,842 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:00:59,843 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:59,844 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:00:59,844 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:00:59,845 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:59,846 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:59,847 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:59,848 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:59,848 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:00:59,849 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:59,850 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:00:59,850 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:00:59,850 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:00:59,851 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:00:59,852 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:00:59,853 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:00:59,853 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:00:59,853 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:00:59,854 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:00:59,854 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:00:59,854 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:00:59,855 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:01:00,251 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:00,253 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:00,253 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:01:00,254 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:00,628 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:01:00,629 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:00,629 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:01:00,630 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:01:00,631 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:00,633 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:01:00,635 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:01:00,636 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:01:00,636 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:01:00,636 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:01:00,637 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:00,637 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:01:00,638 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:00,639 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:01:00,639 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:01:00,640 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:01:00,640 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:01:00,640 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:01:00,641 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:01:00,642 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:01:00,642 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:01:00,667 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:01:01,039 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:01,040 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:01,040 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:01:01,051 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:01,409 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:01:01,409 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:01,411 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:01:01,411 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:01:01,411 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:01,412 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:01:01,413 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:01:01,413 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:01:01,414 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:01:01,414 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:01:01,414 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:01,415 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:01:01,415 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:01,417 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:01:01,417 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:01:01,418 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:01:01,418 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:01:01,418 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:01:01,419 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:01:01,420 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:01:01,420 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:01:01,617 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:01:01,618 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:01:01,619 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:01:01,619 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:01:01,619 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:01:01,620 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:01:01,621 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:01:02,011 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:02,013 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:02,013 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:01:02,015 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:02,368 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:01:02,369 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:02,369 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:01:02,371 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:01:02,371 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:02,372 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:01:02,373 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:01:02,374 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:01:02,374 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:01:02,375 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:01:02,375 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:02,376 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:01:02,377 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:02,378 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:01:02,378 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:01:02,379 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:01:02,379 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:01:02,380 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:01:02,380 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:01:02,380 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:01:02,380 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:01:02,381 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:01:02,730 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:02,732 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:02,732 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:01:02,732 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:03,107 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:01:03,108 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:03,109 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:01:03,109 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:01:03,110 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:03,111 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:01:03,111 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:01:03,112 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:01:03,112 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:01:03,113 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:01:03,113 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:03,114 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:01:03,114 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:03,115 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:01:03,116 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:01:03,116 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:01:03,117 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:01:03,117 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:01:03,117 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:01:03,117 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:01:03,118 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:01:03,135 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:01:03,556 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:03,557 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:03,558 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:01:03,584 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:03,958 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:01:03,959 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:03,960 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:01:03,961 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:01:03,961 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:03,963 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:01:03,964 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:01:03,965 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:01:03,965 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:01:03,965 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:01:03,966 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:03,966 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:01:03,967 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:03,967 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:01:03,969 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:01:03,969 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:01:03,970 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:01:03,970 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:01:03,970 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:01:03,971 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:01:03,971 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:01:04,175 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:01:04,176 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:01:04,177 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:01:04,177 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:01:04,178 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:01:04,178 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:01:04,179 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:01:04,564 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:04,565 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:04,565 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:01:04,577 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:04,932 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:01:04,933 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:04,933 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:01:04,934 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:01:04,934 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:04,935 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:01:04,936 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:01:04,937 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:01:04,938 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:01:04,938 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:01:04,939 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:04,939 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:01:04,939 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:04,941 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:01:04,941 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:01:04,942 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:01:04,942 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:01:04,943 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:01:04,943 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:01:04,943 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:01:04,944 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:01:04,944 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:01:05,307 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:05,308 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:05,308 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:01:05,309 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:05,699 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:01:05,699 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:05,700 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:01:05,700 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:01:05,702 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:05,703 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:01:05,704 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:01:05,705 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:01:05,706 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:01:05,706 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:01:05,706 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:05,707 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:01:05,707 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:05,708 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:01:05,709 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:01:05,709 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:01:05,710 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:01:05,710 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:01:05,710 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:01:05,711 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:01:05,711 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:01:05,724 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:01:06,134 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:06,136 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:06,136 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:01:06,158 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:06,495 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:01:06,496 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:06,497 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:01:06,498 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:01:06,499 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:06,500 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:01:06,502 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:01:06,502 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:01:06,503 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:01:06,503 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:01:06,504 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:06,504 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:01:06,504 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:06,506 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:01:06,507 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:01:06,507 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:01:06,508 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:01:06,508 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:01:06,508 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:01:06,508 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:01:06,509 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:01:06,698 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:01:06,699 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:01:06,700 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:01:06,701 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:01:06,701 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:01:06,702 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:01:06,703 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:01:07,079 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:07,080 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:07,080 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:01:07,081 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:07,430 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:01:07,431 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:07,431 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:01:07,432 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:01:07,432 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:07,433 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:01:07,433 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:01:07,434 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:01:07,435 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:01:07,435 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:01:07,436 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:07,436 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:01:07,436 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:07,437 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:01:07,438 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:01:07,438 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:01:07,439 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:01:07,439 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:01:07,439 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:01:07,439 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:01:07,440 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:01:07,440 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:01:07,811 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:07,812 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:07,812 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:01:07,813 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:08,180 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:01:08,182 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:08,182 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:01:08,183 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:01:08,184 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:08,185 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:01:08,186 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:01:08,186 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:01:08,186 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:01:08,187 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:01:08,187 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:08,188 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:01:08,188 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:08,189 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:01:08,190 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:01:08,190 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:01:08,191 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:01:08,191 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:01:08,191 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:01:08,192 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:01:08,192 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:01:08,207 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:01:08,600 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:08,602 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:08,602 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:01:08,603 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:08,959 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:01:08,961 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:08,961 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:01:08,962 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:01:08,962 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:08,963 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:01:08,964 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:01:08,964 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:01:08,965 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:01:08,965 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:01:08,966 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:08,966 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:01:08,967 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:08,968 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:01:08,969 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:01:08,969 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:01:08,970 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:01:08,970 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:01:08,970 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:01:08,971 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:01:08,971 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:01:09,170 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:01:09,171 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:01:09,171 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:01:09,171 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:01:09,172 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:01:09,173 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:01:09,174 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:01:09,529 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:09,530 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:09,531 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:01:09,532 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:09,885 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:01:09,885 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:09,887 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:01:09,887 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:01:09,888 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:09,890 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:01:09,890 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:01:09,892 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:01:09,892 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:01:09,893 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:09,893 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:01:09,893 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:01:09,894 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:09,895 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:01:09,895 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:01:09,896 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:01:09,896 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:01:09,896 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:01:09,897 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:01:09,898 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:01:09,898 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:01:09,924 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:01:10,289 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:10,289 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:10,291 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:01:10,313 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:10,655 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:01:10,656 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:10,658 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:01:10,659 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:01:10,659 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:10,660 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:01:10,661 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:01:10,662 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:01:10,663 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:01:10,663 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:01:10,663 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:10,664 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:01:10,665 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:10,665 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:01:10,666 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:01:10,667 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:01:10,667 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:01:10,668 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:01:10,668 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:01:10,668 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:01:10,669 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:01:10,669 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:01:10,985 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:10,987 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:10,988 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:01:11,003 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:11,333 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:01:11,333 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:11,333 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:01:11,333 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:01:11,335 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:11,335 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:01:11,336 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:01:11,337 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:01:11,337 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:01:11,337 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:01:11,338 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:11,339 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:01:11,339 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:11,340 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:01:11,341 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:01:11,341 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:01:11,342 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:01:11,342 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:01:11,343 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:01:11,343 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:01:11,343 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:01:11,545 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:01:11,546 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:01:11,546 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:01:11,547 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:01:11,548 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:01:11,548 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:01:11,549 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:01:11,853 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:11,855 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:11,855 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:01:11,856 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:12,185 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:01:12,186 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:12,187 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:01:12,187 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:01:12,188 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:12,189 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:01:12,190 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:01:12,191 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:01:12,192 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:01:12,192 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:01:12,193 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:12,193 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:01:12,193 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:12,194 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:01:12,195 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:01:12,195 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:01:12,196 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:01:12,196 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:01:12,196 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:01:12,197 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:01:12,197 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:01:12,198 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:01:12,565 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:12,567 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:12,567 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:01:12,583 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:12,929 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:01:12,930 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:12,930 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:01:12,931 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:01:12,932 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:12,933 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:01:12,935 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:01:12,936 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:01:12,936 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:01:12,937 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:01:12,937 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:12,938 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:01:12,938 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:12,939 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:01:12,941 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:01:12,941 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:01:12,942 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:01:12,942 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:01:12,942 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:01:12,943 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:01:12,943 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:01:12,944 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:01:13,338 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:13,339 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:13,340 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:01:13,341 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:13,723 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:01:13,725 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:13,726 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:01:13,726 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:01:13,727 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:13,728 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:01:13,729 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:01:13,730 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:01:13,730 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:01:13,731 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:13,731 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:01:13,732 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:01:13,732 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:13,733 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:01:13,734 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:01:13,735 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:01:13,735 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:01:13,735 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:01:13,736 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:01:13,736 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:01:13,736 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:01:13,942 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:01:13,943 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:01:13,944 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:01:13,944 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:01:13,945 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:01:13,945 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:01:13,946 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:01:14,330 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:14,331 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:14,332 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:01:14,333 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:14,699 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:01:14,700 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:14,700 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:01:14,702 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:01:14,702 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:14,704 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:01:14,706 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:01:14,706 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:01:14,707 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:01:14,707 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:01:14,708 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:14,708 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:01:14,708 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:14,709 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:01:14,710 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:01:14,710 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:01:14,711 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:01:14,711 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:01:14,711 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:01:14,712 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:01:14,712 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:01:14,735 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:01:15,113 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:15,114 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:15,114 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:01:15,115 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:15,507 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:01:15,507 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:15,508 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:01:15,509 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:01:15,509 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:15,511 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:01:15,511 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:01:15,512 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:01:15,512 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:01:15,513 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:01:15,513 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:15,514 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:01:15,514 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:15,515 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:01:15,516 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:01:15,517 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:01:15,517 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:01:15,517 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:01:15,517 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:01:15,518 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:01:15,518 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:01:15,519 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:01:15,918 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:15,919 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:15,920 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:01:15,938 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:16,303 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:01:16,304 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:16,304 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:01:16,305 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:01:16,306 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:16,308 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:01:16,309 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:01:16,310 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:01:16,310 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:01:16,310 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:01:16,312 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:16,312 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:01:16,312 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:16,313 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:01:16,314 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:01:16,314 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:01:16,315 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:01:16,315 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:01:16,315 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:01:16,316 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:01:16,316 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:01:16,521 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:01:16,522 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:01:16,522 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:01:16,523 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:01:16,524 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:01:16,524 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:01:16,525 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:01:16,891 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:16,892 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:16,892 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:01:16,893 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:17,243 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:01:17,244 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:17,244 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:01:17,245 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:01:17,245 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:17,246 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:01:17,246 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:01:17,247 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:01:17,247 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:01:17,248 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:01:17,248 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:17,248 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:01:17,249 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:17,250 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:01:17,250 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:01:17,251 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:01:17,251 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:01:17,252 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:01:17,252 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:01:17,252 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:01:17,253 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:01:17,272 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:01:17,659 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:17,659 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:17,660 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:01:17,661 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:18,003 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:01:18,004 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:18,005 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:01:18,006 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:01:18,006 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:18,007 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:01:18,008 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:01:18,009 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:01:18,010 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:01:18,010 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:01:18,011 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:18,011 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:01:18,011 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:18,012 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:01:18,013 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:01:18,014 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:01:18,014 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:01:18,014 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:01:18,014 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:01:18,015 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:01:18,015 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:01:18,027 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:01:18,381 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:18,383 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:18,384 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:01:18,385 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:18,727 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:01:18,729 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:18,729 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:01:18,730 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:01:18,730 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:18,732 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:01:18,733 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:01:18,734 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:01:18,735 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:01:18,735 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:01:18,736 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:18,736 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:01:18,737 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:18,737 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:01:18,738 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:01:18,739 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:01:18,739 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:01:18,739 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:01:18,740 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:01:18,740 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:01:18,740 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:01:18,940 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:01:18,941 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:01:18,942 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:01:18,943 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:01:18,943 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:01:18,944 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:01:18,945 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:01:19,319 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:19,319 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:19,319 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:01:19,344 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:19,695 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:01:19,695 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:19,696 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:01:19,697 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:01:19,697 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:19,698 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:01:19,699 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:01:19,699 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:01:19,700 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:01:19,700 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:19,701 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:01:19,701 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:01:19,701 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:19,702 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:01:19,703 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:01:19,704 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:01:19,704 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:01:19,705 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:01:19,705 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:01:19,705 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:01:19,705 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:01:19,706 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:01:20,065 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:20,066 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:20,066 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:01:20,067 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:20,412 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:01:20,413 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:20,414 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:01:20,414 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:01:20,415 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:20,416 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:01:20,418 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:01:20,419 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:01:20,419 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:01:20,419 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:01:20,420 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:20,420 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:01:20,421 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:20,421 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:01:20,423 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:01:20,423 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:01:20,424 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:01:20,424 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:01:20,424 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:01:20,424 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:01:20,425 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:01:20,425 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:01:20,780 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:20,781 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:20,782 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:01:20,806 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:21,153 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:01:21,154 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:21,154 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:01:21,155 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:01:21,155 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:21,156 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:01:21,157 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:01:21,158 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:01:21,158 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:01:21,159 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:01:21,159 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:21,160 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:01:21,160 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:21,161 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:01:21,162 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:01:21,163 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:01:21,163 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:01:21,163 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:01:21,164 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:01:21,164 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:01:21,164 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:01:21,362 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:01:21,363 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:01:21,363 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:01:21,364 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:01:21,364 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:01:21,365 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:01:21,365 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:01:21,689 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:21,690 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:21,690 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:01:21,691 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:22,046 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:01:22,047 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:22,048 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:01:22,049 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:01:22,049 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:22,050 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:01:22,051 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:01:22,051 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:01:22,052 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:01:22,052 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:22,052 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:01:22,053 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:01:22,053 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:22,054 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:01:22,055 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:01:22,056 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:01:22,056 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:01:22,056 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:01:22,057 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:01:22,057 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:01:22,057 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:01:22,058 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:01:22,407 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:22,409 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:22,410 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:01:22,411 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:22,771 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:01:22,772 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:22,772 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:01:22,772 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:01:22,774 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:22,774 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:01:22,776 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:01:22,777 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:01:22,778 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:01:22,778 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:01:22,778 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:22,779 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:01:22,779 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:22,780 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:01:22,781 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:01:22,782 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:01:22,783 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:01:22,783 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:01:22,783 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:01:22,784 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:01:22,784 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:01:22,785 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:01:23,170 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:23,171 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:23,172 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:01:23,188 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:23,568 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:01:23,569 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:23,571 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:01:23,572 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:01:23,572 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:23,574 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:01:23,575 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:01:23,576 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:01:23,577 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:01:23,577 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:01:23,578 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:23,579 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:01:23,579 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:23,580 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:01:23,581 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:01:23,581 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:01:23,581 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:01:23,582 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:01:23,582 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:01:23,582 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:01:23,583 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:01:23,778 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:01:23,779 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:01:23,780 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:01:23,781 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:01:23,781 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:01:23,782 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:01:23,783 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:01:24,141 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:24,142 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:24,143 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:01:24,144 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:24,500 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:01:24,501 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:24,502 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:01:24,503 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:01:24,504 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:24,506 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:01:24,507 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:01:24,508 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:01:24,508 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:01:24,509 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:01:24,509 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:24,510 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:01:24,510 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:24,511 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:01:24,512 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:01:24,513 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:01:24,513 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:01:24,513 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:01:24,514 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:01:24,514 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:01:24,514 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:01:24,536 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:01:24,900 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:24,901 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:24,903 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:01:24,904 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:25,252 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:01:25,252 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:25,253 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:01:25,253 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:01:25,254 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:25,254 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:01:25,255 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:01:25,255 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:01:25,256 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:01:25,256 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:01:25,257 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:25,257 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:01:25,258 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:25,259 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:01:25,260 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:01:25,260 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:01:25,261 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:01:25,261 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:01:25,261 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:01:25,261 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:01:25,262 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:01:25,278 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:01:25,705 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:25,706 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:25,707 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:01:25,708 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:26,096 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:01:26,097 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:26,097 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:01:26,098 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:01:26,098 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:26,099 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:01:26,099 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:01:26,100 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:01:26,100 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:01:26,100 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:01:26,101 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:26,101 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:01:26,101 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:26,102 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:01:26,103 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:01:26,104 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:01:26,104 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:01:26,105 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:01:26,105 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:01:26,105 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:01:26,105 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:01:26,313 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:01:26,313 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:01:26,314 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:01:26,314 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:01:26,314 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:01:26,315 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:01:26,316 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:01:26,664 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:26,665 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:26,666 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:01:26,667 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:27,023 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:01:27,024 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:27,024 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:01:27,026 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:01:27,026 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:27,028 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:01:27,029 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:01:27,030 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:01:27,030 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:01:27,031 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:01:27,031 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:27,031 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:01:27,032 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:27,032 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:01:27,033 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:01:27,034 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:01:27,035 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:01:27,035 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:01:27,035 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:01:27,035 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:01:27,036 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:01:27,036 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:01:27,375 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:27,376 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:27,376 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:01:27,378 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:27,733 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:01:27,734 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:27,734 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:01:27,735 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:01:27,736 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:27,738 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:01:27,738 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:01:27,739 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:01:27,739 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:01:27,740 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:01:27,740 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:27,740 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:01:27,741 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:27,742 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:01:27,743 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:01:27,743 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:01:27,744 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:01:27,744 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:01:27,745 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:01:27,745 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:01:27,745 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:01:27,746 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:01:28,107 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:28,108 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:28,108 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:01:28,109 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:28,445 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:01:28,446 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:28,446 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:01:28,447 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:01:28,448 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:28,449 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:01:28,450 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:01:28,451 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:01:28,451 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:01:28,451 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:01:28,452 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:28,452 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:01:28,453 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:28,454 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:01:28,455 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:01:28,455 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:01:28,456 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:01:28,456 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:01:28,456 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:01:28,457 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:01:28,457 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:01:28,657 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:01:28,658 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:01:28,659 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:01:28,659 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:01:28,659 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:01:28,660 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:01:28,673 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:01:29,049 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:29,050 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:29,051 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:01:29,052 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:29,398 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:01:29,399 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:29,400 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:01:29,400 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:01:29,401 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:29,402 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:01:29,402 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:01:29,402 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:01:29,404 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:01:29,404 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:01:29,404 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:29,405 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:01:29,405 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:29,406 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:01:29,407 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:01:29,407 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:01:29,407 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:01:29,408 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:01:29,408 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:01:29,408 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:01:29,408 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:01:29,409 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:01:29,784 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:29,785 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:29,786 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:01:29,804 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:30,170 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:01:30,171 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:30,172 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:01:30,172 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:01:30,172 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:30,173 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:01:30,174 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:01:30,175 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:01:30,176 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:01:30,176 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:30,176 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:01:30,176 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:01:30,178 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:30,178 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:01:30,179 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:01:30,180 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:01:30,180 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:01:30,180 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:01:30,181 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:01:30,181 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:01:30,181 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:01:30,207 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:01:30,553 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:30,553 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:30,554 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:01:30,554 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:30,921 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:01:30,921 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:30,922 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:01:30,923 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:01:30,923 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:30,924 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:01:30,924 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:01:30,926 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:01:30,927 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:01:30,928 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:01:30,928 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:30,929 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:01:30,929 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:30,930 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:01:30,930 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:01:30,931 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:01:30,931 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:01:30,931 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:01:30,932 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:01:30,932 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:01:30,932 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:01:31,141 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:01:31,141 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:01:31,142 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:01:31,142 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:01:31,143 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:01:31,143 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:01:31,145 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:01:31,484 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:31,484 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:31,485 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:01:31,486 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:31,803 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:01:31,804 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:31,805 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:01:31,806 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:01:31,806 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:31,807 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:01:31,808 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:01:31,808 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:01:31,809 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:01:31,809 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:01:31,810 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:31,810 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:01:31,811 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:31,812 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:01:31,813 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:01:31,814 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:01:31,814 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:01:31,815 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:01:31,815 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:01:31,815 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:01:31,816 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:01:31,816 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:01:32,151 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:32,152 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:32,152 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:01:32,153 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:32,503 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:01:32,504 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:32,505 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:01:32,506 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:01:32,506 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:32,508 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:01:32,509 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:01:32,510 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:01:32,511 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:01:32,511 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:01:32,511 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:32,512 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:01:32,512 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:32,513 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:01:32,514 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:01:32,514 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:01:32,515 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:01:32,515 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:01:32,516 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:01:32,516 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:01:32,516 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:01:32,518 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:01:32,911 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:32,912 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:32,913 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:01:32,914 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:33,281 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:01:33,282 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:33,282 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:01:33,283 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:01:33,283 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:33,284 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:01:33,285 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:01:33,285 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:01:33,286 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:01:33,287 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:01:33,287 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:33,287 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:01:33,288 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:33,289 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:01:33,290 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:01:33,290 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:01:33,291 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:01:33,291 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:01:33,291 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:01:33,291 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:01:33,292 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:01:33,498 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:01:33,499 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:01:33,500 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:01:33,500 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:01:33,501 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:01:33,501 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:01:33,514 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:01:33,861 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:33,862 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:33,862 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:01:33,864 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:34,214 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:01:34,215 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:34,216 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:01:34,216 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:01:34,217 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:34,218 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:01:34,219 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:01:34,219 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:01:34,220 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:01:34,220 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:01:34,220 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:34,221 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:01:34,221 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:34,222 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:01:34,224 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:01:34,224 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:01:34,225 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:01:34,225 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:01:34,225 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:01:34,225 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:01:34,226 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:01:34,246 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:01:34,643 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:34,644 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:34,645 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:01:34,662 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:35,030 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:01:35,032 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:35,033 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:01:35,034 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:01:35,034 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:35,035 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:01:35,036 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:01:35,037 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:01:35,037 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:01:35,038 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:01:35,040 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:35,040 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:01:35,040 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:35,041 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:01:35,042 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:01:35,043 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:01:35,043 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:01:35,043 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:01:35,044 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:01:35,044 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:01:35,044 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:01:35,045 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:01:35,446 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:35,446 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:35,447 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:01:35,448 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:35,864 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:01:35,864 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:35,865 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:01:35,865 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:01:35,865 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:35,867 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:01:35,867 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:01:35,868 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:01:35,869 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:01:35,869 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:01:35,870 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:35,870 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:01:35,872 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:35,872 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:01:35,873 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:01:35,874 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:01:35,875 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:01:35,875 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:01:35,875 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:01:35,875 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:01:35,875 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:01:36,072 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:01:36,073 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:01:36,074 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:01:36,074 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:01:36,075 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:01:36,075 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:01:36,075 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:01:36,424 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:36,425 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:36,425 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:01:36,427 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:36,779 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:01:36,780 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:36,781 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:01:36,782 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:01:36,783 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:36,785 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:01:36,785 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:01:36,787 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:01:36,787 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:01:36,788 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:01:36,788 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:36,788 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:01:36,789 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:36,790 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:01:36,790 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:01:36,791 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:01:36,791 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:01:36,791 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:01:36,791 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:01:36,792 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:01:36,793 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:01:36,817 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:01:37,181 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:37,181 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:37,181 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:01:37,182 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:37,535 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:01:37,536 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:37,536 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:01:37,537 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:01:37,537 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:37,538 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:01:37,538 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:01:37,539 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:01:37,539 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:01:37,539 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:01:37,539 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:37,541 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:01:37,542 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:37,542 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:01:37,543 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:01:37,544 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:01:37,545 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:01:37,545 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:01:37,545 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:01:37,545 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:01:37,546 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:01:37,546 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:01:37,893 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:37,893 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:37,894 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:01:37,895 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:38,219 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:01:38,220 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:38,220 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:01:38,220 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:01:38,221 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:38,221 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:01:38,222 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:01:38,222 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:01:38,223 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:01:38,223 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:01:38,223 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:38,224 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:01:38,224 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:38,225 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:01:38,226 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:01:38,226 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:01:38,227 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:01:38,227 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:01:38,227 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:01:38,227 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:01:38,228 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:01:38,432 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:01:38,433 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:01:38,434 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:01:38,436 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:01:38,436 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:01:38,437 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:01:38,448 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:01:38,823 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:38,823 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:38,824 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:01:38,824 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:39,154 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:01:39,155 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:39,155 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:01:39,156 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:01:39,157 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:39,158 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:01:39,159 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:01:39,159 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:01:39,160 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:01:39,160 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:01:39,161 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:39,161 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:01:39,161 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:39,163 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:01:39,163 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:01:39,164 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:01:39,165 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:01:39,165 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:01:39,165 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:01:39,166 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:01:39,166 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:01:39,166 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:01:39,545 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:39,546 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:39,548 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:01:39,566 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:39,905 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:01:39,906 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:39,906 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:01:39,907 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:01:39,907 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:39,909 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:01:39,910 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:01:39,910 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:01:39,910 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:01:39,912 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:39,912 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:01:39,912 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:39,913 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:01:39,914 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:01:39,915 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:01:39,916 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:01:39,916 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:01:39,916 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:01:39,917 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:01:39,917 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:01:39,917 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:01:39,918 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:01:40,274 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:40,275 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:40,275 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:01:40,294 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:40,632 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:01:40,634 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:40,635 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:01:40,635 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:01:40,635 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:40,636 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:01:40,638 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:01:40,639 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:01:40,639 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:01:40,640 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:01:40,640 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:40,641 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:01:40,641 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:40,642 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:01:40,643 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:01:40,643 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:01:40,644 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:01:40,644 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:01:40,644 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:01:40,645 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:01:40,645 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:01:40,839 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:01:40,840 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:01:40,840 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:01:40,840 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:01:40,841 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:01:40,841 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:01:40,855 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:01:41,169 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:41,170 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:41,171 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:01:41,171 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:41,522 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:01:41,523 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:41,524 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:01:41,525 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:01:41,525 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:41,527 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:01:41,528 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:01:41,529 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:01:41,529 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:01:41,530 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:01:41,531 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:41,531 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:01:41,532 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:41,533 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:01:41,533 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:01:41,534 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:01:41,534 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:01:41,534 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:01:41,535 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:01:41,535 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:01:41,535 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:01:41,551 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:01:41,932 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:41,933 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:41,934 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:01:41,935 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:42,263 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:01:42,264 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:42,264 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:01:42,264 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:01:42,266 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:42,267 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:01:42,267 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:01:42,269 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:01:42,269 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:01:42,269 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:01:42,271 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:42,271 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:01:42,272 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:42,273 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:01:42,274 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:01:42,274 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:01:42,275 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:01:42,275 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:01:42,275 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:01:42,276 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:01:42,276 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:01:42,296 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:01:42,649 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:42,650 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:42,650 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:01:42,651 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:42,966 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:01:42,966 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:42,968 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:01:42,968 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:01:42,969 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:42,970 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:01:42,971 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:01:42,971 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:01:42,971 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:01:42,972 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:01:42,972 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:42,973 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:01:42,973 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:42,974 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:01:42,975 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:01:42,976 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:01:42,976 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:01:42,976 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:01:42,977 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:01:42,977 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:01:42,977 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:01:43,176 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:01:43,177 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:01:43,178 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:01:43,179 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:01:43,179 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:01:43,180 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:01:43,181 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:01:43,565 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:43,565 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:43,566 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:01:43,566 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:43,901 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:01:43,902 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:43,902 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:01:43,903 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:01:43,904 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:43,905 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:01:43,906 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:01:43,907 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:01:43,907 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:01:43,907 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:01:43,908 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:43,908 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:01:43,909 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:43,909 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:01:43,910 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:01:43,910 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:01:43,911 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:01:43,912 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:01:43,912 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:01:43,912 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:01:43,913 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:01:43,913 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:01:44,271 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:44,272 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:44,272 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:01:44,273 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:44,690 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:01:44,692 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:44,692 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:01:44,694 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:01:44,694 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:44,696 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:01:44,697 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:01:44,698 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:01:44,699 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:01:44,699 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:01:44,700 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:44,701 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:01:44,701 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:44,702 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:01:44,703 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:01:44,703 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:01:44,704 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:01:44,704 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:01:44,704 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:01:44,705 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:01:44,705 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:01:44,706 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:01:45,116 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:45,117 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:45,117 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:01:45,118 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:45,571 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:01:45,573 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:45,574 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:01:45,575 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:01:45,576 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:45,579 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:01:45,581 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:01:45,582 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:01:45,583 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:01:45,584 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:01:45,586 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:45,587 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:01:45,587 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:45,592 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:01:45,595 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:01:45,598 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:01:45,599 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:01:45,600 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:01:45,601 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:01:45,602 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:01:45,602 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:01:45,809 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:01:45,811 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:01:45,812 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:01:45,813 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:01:45,814 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:01:45,815 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:01:45,816 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:01:46,374 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:46,375 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:46,376 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:01:46,377 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:46,766 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:01:46,768 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:46,768 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:01:46,769 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:01:46,769 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:46,770 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:01:46,772 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:01:46,772 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:01:46,774 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:01:46,774 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:01:46,775 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:46,775 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:01:46,776 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:46,777 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:01:46,778 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:01:46,779 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:01:46,779 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:01:46,780 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:01:46,780 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:01:46,781 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:01:46,782 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:01:46,782 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:01:47,181 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:47,182 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:47,183 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:01:47,205 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:47,602 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:01:47,603 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:47,604 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:01:47,604 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:01:47,605 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:47,606 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:01:47,606 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:01:47,607 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:01:47,608 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:01:47,608 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:01:47,609 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:47,609 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:01:47,610 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:47,611 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:01:47,611 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:01:47,612 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:01:47,612 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:01:47,612 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:01:47,613 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:01:47,614 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:01:47,614 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:01:47,615 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:01:48,014 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:48,015 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:48,015 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:01:48,016 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:48,402 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:01:48,402 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:48,404 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:01:48,404 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:01:48,405 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:48,406 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:01:48,406 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:01:48,407 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:01:48,408 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:01:48,408 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:01:48,408 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:48,409 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:01:48,409 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:48,410 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:01:48,411 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:01:48,411 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:01:48,412 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:01:48,412 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:01:48,412 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:01:48,412 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:01:48,413 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:01:48,615 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:01:48,615 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:01:48,615 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:01:48,616 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:01:48,616 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:01:48,616 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:01:48,630 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:01:48,962 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:48,962 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:48,963 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:01:48,963 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:49,319 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:01:49,319 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:49,321 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:01:49,321 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:01:49,322 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:49,322 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:01:49,323 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:01:49,324 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:01:49,324 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:01:49,324 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:01:49,325 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:49,325 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:01:49,325 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:49,326 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:01:49,327 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:01:49,327 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:01:49,328 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:01:49,328 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:01:49,328 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:01:49,329 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:01:49,329 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:01:49,330 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:01:49,652 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:49,652 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:49,653 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:01:49,654 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:49,998 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:01:49,999 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:50,000 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:01:50,000 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:01:50,000 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:50,001 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:01:50,001 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:01:50,002 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:01:50,003 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:01:50,003 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:50,003 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:01:50,003 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:01:50,004 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:50,005 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:01:50,005 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:01:50,006 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:01:50,006 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:01:50,007 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:01:50,007 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:01:50,008 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:01:50,008 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:01:50,009 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:01:50,348 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:50,348 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:50,348 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:01:50,350 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:50,668 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:01:50,669 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:50,670 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:01:50,670 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:01:50,670 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:50,671 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:01:50,672 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:01:50,672 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:01:50,673 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:01:50,673 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:01:50,674 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:50,674 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:01:50,675 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:50,675 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:01:50,676 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:01:50,677 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:01:50,677 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:01:50,678 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:01:50,678 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:01:50,678 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:01:50,678 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:01:50,874 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:01:50,875 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:01:50,875 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:01:50,876 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:01:50,877 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:01:50,877 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:01:50,889 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:01:51,282 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:51,283 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:51,283 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:01:51,284 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:51,618 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:01:51,618 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:51,619 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:01:51,620 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:01:51,620 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:51,621 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:01:51,622 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:01:51,622 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:01:51,622 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:01:51,623 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:01:51,623 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:51,623 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:01:51,624 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:51,625 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:01:51,625 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:01:51,626 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:01:51,626 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:01:51,626 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:01:51,626 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:01:51,627 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:01:51,627 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:01:51,649 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:01:52,026 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:52,027 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:52,027 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:01:52,028 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:52,356 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:01:52,357 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:52,358 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:01:52,359 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:01:52,360 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:52,361 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:01:52,363 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:01:52,364 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:01:52,364 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:01:52,364 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:01:52,365 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:52,366 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:01:52,366 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:52,367 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:01:52,367 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:01:52,368 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:01:52,368 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:01:52,369 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:01:52,369 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:01:52,369 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:01:52,370 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:01:52,370 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:01:52,708 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:52,708 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:52,708 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:01:52,709 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:53,089 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:01:53,089 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:53,089 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:01:53,090 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:01:53,091 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:53,092 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:01:53,093 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:01:53,095 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:01:53,095 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:01:53,095 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:53,095 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:01:53,096 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:01:53,096 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:53,098 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:01:53,099 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:01:53,099 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:01:53,100 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:01:53,100 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:01:53,100 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:01:53,101 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:01:53,101 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:01:53,304 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:01:53,305 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:01:53,306 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:01:53,306 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:01:53,307 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:01:53,307 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:01:53,308 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:01:53,725 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:53,726 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:53,727 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:01:53,728 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:54,105 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:01:54,105 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:54,106 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:01:54,106 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:01:54,106 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:54,107 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:01:54,108 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:01:54,109 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:01:54,110 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:01:54,110 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:01:54,110 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:54,111 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:01:54,111 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:54,112 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:01:54,113 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:01:54,114 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:01:54,114 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:01:54,115 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:01:54,115 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:01:54,115 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:01:54,115 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:01:54,116 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:01:54,493 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:54,495 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:54,495 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:01:54,496 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:54,906 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:01:54,907 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:54,908 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:01:54,909 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:01:54,910 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:54,911 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:01:54,911 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:01:54,913 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:01:54,913 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:01:54,913 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:01:54,914 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:54,914 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:01:54,915 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:54,916 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:01:54,917 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:01:54,917 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:01:54,918 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:01:54,918 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:01:54,918 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:01:54,919 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:01:54,919 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:01:54,938 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:01:55,302 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:55,304 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:55,305 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:01:55,306 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:55,714 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:01:55,715 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:55,716 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:01:55,716 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:01:55,716 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:55,717 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:01:55,718 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:01:55,719 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:01:55,720 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:01:55,720 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:01:55,721 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:55,721 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:01:55,721 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:55,722 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:01:55,723 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:01:55,723 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:01:55,724 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:01:55,724 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:01:55,724 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:01:55,725 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:01:55,726 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:01:55,924 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:01:55,924 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:01:55,925 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:01:55,925 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:01:55,925 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:01:55,927 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:01:55,928 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:01:56,326 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:56,327 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:56,329 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:01:56,330 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:56,685 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:01:56,687 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:56,687 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:01:56,687 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:01:56,687 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:56,690 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:01:56,691 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:01:56,691 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:01:56,692 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:01:56,692 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:01:56,692 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:56,693 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:01:56,693 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:56,694 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:01:56,695 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:01:56,696 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:01:56,696 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:01:56,696 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:01:56,696 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:01:56,697 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:01:56,697 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:01:56,713 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:01:57,081 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:57,082 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:57,083 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:01:57,100 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:57,444 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:01:57,446 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:57,446 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:01:57,447 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:01:57,448 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:57,448 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:01:57,449 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:01:57,450 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:01:57,450 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:01:57,451 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:01:57,451 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:57,451 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:01:57,452 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:57,453 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:01:57,454 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:01:57,454 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:01:57,454 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:01:57,455 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:01:57,456 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:01:57,456 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:01:57,456 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:01:57,468 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:01:57,832 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:57,832 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:57,833 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:01:57,859 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:58,215 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:01:58,216 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:58,217 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:01:58,217 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:01:58,218 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:58,218 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:01:58,219 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:01:58,220 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:01:58,221 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:01:58,221 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:01:58,221 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:58,222 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:01:58,222 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:01:58,223 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:01:58,223 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:01:58,224 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:01:58,224 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:01:58,224 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:01:58,224 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:01:58,225 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:01:58,225 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:01:58,417 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:01:58,418 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:01:58,418 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:01:58,419 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:01:58,419 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:01:58,419 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:01:58,420 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:01:58,747 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:58,748 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:58,749 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:01:58,750 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:59,085 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:01:59,087 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:59,087 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:01:59,088 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:01:59,088 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:59,089 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:01:59,090 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:01:59,091 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:01:59,091 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:01:59,091 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:01:59,093 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:59,093 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:01:59,093 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:01:59,094 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:01:59,094 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:01:59,095 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:01:59,095 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:01:59,095 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:01:59,096 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:01:59,096 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:01:59,096 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:01:59,097 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:01:59,447 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:01:59,448 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:59,448 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:01:59,449 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:59,774 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:01:59,775 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:59,775 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:01:59,776 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:01:59,776 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:59,778 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:01:59,778 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:01:59,779 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:01:59,779 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:01:59,780 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:01:59,780 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:01:59,781 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:01:59,781 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:01:59,782 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:01:59,783 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:01:59,783 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:01:59,784 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:01:59,784 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:01:59,784 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:01:59,784 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:01:59,785 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:01:59,785 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:02:00,147 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:00,148 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:00,148 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:02:00,161 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:00,577 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:02:00,579 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:00,579 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:02:00,580 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:02:00,581 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:00,582 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:02:00,583 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:02:00,583 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:02:00,584 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:02:00,585 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:02:00,585 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:00,586 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:02:00,587 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:00,587 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:02:00,588 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:02:00,589 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:02:00,590 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:02:00,590 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:02:00,590 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:02:00,590 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:02:00,591 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:02:00,796 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:02:00,797 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:02:00,798 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:02:00,799 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:02:00,799 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:02:00,799 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:02:00,800 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:02:01,174 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:01,175 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:01,175 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:02:01,175 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:01,547 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:02:01,549 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:01,549 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:02:01,551 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:02:01,552 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:01,555 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:02:01,557 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:02:01,558 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:02:01,558 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:02:01,559 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:02:01,560 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:01,560 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:02:01,561 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:01,562 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:02:01,563 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:02:01,564 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:02:01,564 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:02:01,564 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:02:01,565 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:02:01,565 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:02:01,566 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:02:01,581 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:02:02,012 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:02,013 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:02,013 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:02:02,015 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:02,398 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:02:02,400 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:02,400 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:02:02,401 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:02:02,402 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:02,403 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:02:02,403 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:02:02,404 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:02:02,405 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:02:02,405 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:02:02,406 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:02,407 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:02:02,407 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:02,409 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:02:02,409 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:02:02,410 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:02:02,411 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:02:02,411 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:02:02,411 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:02:02,412 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:02:02,412 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:02:02,413 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:02:02,846 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:02,847 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:02,847 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:02:02,870 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:03,298 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:02:03,299 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:03,300 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:02:03,300 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:02:03,301 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:03,302 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:02:03,303 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:02:03,304 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:02:03,304 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:02:03,305 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:02:03,305 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:03,306 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:02:03,306 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:03,307 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:02:03,308 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:02:03,309 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:02:03,309 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:02:03,309 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:02:03,310 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:02:03,311 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:02:03,311 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:02:03,516 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:02:03,518 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:02:03,519 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:02:03,519 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:02:03,520 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:02:03,520 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:02:03,522 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:02:03,948 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:03,950 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:03,950 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:02:03,951 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:04,352 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:02:04,353 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:04,354 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:02:04,355 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:02:04,357 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:04,358 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:02:04,359 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:02:04,361 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:02:04,362 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:02:04,362 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:02:04,362 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:04,363 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:02:04,363 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:04,364 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:02:04,365 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:02:04,365 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:02:04,366 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:02:04,366 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:02:04,366 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:02:04,367 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:02:04,367 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:02:04,368 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:02:04,784 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:04,785 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:04,786 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:02:04,805 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:05,218 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:02:05,220 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:05,221 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:02:05,221 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:02:05,222 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:05,223 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:02:05,225 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:02:05,225 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:02:05,225 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:02:05,225 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:02:05,226 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:05,227 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:02:05,227 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:05,228 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:02:05,229 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:02:05,229 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:02:05,230 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:02:05,230 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:02:05,230 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:02:05,231 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:02:05,231 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:02:05,248 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:02:05,709 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:05,709 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:05,711 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:02:05,713 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:06,149 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:02:06,151 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:06,151 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:02:06,152 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:02:06,153 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:06,155 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:02:06,155 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:02:06,156 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:02:06,157 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:02:06,157 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:02:06,157 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:06,158 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:02:06,158 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:06,159 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:02:06,160 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:02:06,161 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:02:06,161 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:02:06,161 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:02:06,162 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:02:06,162 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:02:06,162 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:02:06,369 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:02:06,370 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:02:06,370 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:02:06,371 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:02:06,371 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:02:06,372 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:02:06,384 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:02:06,781 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:06,782 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:06,783 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:02:06,802 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:07,153 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:02:07,155 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:07,155 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:02:07,156 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:02:07,156 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:07,158 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:02:07,159 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:02:07,160 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:02:07,161 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:02:07,161 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:02:07,163 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:07,163 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:02:07,163 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:07,165 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:02:07,165 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:02:07,166 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:02:07,167 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:02:07,167 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:02:07,167 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:02:07,167 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:02:07,168 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:02:07,193 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:02:07,582 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:07,583 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:07,584 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:02:07,584 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:07,925 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:02:07,926 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:07,926 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:02:07,927 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:02:07,927 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:07,928 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:02:07,929 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:02:07,930 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:02:07,930 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:02:07,930 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:02:07,931 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:07,932 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:02:07,932 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:07,933 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:02:07,933 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:02:07,934 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:02:07,934 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:02:07,934 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:02:07,935 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:02:07,935 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:02:07,936 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:02:07,936 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:02:08,261 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:08,262 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:08,263 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:02:08,283 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:08,634 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:02:08,635 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:08,637 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:02:08,637 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:02:08,637 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:08,638 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:02:08,638 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:02:08,638 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:02:08,638 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:02:08,640 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:02:08,640 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:08,641 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:02:08,641 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:08,643 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:02:08,643 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:02:08,644 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:02:08,644 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:02:08,644 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:02:08,645 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:02:08,645 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:02:08,645 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:02:08,835 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:02:08,836 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:02:08,837 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:02:08,837 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:02:08,838 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:02:08,838 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:02:08,851 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:02:09,180 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:09,181 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:09,181 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:02:09,192 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:09,547 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:02:09,549 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:09,550 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:02:09,550 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:02:09,551 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:09,553 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:02:09,554 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:02:09,554 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:02:09,555 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:02:09,555 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:02:09,555 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:09,556 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:02:09,556 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:09,558 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:02:09,558 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:02:09,559 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:02:09,559 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:02:09,560 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:02:09,560 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:02:09,560 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:02:09,560 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:02:09,561 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:02:09,941 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:09,942 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:09,943 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:02:09,954 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:10,304 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:02:10,305 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:10,305 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:02:10,307 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:02:10,307 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:10,309 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:02:10,309 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:02:10,310 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:02:10,311 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:02:10,311 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:02:10,312 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:10,312 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:02:10,313 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:10,314 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:02:10,315 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:02:10,315 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:02:10,315 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:02:10,316 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:02:10,316 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:02:10,316 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:02:10,317 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:02:10,317 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:02:10,673 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:10,674 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:10,675 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:02:10,676 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:11,002 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:02:11,003 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:11,003 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:02:11,004 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:02:11,004 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:11,005 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:02:11,006 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:02:11,007 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:02:11,007 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:02:11,008 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:11,008 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:02:11,008 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:02:11,009 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:11,010 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:02:11,011 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:02:11,011 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:02:11,011 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:02:11,012 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:02:11,012 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:02:11,012 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:02:11,013 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:02:11,223 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:02:11,224 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:02:11,224 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:02:11,225 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:02:11,225 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:02:11,225 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:02:11,227 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:02:11,556 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:11,557 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:11,557 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:02:11,559 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:11,862 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:02:11,863 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:11,864 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:02:11,864 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:02:11,865 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:11,866 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:02:11,866 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:02:11,867 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:02:11,868 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:02:11,868 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:02:11,869 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:11,869 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:02:11,869 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:11,870 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:02:11,871 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:02:11,872 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:02:11,872 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:02:11,872 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:02:11,873 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:02:11,873 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:02:11,873 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:02:11,893 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:02:12,209 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:12,210 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:12,210 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:02:12,211 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:12,555 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:02:12,556 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:12,557 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:02:12,558 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:02:12,558 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:12,559 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:02:12,560 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:02:12,561 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:02:12,562 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:02:12,562 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:02:12,563 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:12,563 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:02:12,564 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:12,565 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:02:12,566 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:02:12,567 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:02:12,567 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:02:12,568 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:02:12,568 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:02:12,568 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:02:12,568 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:02:12,569 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:02:12,909 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:12,910 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:12,911 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:02:12,911 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:13,305 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:02:13,306 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:13,306 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:02:13,306 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:02:13,307 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:13,308 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:02:13,309 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:02:13,309 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:02:13,310 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:02:13,311 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:02:13,311 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:13,312 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:02:13,312 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:13,314 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:02:13,315 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:02:13,315 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:02:13,316 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:02:13,316 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:02:13,316 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:02:13,317 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:02:13,317 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:02:13,509 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:02:13,510 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:02:13,511 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:02:13,511 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:02:13,511 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:02:13,512 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:02:13,513 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:02:13,909 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:13,910 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:13,911 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:02:13,912 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:14,266 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:02:14,267 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:14,267 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:02:14,268 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:02:14,269 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:14,270 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:02:14,271 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:02:14,272 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:02:14,272 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:02:14,273 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:02:14,273 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:14,273 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:02:14,274 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:14,275 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:02:14,275 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:02:14,276 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:02:14,276 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:02:14,276 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:02:14,277 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:02:14,277 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:02:14,277 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:02:14,278 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:02:14,647 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:14,647 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:14,648 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:02:14,649 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:15,003 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:02:15,003 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:15,005 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:02:15,005 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:02:15,006 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:15,007 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:02:15,007 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:02:15,008 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:02:15,009 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:02:15,009 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:15,009 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:02:15,009 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:02:15,010 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:15,011 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:02:15,012 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:02:15,012 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:02:15,013 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:02:15,013 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:02:15,013 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:02:15,014 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:02:15,014 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:02:15,015 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:02:15,429 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:15,431 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:15,432 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:02:15,433 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:15,875 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:02:15,876 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:15,877 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:02:15,878 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:02:15,879 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:15,881 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:02:15,882 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:02:15,883 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:02:15,884 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:02:15,884 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:02:15,885 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:15,886 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:02:15,886 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:15,887 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:02:15,888 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:02:15,888 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:02:15,889 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:02:15,889 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:02:15,890 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:02:15,891 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:02:15,891 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:02:16,088 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:02:16,089 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:02:16,089 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:02:16,090 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:02:16,090 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:02:16,090 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:02:16,103 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:02:16,468 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:16,469 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:16,470 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:02:16,492 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:16,838 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:02:16,839 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:16,840 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:02:16,840 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:02:16,841 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:16,842 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:02:16,843 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:02:16,844 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:02:16,845 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:02:16,845 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:02:16,845 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:16,846 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:02:16,846 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:16,847 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:02:16,848 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:02:16,848 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:02:16,849 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:02:16,849 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:02:16,849 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:02:16,850 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:02:16,850 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:02:16,864 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:02:17,211 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:17,212 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:17,212 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:02:17,213 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:17,552 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:02:17,553 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:17,554 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:02:17,554 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:02:17,554 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:17,555 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:02:17,555 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:02:17,556 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:02:17,557 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:02:17,557 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:02:17,558 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:17,559 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:02:17,559 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:17,560 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:02:17,560 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:02:17,561 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:02:17,561 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:02:17,561 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:02:17,562 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:02:17,562 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:02:17,562 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:02:17,563 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:02:17,934 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:17,935 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:17,935 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:02:17,935 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:18,281 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:02:18,283 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:18,283 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:02:18,284 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:02:18,284 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:18,286 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:02:18,286 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:02:18,287 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:02:18,287 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:02:18,288 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:02:18,289 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:18,289 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:02:18,289 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:18,290 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:02:18,291 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:02:18,291 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:02:18,292 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:02:18,292 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:02:18,292 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:02:18,293 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:02:18,293 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:02:18,495 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:02:18,497 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:02:18,498 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:02:18,499 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:02:18,499 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:02:18,500 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:02:18,501 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:02:18,835 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:18,836 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:18,836 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:02:18,850 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:19,187 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:02:19,188 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:19,188 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:02:19,189 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:02:19,189 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:19,190 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:02:19,191 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:02:19,192 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:02:19,192 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:02:19,192 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:02:19,193 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:19,194 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:02:19,194 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:19,195 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:02:19,195 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:02:19,196 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:02:19,197 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:02:19,197 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:02:19,197 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:02:19,197 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:02:19,198 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:02:19,198 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:02:19,538 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:19,539 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:19,540 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:02:19,560 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:19,924 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:02:19,924 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:19,925 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:02:19,926 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:02:19,927 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:19,928 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:02:19,929 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:02:19,930 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:02:19,931 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:02:19,931 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:02:19,932 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:19,932 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:02:19,933 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:19,935 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:02:19,936 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:02:19,936 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:02:19,937 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:02:19,937 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:02:19,937 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:02:19,938 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:02:19,938 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:02:19,939 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:02:20,311 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:20,312 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:20,312 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:02:20,314 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:20,655 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:02:20,656 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:20,656 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:02:20,658 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:02:20,659 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:20,659 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:02:20,660 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:02:20,661 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:02:20,662 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:02:20,662 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:02:20,663 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:20,664 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:02:20,664 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:20,665 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:02:20,666 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:02:20,667 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:02:20,667 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:02:20,668 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:02:20,668 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:02:20,668 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:02:20,669 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:02:20,867 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:02:20,867 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:02:20,868 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:02:20,868 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:02:20,869 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:02:20,870 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:02:20,871 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:02:21,244 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:21,245 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:21,245 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:02:21,267 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:21,617 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:02:21,618 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:21,619 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:02:21,619 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:02:21,619 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:21,621 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:02:21,622 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:02:21,622 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:02:21,623 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:02:21,623 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:02:21,623 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:21,624 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:02:21,624 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:21,626 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:02:21,626 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:02:21,627 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:02:21,627 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:02:21,627 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:02:21,628 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:02:21,628 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:02:21,628 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:02:21,630 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:02:21,981 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:21,982 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:21,982 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:02:21,983 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:22,286 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:02:22,287 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:22,288 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:02:22,289 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:02:22,289 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:22,290 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:02:22,291 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:02:22,293 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:02:22,294 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:02:22,294 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:02:22,295 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:22,295 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:02:22,296 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:22,297 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:02:22,298 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:02:22,298 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:02:22,299 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:02:22,299 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:02:22,299 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:02:22,300 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:02:22,300 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:02:22,325 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:02:22,684 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:22,685 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:22,686 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:02:22,687 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:22,998 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:02:22,999 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:23,000 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:02:23,001 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:02:23,001 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:23,002 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:02:23,003 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:02:23,003 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:02:23,004 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:02:23,004 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:02:23,004 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:23,005 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:02:23,005 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:23,006 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:02:23,007 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:02:23,007 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:02:23,008 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:02:23,008 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:02:23,008 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:02:23,008 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:02:23,009 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:02:23,203 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:02:23,204 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:02:23,204 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:02:23,205 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:02:23,206 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:02:23,206 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:02:23,208 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:02:23,552 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:23,553 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:23,553 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:02:23,554 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:23,916 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:02:23,918 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:23,919 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:02:23,920 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:02:23,920 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:23,922 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:02:23,923 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:02:23,923 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:02:23,924 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:02:23,924 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:23,924 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:02:23,924 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:02:23,925 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:23,926 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:02:23,927 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:02:23,929 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:02:23,929 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:02:23,930 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:02:23,930 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:02:23,930 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:02:23,931 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:02:23,931 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:02:24,317 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:24,318 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:24,318 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:02:24,335 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:24,720 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:02:24,720 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:24,721 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:02:24,721 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:02:24,722 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:24,723 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:02:24,724 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:02:24,724 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:02:24,725 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:02:24,725 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:02:24,725 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:24,727 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:02:24,727 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:24,728 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:02:24,729 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:02:24,729 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:02:24,730 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:02:24,730 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:02:24,730 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:02:24,731 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:02:24,731 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:02:24,732 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:02:25,086 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:25,086 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:25,086 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:02:25,087 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:25,507 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:02:25,508 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:25,509 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:02:25,509 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:02:25,510 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:25,511 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:02:25,512 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:02:25,513 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:02:25,514 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:02:25,515 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:02:25,516 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:25,516 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:02:25,516 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:25,517 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:02:25,518 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:02:25,519 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:02:25,520 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:02:25,520 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:02:25,520 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:02:25,520 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:02:25,521 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:02:25,714 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:02:25,715 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:02:25,716 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:02:25,716 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:02:25,716 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:02:25,717 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:02:25,717 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:02:26,120 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:26,121 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:26,122 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:02:26,148 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:26,486 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:02:26,487 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:26,488 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:02:26,489 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:02:26,489 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:26,491 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:02:26,492 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:02:26,493 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:02:26,494 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:02:26,494 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:02:26,494 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:26,495 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:02:26,496 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:26,496 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:02:26,497 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:02:26,498 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:02:26,499 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:02:26,499 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:02:26,499 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:02:26,499 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:02:26,500 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:02:26,500 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:02:26,859 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:26,860 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:26,860 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:02:26,879 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:27,202 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:02:27,203 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:27,203 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:02:27,204 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:02:27,204 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:27,206 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:02:27,207 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:02:27,208 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:02:27,208 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:02:27,209 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:02:27,209 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:27,210 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:02:27,210 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:27,211 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:02:27,212 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:02:27,212 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:02:27,212 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:02:27,213 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:02:27,213 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:02:27,213 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:02:27,213 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:02:27,237 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:02:27,560 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:27,562 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:27,562 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:02:27,563 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:27,898 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:02:27,899 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:27,899 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:02:27,901 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:02:27,901 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:27,902 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:02:27,903 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:02:27,904 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:02:27,904 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:02:27,905 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:02:27,905 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:27,906 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:02:27,907 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:27,908 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:02:27,909 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:02:27,910 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:02:27,910 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:02:27,911 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:02:27,911 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:02:27,912 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:02:27,913 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:02:28,112 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:02:28,113 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:02:28,113 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:02:28,115 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:02:28,116 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:02:28,117 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:02:28,118 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:02:28,795 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:28,796 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:28,798 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:02:28,822 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:29,623 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:02:29,624 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:29,624 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:02:29,625 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:02:29,625 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:29,626 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:02:29,628 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:02:29,629 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:02:29,630 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:02:29,631 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:02:29,631 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:29,632 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:02:29,633 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:29,635 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:02:29,636 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:02:29,637 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:02:29,638 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:02:29,639 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:02:29,640 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:02:29,641 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:02:29,641 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:02:29,642 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:02:30,198 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:30,200 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:30,200 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:02:30,202 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:30,652 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:02:30,653 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:30,654 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:02:30,654 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:02:30,655 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:30,656 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:02:30,658 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:02:30,659 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:02:30,660 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:02:30,660 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:02:30,661 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:30,662 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:02:30,663 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:30,664 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:02:30,665 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:02:30,666 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:02:30,667 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:02:30,667 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:02:30,667 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:02:30,669 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:02:30,669 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:02:30,670 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:02:31,138 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:31,139 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:31,139 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:02:31,140 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:31,550 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:02:31,551 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:31,552 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:02:31,552 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:02:31,553 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:31,554 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:02:31,555 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:02:31,557 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:02:31,557 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:02:31,558 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:02:31,558 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:31,559 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:02:31,560 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:31,561 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:02:31,562 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:02:31,563 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:02:31,564 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:02:31,565 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:02:31,565 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:02:31,566 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:02:31,566 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:02:31,759 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:02:31,759 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:02:31,760 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:02:31,761 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:02:31,762 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:02:31,762 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:02:31,763 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:02:32,186 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:32,188 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:32,188 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:02:32,189 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:32,562 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:02:32,563 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:32,563 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:02:32,564 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:02:32,565 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:32,566 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:02:32,567 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:02:32,567 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:02:32,568 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:02:32,569 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:02:32,569 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:32,569 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:02:32,570 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:32,571 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:02:32,571 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:02:32,572 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:02:32,573 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:02:32,573 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:02:32,574 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:02:32,574 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:02:32,574 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:02:32,575 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:02:32,973 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:32,974 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:32,975 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:02:32,995 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:33,375 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:02:33,376 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:33,376 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:02:33,377 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:02:33,377 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:33,378 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:02:33,379 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:02:33,380 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:02:33,381 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:02:33,381 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:02:33,382 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:33,382 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:02:33,383 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:33,384 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:02:33,385 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:02:33,386 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:02:33,387 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:02:33,387 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:02:33,387 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:02:33,388 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:02:33,388 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:02:33,389 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:02:33,805 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:33,806 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:33,806 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:02:33,807 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:34,203 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:02:34,204 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:34,205 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:02:34,205 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:02:34,206 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:34,208 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:02:34,209 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:02:34,210 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:02:34,211 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:02:34,211 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:02:34,213 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:34,213 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:02:34,213 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:34,214 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:02:34,215 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:02:34,215 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:02:34,216 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:02:34,216 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:02:34,216 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:02:34,216 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:02:34,217 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:02:34,412 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:02:34,412 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:02:34,413 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:02:34,413 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:02:34,413 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:02:34,415 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:02:34,428 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:02:34,838 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:34,839 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:34,839 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:02:34,862 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:35,230 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:02:35,231 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:35,232 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:02:35,232 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:02:35,232 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:35,233 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:02:35,235 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:02:35,236 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:02:35,237 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:02:35,237 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:02:35,237 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:35,238 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:02:35,238 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:35,239 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:02:35,240 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:02:35,240 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:02:35,241 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:02:35,241 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:02:35,241 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:02:35,242 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:02:35,242 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:02:35,243 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:02:35,627 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:35,628 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:35,628 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:02:35,650 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:36,041 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:02:36,042 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:36,043 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:02:36,043 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:02:36,045 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:36,045 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:02:36,047 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:02:36,047 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:02:36,048 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:02:36,048 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:02:36,049 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:36,050 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:02:36,050 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:36,051 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:02:36,052 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:02:36,053 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:02:36,054 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:02:36,054 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:02:36,054 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:02:36,055 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:02:36,055 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:02:36,056 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:02:36,475 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:36,475 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:36,476 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:02:36,476 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:36,861 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:02:36,862 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:36,863 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:02:36,863 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:02:36,864 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:36,866 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:02:36,867 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:02:36,867 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:02:36,868 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:02:36,869 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:02:36,869 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:36,870 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:02:36,870 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:36,873 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:02:36,874 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:02:36,875 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:02:36,875 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:02:36,875 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:02:36,876 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:02:36,876 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:02:36,877 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:02:37,072 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:02:37,072 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:02:37,072 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:02:37,073 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:02:37,073 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:02:37,074 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:02:37,076 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:02:37,475 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:37,475 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:37,477 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:02:37,478 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:37,864 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:02:37,865 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:37,865 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:02:37,866 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:02:37,866 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:37,867 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:02:37,868 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:02:37,870 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:02:37,871 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:02:37,871 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:02:37,872 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:37,872 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:02:37,873 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:37,874 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:02:37,875 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:02:37,876 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:02:37,877 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:02:37,877 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:02:37,878 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:02:37,878 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:02:37,878 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:02:37,879 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:02:38,292 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:38,293 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:38,293 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:02:38,294 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:38,660 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:02:38,661 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:38,661 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:02:38,661 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:02:38,663 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:38,665 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:02:38,665 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:02:38,667 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:02:38,667 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:02:38,668 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:02:38,668 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:38,669 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:02:38,669 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:38,671 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:02:38,672 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:02:38,672 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:02:38,673 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:02:38,673 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:02:38,674 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:02:38,674 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:02:38,674 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:02:38,675 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:02:39,059 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:39,060 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:39,061 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:02:39,081 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:39,525 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:02:39,526 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:39,527 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:02:39,527 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:02:39,528 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:39,529 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:02:39,530 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:02:39,531 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:02:39,532 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:02:39,532 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:02:39,532 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:39,533 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:02:39,533 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:39,535 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:02:39,536 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:02:39,537 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:02:39,537 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:02:39,538 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:02:39,538 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:02:39,539 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:02:39,539 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:02:39,743 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:02:39,744 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:02:39,744 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:02:39,744 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:02:39,745 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:02:39,745 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:02:39,759 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:02:40,145 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:40,146 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:40,147 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:02:40,159 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:40,579 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:02:40,580 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:40,581 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:02:40,582 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:02:40,582 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:40,583 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:02:40,584 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:02:40,584 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:02:40,585 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:02:40,585 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:02:40,586 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:40,587 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:02:40,587 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:40,588 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:02:40,589 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:02:40,590 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:02:40,590 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:02:40,590 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:02:40,590 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:02:40,591 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:02:40,591 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:02:40,592 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:02:40,986 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:40,986 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:40,987 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:02:40,987 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:41,335 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:02:41,337 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:41,338 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:02:41,338 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:02:41,338 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:41,339 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:02:41,340 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:02:41,340 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:02:41,341 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:02:41,342 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:02:41,342 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:41,342 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:02:41,343 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:41,344 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:02:41,344 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:02:41,345 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:02:41,345 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:02:41,345 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:02:41,345 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:02:41,346 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:02:41,346 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:02:41,367 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:02:41,783 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:41,784 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:41,785 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:02:41,802 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:42,157 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:02:42,157 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:42,158 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:02:42,158 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:02:42,159 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:42,160 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:02:42,161 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:02:42,162 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:02:42,162 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:02:42,163 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:02:42,164 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:42,164 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:02:42,165 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:42,166 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:02:42,167 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:02:42,167 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:02:42,168 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:02:42,168 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:02:42,168 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:02:42,168 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:02:42,169 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:02:42,374 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:02:42,375 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:02:42,375 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:02:42,376 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:02:42,376 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:02:42,377 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:02:42,377 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:02:42,746 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:42,747 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:42,748 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:02:42,748 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:43,106 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:02:43,107 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:43,107 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:02:43,108 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:02:43,109 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:43,111 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:02:43,112 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:02:43,113 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:02:43,113 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:02:43,113 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:02:43,115 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:43,115 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:02:43,115 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:43,116 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:02:43,117 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:02:43,117 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:02:43,118 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:02:43,118 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:02:43,118 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:02:43,119 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:02:43,119 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:02:43,120 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:02:43,520 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:43,521 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:43,522 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:02:43,522 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:43,877 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:02:43,879 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:43,880 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:02:43,881 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:02:43,881 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:43,883 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:02:43,884 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:02:43,885 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:02:43,885 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:02:43,886 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:02:43,886 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:43,886 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:02:43,887 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:43,887 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:02:43,889 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:02:43,889 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:02:43,889 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:02:43,890 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:02:43,890 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:02:43,890 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:02:43,890 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:02:43,913 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:02:44,266 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:44,267 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:44,267 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:02:44,281 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:44,735 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:02:44,736 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:44,737 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:02:44,738 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:02:44,738 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:44,740 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:02:44,741 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:02:44,742 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:02:44,743 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:02:44,743 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:44,743 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:02:44,744 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:44,744 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:02:44,745 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:02:44,746 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:02:44,746 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:02:44,748 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:02:44,748 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:02:44,748 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:02:44,749 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:02:44,749 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:02:44,944 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:02:44,944 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:02:44,944 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:02:44,945 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:02:44,945 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:02:44,945 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:02:44,946 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:02:45,359 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:45,360 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:45,360 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:02:45,378 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:45,739 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:02:45,739 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:45,740 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:02:45,740 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:02:45,740 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:45,741 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:02:45,742 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:02:45,742 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:02:45,743 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:02:45,744 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:02:45,744 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:45,744 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:02:45,745 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:45,746 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:02:45,746 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:02:45,747 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:02:45,747 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:02:45,748 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:02:45,748 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:02:45,748 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:02:45,749 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:02:45,749 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:02:46,103 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:46,103 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:46,104 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:02:46,105 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:46,474 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:02:46,475 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:46,477 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:02:46,477 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:02:46,477 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:46,478 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:02:46,479 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:02:46,480 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:02:46,480 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:02:46,481 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:02:46,481 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:46,482 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:02:46,483 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:46,484 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:02:46,485 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:02:46,486 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:02:46,486 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:02:46,486 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:02:46,486 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:02:46,487 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:02:46,487 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:02:46,488 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:02:46,869 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:46,869 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:46,870 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:02:46,871 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:47,264 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:02:47,265 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:47,266 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:02:47,266 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:02:47,267 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:47,269 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:02:47,271 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:02:47,272 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:02:47,272 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:02:47,272 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:02:47,273 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:47,273 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:02:47,274 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:47,275 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:02:47,276 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:02:47,276 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:02:47,277 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:02:47,277 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:02:47,278 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:02:47,278 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:02:47,278 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:02:47,484 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:02:47,485 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:02:47,485 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:02:47,485 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:02:47,486 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:02:47,486 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:02:47,500 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:02:47,912 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:47,913 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:47,914 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:02:47,915 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:48,288 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:02:48,289 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:48,290 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:02:48,290 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:02:48,291 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:48,292 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:02:48,293 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:02:48,294 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:02:48,295 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:02:48,295 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:02:48,296 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:48,296 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:02:48,297 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:48,298 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:02:48,299 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:02:48,300 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:02:48,301 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:02:48,301 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:02:48,301 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:02:48,301 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:02:48,302 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:02:48,303 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:02:48,717 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:48,718 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:48,719 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:02:48,719 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:49,093 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:02:49,094 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:49,094 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:02:49,095 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:02:49,096 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:49,097 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:02:49,097 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:02:49,098 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:02:49,099 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:02:49,100 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:02:49,100 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:49,100 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:02:49,101 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:49,102 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:02:49,102 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:02:49,103 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:02:49,104 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:02:49,104 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:02:49,104 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:02:49,105 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:02:49,105 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:02:49,106 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:02:49,485 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:49,486 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:49,486 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:02:49,504 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:49,847 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:02:49,849 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:49,849 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:02:49,850 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:02:49,851 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:49,852 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:02:49,852 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:02:49,853 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:02:49,853 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:02:49,854 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:02:49,854 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:49,855 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:02:49,855 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:49,856 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:02:49,857 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:02:49,857 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:02:49,858 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:02:49,858 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:02:49,858 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:02:49,859 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:02:49,859 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:02:50,059 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:02:50,059 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:02:50,060 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:02:50,060 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:02:50,061 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:02:50,062 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:02:50,063 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:02:50,417 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:50,418 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:50,418 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:02:50,429 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:50,757 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:02:50,758 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:50,759 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:02:50,759 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:02:50,760 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:50,760 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:02:50,762 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:02:50,762 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:02:50,763 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:02:50,763 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:02:50,764 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:50,764 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:02:50,765 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:50,767 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:02:50,768 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:02:50,768 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:02:50,769 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:02:50,769 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:02:50,770 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:02:50,770 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:02:50,770 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:02:50,771 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:02:51,177 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:51,178 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:51,178 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:02:51,179 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:51,538 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:02:51,540 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:51,540 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:02:51,541 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:02:51,542 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:51,543 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:02:51,544 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:02:51,545 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:02:51,545 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:02:51,546 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:02:51,546 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:51,547 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:02:51,547 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:51,548 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:02:51,549 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:02:51,550 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:02:51,550 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:02:51,550 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:02:51,551 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:02:51,551 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:02:51,551 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:02:51,552 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:02:51,920 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:51,921 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:51,921 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:02:51,921 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:52,252 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:02:52,252 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:52,253 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:02:52,253 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:02:52,254 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:52,254 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:02:52,255 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:02:52,255 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:02:52,257 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:02:52,257 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:02:52,257 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:52,258 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:02:52,258 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:52,259 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:02:52,259 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:02:52,260 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:02:52,260 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:02:52,261 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:02:52,261 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:02:52,261 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:02:52,261 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:02:52,464 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:02:52,465 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:02:52,466 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:02:52,466 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:02:52,466 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:02:52,467 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:02:52,467 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:02:52,801 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:52,803 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:52,804 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:02:52,805 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:53,168 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:02:53,169 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:53,170 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:02:53,170 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:02:53,170 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:53,172 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:02:53,173 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:02:53,174 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:02:53,175 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:02:53,176 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:02:53,176 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:53,177 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:02:53,177 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:53,178 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:02:53,179 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:02:53,179 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:02:53,180 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:02:53,180 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:02:53,181 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:02:53,181 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:02:53,182 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:02:53,182 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:02:53,574 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:53,575 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:53,576 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:02:53,577 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:53,926 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:02:53,926 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:53,927 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:02:53,928 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:02:53,928 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:53,931 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:02:53,932 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:02:53,932 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:02:53,933 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:02:53,933 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:02:53,934 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:53,934 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:02:53,935 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:53,936 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:02:53,937 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:02:53,937 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:02:53,938 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:02:53,938 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:02:53,938 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:02:53,938 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:02:53,939 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:02:53,952 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:02:54,310 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:54,312 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:54,312 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:02:54,323 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:54,689 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:02:54,689 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:54,691 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:02:54,691 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:02:54,691 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:54,692 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:02:54,693 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:02:54,694 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:02:54,694 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:02:54,694 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:02:54,695 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:54,695 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:02:54,696 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:54,697 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:02:54,697 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:02:54,698 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:02:54,699 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:02:54,699 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:02:54,699 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:02:54,700 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:02:54,700 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:02:54,899 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:02:54,900 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:02:54,900 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:02:54,901 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:02:54,901 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:02:54,901 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:02:54,902 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:02:55,257 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:55,258 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:55,259 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:02:55,260 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:55,600 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:02:55,601 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:55,602 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:02:55,602 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:02:55,603 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:55,604 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:02:55,604 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:02:55,606 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:02:55,606 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:02:55,607 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:02:55,607 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:55,608 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:02:55,608 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:55,609 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:02:55,610 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:02:55,611 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:02:55,611 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:02:55,611 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:02:55,611 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:02:55,612 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:02:55,613 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:02:55,614 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:02:56,000 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:56,001 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:56,001 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:02:56,016 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:56,386 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:02:56,387 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:56,388 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:02:56,388 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:02:56,389 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:56,389 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:02:56,390 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:02:56,391 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:02:56,392 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:02:56,392 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:02:56,393 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:56,394 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:02:56,394 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:56,395 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:02:56,396 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:02:56,396 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:02:56,397 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:02:56,397 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:02:56,397 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:02:56,397 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:02:56,398 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:02:56,399 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:02:56,736 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:56,737 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:56,738 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:02:56,738 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:57,097 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:02:57,099 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:57,100 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:02:57,100 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:02:57,101 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:57,102 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:02:57,104 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:02:57,105 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:02:57,105 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:02:57,106 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:02:57,106 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:57,107 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:02:57,107 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:57,108 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:02:57,109 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:02:57,109 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:02:57,110 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:02:57,110 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:02:57,110 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:02:57,111 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:02:57,111 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:02:57,320 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:02:57,321 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:02:57,321 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:02:57,322 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:02:57,322 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:02:57,323 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:02:57,324 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:02:57,698 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:57,698 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:57,699 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:02:57,700 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:58,092 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:02:58,093 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:58,094 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:02:58,094 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:02:58,095 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:58,097 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:02:58,098 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:02:58,099 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:02:58,099 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:02:58,100 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:02:58,100 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:58,101 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:02:58,101 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:02:58,102 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:02:58,103 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:02:58,104 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:02:58,104 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:02:58,104 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:02:58,105 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:02:58,106 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:02:58,106 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:02:58,107 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:02:58,586 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:58,587 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:58,588 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:02:58,589 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:59,196 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:02:59,198 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:59,199 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:02:59,200 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:02:59,200 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:59,204 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:02:59,207 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:02:59,208 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:02:59,210 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:02:59,210 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:02:59,211 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:02:59,212 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:02:59,212 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:02:59,215 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:02:59,216 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:02:59,218 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:02:59,218 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:02:59,220 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:02:59,221 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:02:59,223 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:02:59,224 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:02:59,225 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:02:59,806 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:02:59,807 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:02:59,807 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:02:59,809 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:00,263 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:03:00,264 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:00,265 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:03:00,265 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:03:00,266 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:00,268 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:03:00,269 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:03:00,270 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:03:00,271 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:03:00,271 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:03:00,272 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:00,273 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:03:00,273 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:00,275 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:03:00,277 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:03:00,277 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:03:00,278 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:03:00,278 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:03:00,280 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:03:00,281 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:03:00,281 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:03:00,475 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:03:00,476 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:03:00,477 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:03:00,477 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:03:00,478 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:03:00,478 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:03:00,480 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:03:00,881 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:00,882 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:00,882 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:03:00,884 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:01,261 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:03:01,262 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:01,262 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:03:01,263 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:03:01,263 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:01,265 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:03:01,266 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:03:01,267 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:03:01,268 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:03:01,268 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:03:01,269 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:01,269 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:03:01,270 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:01,271 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:03:01,272 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:03:01,274 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:03:01,274 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:03:01,275 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:03:01,275 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:03:01,276 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:03:01,276 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:03:01,290 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:03:01,727 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:01,729 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:01,730 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:03:01,731 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:02,090 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:03:02,091 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:02,092 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:03:02,093 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:03:02,093 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:02,095 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:03:02,096 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:03:02,097 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:03:02,097 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:03:02,098 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:03:02,099 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:02,099 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:03:02,100 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:02,101 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:03:02,102 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:03:02,103 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:03:02,103 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:03:02,103 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:03:02,104 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:03:02,104 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:03:02,104 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:03:02,125 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:03:02,508 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:02,509 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:02,511 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:03:02,526 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:02,930 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:03:02,931 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:02,931 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:03:02,932 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:03:02,932 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:02,935 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:03:02,937 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:03:02,938 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:03:02,938 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:03:02,940 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:03:02,943 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:02,944 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:03:02,945 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:02,952 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:03:02,955 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:03:02,957 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:03:02,959 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:03:02,961 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:03:02,962 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:03:02,963 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:03:02,965 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:03:03,180 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:03:03,181 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:03:03,181 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:03:03,182 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:03:03,182 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:03:03,183 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:03:03,183 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:03:03,568 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:03,570 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:03,570 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:03:03,571 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:03,949 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:03:03,950 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:03,951 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:03:03,952 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:03:03,954 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:03,955 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:03:03,956 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:03:03,957 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:03:03,958 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:03:03,958 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:03:03,959 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:03,959 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:03:03,960 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:03,961 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:03:03,962 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:03:03,963 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:03:03,964 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:03:03,964 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:03:03,965 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:03:03,966 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:03:03,966 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:03:03,985 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:03:04,380 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:04,382 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:04,383 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:03:04,404 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:04,814 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:03:04,815 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:04,816 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:03:04,817 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:03:04,818 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:04,819 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:03:04,821 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:03:04,821 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:03:04,822 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:03:04,823 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:03:04,824 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:04,824 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:03:04,825 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:04,826 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:03:04,828 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:03:04,829 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:03:04,829 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:03:04,830 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:03:04,830 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:03:04,831 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:03:04,832 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:03:04,833 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:03:05,266 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:05,268 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:05,268 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:03:05,269 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:05,676 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:03:05,677 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:05,678 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:03:05,678 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:03:05,679 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:05,680 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:03:05,681 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:03:05,683 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:03:05,684 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:03:05,684 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:03:05,685 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:05,685 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:03:05,686 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:05,687 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:03:05,688 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:03:05,689 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:03:05,689 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:03:05,689 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:03:05,691 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:03:05,691 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:03:05,691 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:03:05,894 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:03:05,894 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:03:05,894 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:03:05,895 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:03:05,895 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:03:05,896 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:03:05,897 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:03:06,262 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:06,263 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:06,263 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:03:06,281 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:06,677 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:03:06,678 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:06,679 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:03:06,680 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:03:06,681 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:06,682 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:03:06,683 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:03:06,684 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:03:06,684 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:03:06,685 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:03:06,686 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:06,687 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:03:06,687 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:06,689 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:03:06,691 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:03:06,691 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:03:06,693 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:03:06,693 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:03:06,694 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:03:06,694 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:03:06,694 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:03:06,696 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:03:07,161 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:07,162 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:07,163 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:03:07,164 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:07,585 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:03:07,586 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:07,587 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:03:07,587 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:03:07,588 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:07,589 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:03:07,590 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:03:07,592 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:03:07,592 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:03:07,593 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:03:07,593 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:07,594 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:03:07,594 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:07,596 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:03:07,598 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:03:07,599 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:03:07,599 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:03:07,600 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:03:07,600 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:03:07,601 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:03:07,601 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:03:07,602 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:03:08,054 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:08,055 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:08,055 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:03:08,056 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:08,495 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:03:08,497 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:08,497 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:03:08,498 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:03:08,499 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:08,500 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:03:08,502 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:03:08,502 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:03:08,503 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:03:08,503 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:03:08,504 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:08,505 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:03:08,505 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:08,506 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:03:08,508 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:03:08,508 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:03:08,509 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:03:08,510 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:03:08,510 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:03:08,511 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:03:08,511 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:03:08,713 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:03:08,714 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:03:08,714 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:03:08,715 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:03:08,715 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:03:08,716 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:03:08,717 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:03:09,149 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:09,150 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:09,151 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:03:09,152 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:09,564 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:03:09,565 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:09,565 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:03:09,566 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:03:09,567 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:09,568 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:03:09,569 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:03:09,571 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:03:09,572 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:03:09,572 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:03:09,573 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:09,573 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:03:09,573 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:09,575 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:03:09,577 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:03:09,577 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:03:09,578 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:03:09,578 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:03:09,579 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:03:09,579 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:03:09,580 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:03:09,581 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:03:10,054 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:10,055 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:10,056 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:03:10,057 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:10,515 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:03:10,522 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:10,522 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:03:10,523 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:03:10,524 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:10,525 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:03:10,526 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:03:10,527 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:03:10,528 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:03:10,528 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:03:10,529 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:10,530 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:03:10,530 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:10,531 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:03:10,533 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:03:10,534 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:03:10,535 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:03:10,535 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:03:10,535 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:03:10,536 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:03:10,536 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:03:10,537 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:03:11,014 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:11,015 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:11,015 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:03:11,016 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:11,449 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:03:11,450 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:11,451 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:03:11,452 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:03:11,452 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:11,454 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:03:11,455 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:03:11,456 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:03:11,457 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:03:11,457 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:03:11,458 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:11,459 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:03:11,459 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:11,460 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:03:11,462 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:03:11,463 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:03:11,463 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:03:11,464 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:03:11,465 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:03:11,465 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:03:11,465 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:03:11,670 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:03:11,670 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:03:11,671 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:03:11,671 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:03:11,672 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:03:11,672 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:03:11,674 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:03:12,109 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:12,110 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:12,110 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:03:12,111 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:12,551 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:03:12,552 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:12,553 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:03:12,554 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:03:12,555 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:12,557 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:03:12,558 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:03:12,559 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:03:12,560 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:03:12,560 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:03:12,561 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:12,562 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:03:12,562 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:12,564 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:03:12,565 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:03:12,567 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:03:12,568 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:03:12,568 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:03:12,568 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:03:12,569 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:03:12,569 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:03:12,586 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:03:13,119 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:13,121 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:13,121 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:03:13,123 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:13,625 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:03:13,626 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:13,627 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:03:13,628 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:03:13,628 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:13,631 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:03:13,632 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:03:13,634 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:03:13,634 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:03:13,634 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:03:13,636 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:13,636 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:03:13,637 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:13,639 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:03:13,640 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:03:13,641 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:03:13,641 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:03:13,641 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:03:13,642 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:03:13,643 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:03:13,644 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:03:13,668 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:03:14,113 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:14,114 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:14,115 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:03:14,116 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:14,509 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:03:14,510 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:14,511 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:03:14,511 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:03:14,512 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:14,514 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:03:14,515 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:03:14,516 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:03:14,517 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:03:14,517 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:03:14,518 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:14,519 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:03:14,519 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:14,520 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:03:14,522 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:03:14,523 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:03:14,523 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:03:14,524 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:03:14,524 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:03:14,525 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:03:14,525 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:03:14,720 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:03:14,721 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:03:14,722 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:03:14,722 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:03:14,723 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:03:14,723 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:03:14,724 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:03:15,177 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:15,178 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:15,178 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:03:15,180 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:15,565 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:03:15,566 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:15,567 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:03:15,567 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:03:15,568 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:15,569 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:03:15,570 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:03:15,572 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:03:15,573 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:03:15,573 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:03:15,574 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:15,575 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:03:15,576 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:15,577 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:03:15,578 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:03:15,578 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:03:15,579 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:03:15,579 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:03:15,579 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:03:15,580 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:03:15,581 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:03:15,603 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:03:16,003 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:16,005 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:16,005 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:03:16,020 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:16,397 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:03:16,398 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:16,399 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:03:16,399 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:03:16,400 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:16,401 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:03:16,402 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:03:16,403 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:03:16,404 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:03:16,404 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:03:16,404 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:16,405 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:03:16,406 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:16,407 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:03:16,408 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:03:16,409 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:03:16,409 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:03:16,410 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:03:16,410 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:03:16,411 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:03:16,411 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:03:16,412 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:03:16,854 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:16,855 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:16,855 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:03:16,872 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:17,226 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:03:17,227 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:17,228 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:03:17,228 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:03:17,228 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:17,229 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:03:17,231 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:03:17,231 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:03:17,233 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:03:17,233 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:03:17,234 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:17,234 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:03:17,235 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:17,236 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:03:17,237 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:03:17,238 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:03:17,238 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:03:17,238 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:03:17,239 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:03:17,240 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:03:17,240 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:03:17,433 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:03:17,434 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:03:17,434 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:03:17,435 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:03:17,435 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:03:17,436 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:03:17,437 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:03:17,810 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:17,811 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:17,812 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:03:17,835 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:18,198 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:03:18,198 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:18,199 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:03:18,200 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:03:18,200 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:18,201 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:03:18,202 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:03:18,202 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:03:18,203 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:03:18,203 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:03:18,203 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:18,204 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:03:18,204 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:18,205 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:03:18,206 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:03:18,206 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:03:18,207 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:03:18,207 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:03:18,207 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:03:18,207 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:03:18,208 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:03:18,220 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:03:18,577 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:18,577 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:18,578 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:03:18,595 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:18,903 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:03:18,904 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:18,904 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:03:18,905 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:03:18,905 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:18,906 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:03:18,907 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:03:18,908 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:03:18,909 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:03:18,909 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:03:18,910 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:18,910 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:03:18,910 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:18,911 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:03:18,912 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:03:18,912 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:03:18,913 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:03:18,913 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:03:18,913 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:03:18,914 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:03:18,914 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:03:18,915 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:03:19,216 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:19,216 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:19,217 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:03:19,233 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:19,514 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:03:19,516 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:19,516 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:03:19,517 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:03:19,517 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:19,518 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:03:19,518 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:03:19,519 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:03:19,520 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:03:19,520 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:03:19,521 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:19,521 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:03:19,522 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:19,522 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:03:19,523 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:03:19,523 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:03:19,524 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:03:19,524 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:03:19,524 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:03:19,525 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:03:19,525 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:03:19,728 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:03:19,728 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:03:19,729 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:03:19,730 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:03:19,731 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:03:19,731 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:03:19,732 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:03:20,016 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:20,016 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:20,017 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:03:20,040 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:20,303 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:03:20,304 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:20,304 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:03:20,305 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:03:20,305 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:20,306 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:03:20,308 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:03:20,308 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:03:20,309 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:03:20,309 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:03:20,310 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:20,311 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:03:20,311 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:20,312 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:03:20,313 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:03:20,314 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:03:20,314 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:03:20,314 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:03:20,315 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:03:20,315 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:03:20,316 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:03:20,317 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:03:20,585 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:20,586 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:20,586 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:03:20,587 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:20,833 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:03:20,834 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:20,834 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:03:20,835 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:03:20,836 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:20,837 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:03:20,837 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:03:20,838 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:03:20,839 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:03:20,839 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:03:20,839 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:20,840 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:03:20,840 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:20,841 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:03:20,841 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:03:20,842 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:03:20,842 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:03:20,842 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:03:20,843 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:03:20,843 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:03:20,843 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:03:20,845 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:03:21,107 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:21,108 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:21,108 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:03:21,109 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:21,355 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:03:21,356 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:21,357 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:03:21,357 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:03:21,358 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:21,359 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:03:21,360 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:03:21,360 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:03:21,361 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:03:21,361 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:03:21,361 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:21,362 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:03:21,362 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:21,363 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:03:21,365 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:03:21,365 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:03:21,366 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:03:21,366 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:03:21,366 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:03:21,367 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:03:21,367 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:03:21,566 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:03:21,566 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:03:21,566 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:03:21,566 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:03:21,568 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:03:21,569 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:03:21,581 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:03:21,834 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:21,836 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:21,837 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:03:21,859 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:22,123 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:03:22,124 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:22,125 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:03:22,125 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:03:22,126 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:22,126 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:03:22,128 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:03:22,129 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:03:22,130 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:03:22,130 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:03:22,130 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:22,131 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:03:22,131 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:22,132 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:03:22,133 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:03:22,133 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:03:22,134 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:03:22,134 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:03:22,134 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:03:22,134 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:03:22,135 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:03:22,135 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:03:22,393 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:22,393 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:22,394 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:03:22,395 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:22,661 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:03:22,662 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:22,662 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:03:22,663 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:03:22,663 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:22,664 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:03:22,665 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:03:22,666 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:03:22,667 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:03:22,667 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:22,668 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:03:22,667 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:03:22,668 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:22,669 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:03:22,670 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:03:22,670 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:03:22,671 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:03:22,671 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:03:22,671 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:03:22,671 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:03:22,672 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:03:22,684 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:03:22,983 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:22,984 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:22,985 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:03:22,986 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:23,276 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:03:23,277 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:23,277 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:03:23,278 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:03:23,278 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:23,279 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:03:23,280 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:03:23,281 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:03:23,282 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:03:23,282 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:03:23,283 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:23,283 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:03:23,284 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:23,285 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:03:23,285 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:03:23,287 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:03:23,287 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:03:23,287 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:03:23,288 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:03:23,288 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:03:23,288 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:03:23,491 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:03:23,491 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:03:23,491 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:03:23,491 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:03:23,493 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:03:23,493 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:03:23,494 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:03:23,854 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:23,855 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:23,856 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:03:23,856 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:24,154 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:03:24,159 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:24,161 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:03:24,161 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:03:24,161 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:24,162 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:03:24,163 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:03:24,163 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:03:24,164 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:03:24,164 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:03:24,164 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:24,165 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:03:24,165 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:24,166 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:03:24,167 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:03:24,167 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:03:24,168 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:03:24,168 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:03:24,168 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:03:24,168 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:03:24,169 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:03:24,186 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:03:24,514 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:24,515 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:24,515 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:03:24,527 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:24,867 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:03:24,869 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:24,869 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:03:24,871 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:03:24,871 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:24,873 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:03:24,874 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:03:24,875 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:03:24,876 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:03:24,876 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:03:24,877 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:24,877 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:03:24,878 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:24,879 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:03:24,879 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:03:24,880 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:03:24,880 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:03:24,880 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:03:24,881 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:03:24,882 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:03:24,882 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:03:24,898 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:03:25,282 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:25,283 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:25,283 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:03:25,284 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:25,667 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:03:25,668 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:25,668 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:03:25,669 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:03:25,669 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:25,670 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:03:25,671 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:03:25,672 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:03:25,673 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:03:25,673 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:03:25,675 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:25,675 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:03:25,676 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:25,677 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:03:25,677 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:03:25,678 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:03:25,678 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:03:25,679 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:03:25,679 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:03:25,679 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:03:25,680 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:03:25,875 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:03:25,875 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:03:25,876 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:03:25,876 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:03:25,877 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:03:25,877 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:03:25,878 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:03:26,199 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:26,201 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:26,202 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:03:26,202 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:26,529 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:03:26,530 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:26,530 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:03:26,531 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:03:26,531 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:26,532 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:03:26,533 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:03:26,533 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:03:26,534 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:03:26,534 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:03:26,535 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:26,535 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:03:26,535 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:26,537 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:03:26,538 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:03:26,538 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:03:26,539 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:03:26,539 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:03:26,539 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:03:26,540 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:03:26,540 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:03:26,541 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:03:26,903 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:26,904 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:26,905 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:03:26,906 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:27,259 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:03:27,261 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:27,261 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:03:27,262 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:03:27,262 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:27,263 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:03:27,264 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:03:27,266 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:03:27,266 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:03:27,266 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:03:27,267 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:27,267 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:03:27,268 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:27,268 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:03:27,269 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:03:27,269 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:03:27,270 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:03:27,270 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:03:27,270 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:03:27,271 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:03:27,271 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:03:27,271 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:03:27,613 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:27,614 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:27,615 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:03:27,633 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:27,943 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:03:27,945 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:27,946 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:03:27,947 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:03:27,947 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:27,948 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:03:27,949 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:03:27,950 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:03:27,951 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:03:27,951 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:03:27,951 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:27,952 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:03:27,952 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:27,953 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:03:27,954 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:03:27,955 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:03:27,955 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:03:27,955 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:03:27,956 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:03:27,956 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:03:27,956 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:03:28,162 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:03:28,162 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:03:28,163 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:03:28,163 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:03:28,164 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:03:28,164 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:03:28,165 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:03:28,484 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:28,484 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:28,485 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:03:28,485 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:28,780 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:03:28,781 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:28,782 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:03:28,782 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:03:28,783 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:28,784 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:03:28,784 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:03:28,786 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:03:28,787 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:03:28,787 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:03:28,787 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:28,788 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:03:28,788 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:28,789 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:03:28,789 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:03:28,790 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:03:28,790 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:03:28,791 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:03:28,791 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:03:28,791 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:03:28,792 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:03:28,792 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:03:29,110 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:29,111 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:29,111 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:03:29,113 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:29,423 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:03:29,424 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:29,425 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:03:29,426 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:03:29,426 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:29,427 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:03:29,429 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:03:29,429 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:03:29,430 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:03:29,430 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:03:29,431 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:29,431 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:03:29,431 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:29,433 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:03:29,433 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:03:29,434 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:03:29,434 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:03:29,434 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:03:29,435 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:03:29,435 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:03:29,435 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:03:29,436 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:03:29,736 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:29,737 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:29,737 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:03:29,738 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:30,046 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:03:30,048 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:30,049 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:03:30,049 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:03:30,050 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:30,051 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:03:30,052 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:03:30,052 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:03:30,053 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:03:30,053 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:03:30,053 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:30,054 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:03:30,054 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:30,055 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:03:30,056 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:03:30,056 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:03:30,057 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:03:30,057 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:03:30,057 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:03:30,058 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:03:30,058 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:03:30,268 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:03:30,268 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:03:30,268 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:03:30,269 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:03:30,269 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:03:30,270 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:03:30,271 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:03:30,576 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:30,577 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:30,577 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:03:30,577 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:30,858 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:03:30,858 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:30,859 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:03:30,859 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:03:30,860 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:30,861 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:03:30,861 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:03:30,863 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:03:30,864 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:03:30,864 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:03:30,865 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:30,865 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:03:30,865 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:30,866 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:03:30,867 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:03:30,867 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:03:30,868 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:03:30,868 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:03:30,868 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:03:30,868 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:03:30,869 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:03:30,869 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:03:31,150 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:31,151 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:31,151 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:03:31,153 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:31,443 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:03:31,444 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:31,444 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:03:31,445 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:03:31,445 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:31,447 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:03:31,447 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:03:31,448 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:03:31,448 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:03:31,449 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:03:31,449 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:31,449 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:03:31,450 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:31,451 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:03:31,451 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:03:31,452 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:03:31,452 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:03:31,452 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:03:31,452 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:03:31,453 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:03:31,453 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:03:31,454 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:03:31,740 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:31,741 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:31,742 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:03:31,743 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:32,017 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:03:32,020 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:32,020 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:03:32,020 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:03:32,020 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:32,022 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:03:32,022 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:03:32,023 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:03:32,023 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:03:32,024 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:03:32,024 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:32,025 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:03:32,025 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:32,027 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:03:32,027 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:03:32,028 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:03:32,028 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:03:32,028 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:03:32,029 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:03:32,029 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:03:32,029 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:03:32,237 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:03:32,237 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:03:32,238 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:03:32,238 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:03:32,239 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:03:32,239 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:03:32,241 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:03:32,520 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:32,522 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:32,523 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:03:32,549 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:32,812 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:03:32,814 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:32,814 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:03:32,815 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:03:32,815 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:32,816 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:03:32,817 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:03:32,818 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:03:32,818 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:03:32,819 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:32,819 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:03:32,820 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:03:32,820 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:32,822 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:03:32,822 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:03:32,823 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:03:32,824 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:03:32,824 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:03:32,824 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:03:32,825 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:03:32,825 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:03:32,844 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:03:33,117 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:33,118 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:33,118 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:03:33,136 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:33,440 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:03:33,440 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:33,441 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:03:33,441 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:03:33,441 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:33,442 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:03:33,444 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:03:33,444 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:03:33,444 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:03:33,445 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:03:33,445 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:33,445 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:03:33,446 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:33,447 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:03:33,448 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:03:33,448 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:03:33,449 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:03:33,449 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:03:33,449 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:03:33,450 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:03:33,450 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:03:33,451 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:03:33,744 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:33,745 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:33,745 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:03:33,760 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:34,039 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:03:34,040 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:34,041 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:03:34,042 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:03:34,042 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:34,044 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:03:34,044 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:03:34,045 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:03:34,045 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:03:34,046 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:34,046 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:03:34,046 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:03:34,047 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:34,048 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:03:34,049 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:03:34,049 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:03:34,050 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:03:34,050 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:03:34,050 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:03:34,051 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:03:34,051 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:03:34,250 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:03:34,251 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:03:34,251 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:03:34,251 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:03:34,251 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:03:34,252 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:03:34,253 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:03:34,547 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:34,548 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:34,548 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:03:34,571 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:34,862 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:03:34,864 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:34,864 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:03:34,865 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:03:34,865 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:34,866 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:03:34,867 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:03:34,867 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:03:34,868 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:03:34,869 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:03:34,869 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:34,870 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:03:34,870 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:34,871 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:03:34,872 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:03:34,872 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:03:34,873 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:03:34,873 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:03:34,873 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:03:34,873 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:03:34,874 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:03:34,895 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:03:35,181 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:35,182 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:35,182 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:03:35,207 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:35,506 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:03:35,507 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:35,507 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:03:35,508 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:03:35,508 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:35,509 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:03:35,511 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:03:35,512 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:03:35,512 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:03:35,512 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:03:35,513 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:35,513 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:03:35,514 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:35,516 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:03:35,517 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:03:35,518 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:03:35,518 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:03:35,518 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:03:35,519 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:03:35,519 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:03:35,519 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:03:35,535 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:03:35,807 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:35,808 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:35,808 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:03:35,830 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:36,113 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:03:36,113 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:36,114 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:03:36,114 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:03:36,114 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:36,116 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:03:36,117 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:03:36,117 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:03:36,117 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:03:36,118 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:03:36,118 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:36,119 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:03:36,119 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:36,120 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:03:36,121 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:03:36,122 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:03:36,122 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:03:36,122 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:03:36,123 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:03:36,123 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:03:36,124 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:03:36,330 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:03:36,330 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:03:36,330 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:03:36,332 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:03:36,332 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:03:36,333 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:03:36,334 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:03:36,602 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:36,603 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:36,604 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:03:36,604 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:36,871 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:03:36,872 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:36,872 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:03:36,873 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:03:36,873 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:36,873 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:03:36,874 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:03:36,875 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:03:36,875 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:03:36,876 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:36,876 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:03:36,876 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:03:36,877 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:36,878 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:03:36,878 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:03:36,879 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:03:36,880 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:03:36,880 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:03:36,880 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:03:36,880 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:03:36,881 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:03:36,882 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:03:37,162 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:37,163 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:37,164 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:03:37,187 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:37,475 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:03:37,476 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:37,477 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:03:37,477 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:03:37,477 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:37,478 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:03:37,479 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:03:37,479 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:03:37,481 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:03:37,481 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:03:37,482 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:37,482 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:03:37,482 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:37,483 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:03:37,484 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:03:37,484 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:03:37,485 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:03:37,485 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:03:37,485 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:03:37,485 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:03:37,485 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:03:37,498 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:03:37,769 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:37,770 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:37,771 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:03:37,781 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:38,049 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:03:38,049 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:38,050 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:03:38,050 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:03:38,050 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:38,052 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:03:38,053 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:03:38,054 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:03:38,055 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:03:38,055 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:03:38,055 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:38,056 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:03:38,056 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:38,057 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:03:38,058 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:03:38,058 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:03:38,059 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:03:38,059 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:03:38,059 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:03:38,059 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:03:38,060 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:03:38,264 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:03:38,265 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:03:38,266 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:03:38,266 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:03:38,266 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:03:38,266 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:03:38,267 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:03:38,526 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:38,527 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:38,527 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:03:38,528 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:38,780 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:03:38,781 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:38,782 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:03:38,782 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:03:38,783 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:38,783 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:03:38,784 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:03:38,785 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:03:38,785 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:03:38,786 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:38,786 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:03:38,786 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:03:38,786 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:38,787 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:03:38,788 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:03:38,789 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:03:38,790 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:03:38,790 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:03:38,790 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:03:38,790 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:03:38,791 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:03:38,804 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:03:39,095 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:39,095 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:39,097 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:03:39,098 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:39,365 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:03:39,366 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:39,366 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:03:39,367 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:03:39,367 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:39,367 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:03:39,368 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:03:39,370 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:03:39,370 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:03:39,370 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:03:39,371 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:39,371 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:03:39,372 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:39,373 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:03:39,373 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:03:39,374 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:03:39,374 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:03:39,374 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:03:39,375 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:03:39,376 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:03:39,376 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:03:39,377 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:03:39,680 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:39,681 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:39,681 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:03:39,682 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:39,969 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:03:39,970 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:39,970 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:03:39,971 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:03:39,971 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:39,972 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:03:39,973 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:03:39,974 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:03:39,975 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:03:39,975 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:03:39,976 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:39,976 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:03:39,977 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:39,978 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:03:39,979 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:03:39,979 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:03:39,980 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:03:39,980 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:03:39,980 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:03:39,981 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:03:39,981 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:03:40,182 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:03:40,183 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:03:40,183 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:03:40,184 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:03:40,184 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:03:40,185 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:03:40,185 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:03:40,519 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:40,520 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:40,520 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:03:40,521 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:40,786 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:03:40,786 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:40,787 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:03:40,787 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:03:40,788 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:40,788 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:03:40,789 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:03:40,790 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:03:40,790 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:03:40,791 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:40,791 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:03:40,791 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:03:40,792 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:40,792 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:03:40,793 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:03:40,794 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:03:40,794 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:03:40,794 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:03:40,794 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:03:40,795 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:03:40,795 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:03:40,796 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:03:41,067 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:41,069 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:41,070 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:03:41,071 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:41,378 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:03:41,380 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:41,380 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:03:41,380 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:03:41,382 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:41,382 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:03:41,383 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:03:41,384 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:03:41,385 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:03:41,385 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:03:41,385 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:41,386 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:03:41,386 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:41,388 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:03:41,388 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:03:41,389 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:03:41,390 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:03:41,390 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:03:41,390 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:03:41,391 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:03:41,391 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:03:41,392 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:03:41,732 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:41,734 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:41,734 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:03:41,735 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:42,017 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:03:42,018 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:42,018 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:03:42,019 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:03:42,019 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:42,021 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:03:42,022 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:03:42,022 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:03:42,023 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:03:42,024 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:03:42,024 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:42,025 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:03:42,025 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:42,026 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:03:42,026 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:03:42,027 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:03:42,027 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:03:42,028 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:03:42,028 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:03:42,028 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:03:42,029 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:03:42,234 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:03:42,235 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:03:42,236 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:03:42,236 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:03:42,237 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:03:42,238 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:03:42,239 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:03:42,571 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:42,572 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:42,572 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:03:42,591 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:42,884 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:03:42,886 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:42,886 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:03:42,887 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:03:42,887 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:42,889 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:03:42,889 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:03:42,890 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:03:42,891 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:03:42,891 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:03:42,892 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:42,892 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:03:42,893 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:42,894 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:03:42,895 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:03:42,895 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:03:42,896 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:03:42,896 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:03:42,897 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:03:42,897 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:03:42,898 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:03:42,898 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:03:43,242 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:43,244 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:43,245 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:03:43,246 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:43,540 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:03:43,541 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:43,542 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:03:43,543 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:03:43,543 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:43,544 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:03:43,545 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:03:43,547 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:03:43,548 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:03:43,548 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:03:43,549 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:43,549 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:03:43,550 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:43,551 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:03:43,552 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:03:43,552 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:03:43,553 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:03:43,553 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:03:43,554 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:03:43,555 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:03:43,555 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:03:43,556 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:03:43,823 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:43,824 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:43,824 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:03:43,825 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:44,085 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:03:44,086 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:44,086 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:03:44,087 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:03:44,087 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:44,089 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:03:44,089 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:03:44,091 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:03:44,091 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:03:44,091 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:03:44,092 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:44,092 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:03:44,093 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:44,094 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:03:44,095 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:03:44,096 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:03:44,096 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:03:44,097 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:03:44,097 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:03:44,097 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:03:44,098 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:03:44,291 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:03:44,292 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:03:44,293 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:03:44,293 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:03:44,293 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:03:44,294 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:03:44,295 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:03:44,527 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:44,528 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:44,528 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:03:44,529 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:44,780 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:03:44,781 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:44,782 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:03:44,782 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:03:44,783 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:44,784 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:03:44,784 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:03:44,786 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:03:44,786 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:03:44,786 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:03:44,787 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:44,788 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:03:44,788 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:44,790 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:03:44,790 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:03:44,791 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:03:44,792 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:03:44,792 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:03:44,792 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:03:44,793 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:03:44,793 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:03:44,817 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:03:45,078 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:45,079 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:45,080 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:03:45,080 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:45,325 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:03:45,326 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:45,326 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:03:45,327 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:03:45,327 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:45,328 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:03:45,329 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:03:45,329 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:03:45,329 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:03:45,330 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:03:45,331 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:45,331 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:03:45,332 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:45,334 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:03:45,334 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:03:45,335 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:03:45,336 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:03:45,336 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:03:45,336 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:03:45,336 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:03:45,337 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:03:45,338 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:03:45,610 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:45,610 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:45,611 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:03:45,622 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:45,878 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5557/start "HTTP/1.1 200 OK"
2025-10-21 15:03:45,879 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:45,880 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 57: proxyServiceStart changed to '1'
2025-10-21 15:03:45,880 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 57: {'proxyid': 57, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}}
2025-10-21 15:03:45,881 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:45,882 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:03:45,883 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:03:45,885 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:03:45,886 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 57: network OK
2025-10-21 15:03:45,886 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:03:45,886 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 57 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:45,887 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 57: healthy=True, response_time=0.0
2025-10-21 15:03:45,887 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/57, Payload: {'message': 'OK', 'proxyid': 57, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:45,889 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/57, QoS: 0, Payload: {"message": "OK", "proxyid": 57, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5557", "remark": "Stk2"}
2025-10-21 15:03:45,890 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/57 - 結果碼: 0
2025-10-21 15:03:45,890 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/57
2025-10-21 15:03:45,891 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/57, 內容長度: 196 bytes
2025-10-21 15:03:45,891 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 60 (enabled: 0) ==========
2025-10-21 15:03:45,892 - app.services.background_worker - WARNING - [HEALTH_SYNC] No status cache for device 60
2025-10-21 15:03:45,893 - app.services.background_worker - INFO - [HEALTH_SYNC] Completed health check for 4 devices
2025-10-21 15:03:45,893 - app.services.background_worker - INFO - [BG_WORKER] Background task execution cycle completed
2025-10-21 15:03:46,099 - app.services.background_worker - INFO - [BG_WORKER] Starting background task execution cycle
2025-10-21 15:03:46,099 - app.services.background_worker - INFO - [HEALTH_SYNC] Starting synchronous health check for all proxy services
2025-10-21 15:03:46,099 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 55 (enabled: 1) ==========
2025-10-21 15:03:46,099 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 55 current status: OK
2025-10-21 15:03:46,101 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 55 <<<<<
2025-10-21 15:03:46,101 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 55 (IP: 127.0.0.1:5555)
2025-10-21 15:03:46,103 - app.services.device_processor - INFO - Checking health for proxy 55 at http://127.0.0.1:5555/Health
2025-10-21 15:03:46,335 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5555/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:46,336 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:46,336 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 55, calling start API
2025-10-21 15:03:46,337 - app.services.device_processor - INFO - Sending start data for proxy 55: {'proxyid': '55', 'Controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:46,565 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5555/start "HTTP/1.1 200 OK"
2025-10-21 15:03:46,566 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 55: {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:46,567 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 55: proxyServiceStart changed to '1'
2025-10-21 15:03:46,567 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 55: {'proxyid': 55, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 55, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}}
2025-10-21 15:03:46,568 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:46,569 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:03:46,570 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:03:46,570 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:03:46,570 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 55: network OK
2025-10-21 15:03:46,571 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 55 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:46,571 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:03:46,572 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 55: healthy=True, response_time=0.0
2025-10-21 15:03:46,572 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/55, Payload: {'message': 'OK', 'proxyid': 55, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E82', 'proxy_ip': '127.0.0.1', 'proxy_port': '5555', 'remark': 'tsc11'}
2025-10-21 15:03:46,573 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/55, QoS: 0, Payload: {"message": "OK", "proxyid": 55, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E82", "proxy_ip": "127.0.0.1", "proxy_port": "5555", "remark": "tsc11"}
2025-10-21 15:03:46,574 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/55 - 結果碼: 0
2025-10-21 15:03:46,575 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/55
2025-10-21 15:03:46,576 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/55, 內容長度: 197 bytes
2025-10-21 15:03:46,576 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 56 (enabled: 1) ==========
2025-10-21 15:03:46,576 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 56 current status: OK
2025-10-21 15:03:46,576 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 56 <<<<<
2025-10-21 15:03:46,577 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 56 (IP: 127.0.0.1:5556)
2025-10-21 15:03:46,578 - app.services.device_processor - INFO - Checking health for proxy 56 at http://127.0.0.1:5556/Health
2025-10-21 15:03:46,813 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5556/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:46,814 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:46,814 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 56, calling start API
2025-10-21 15:03:46,815 - app.services.device_processor - INFO - Sending start data for proxy 56: {'proxyid': '56', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:47,045 - httpx - INFO - HTTP Request: POST http://127.0.0.1:5556/start "HTTP/1.1 200 OK"
2025-10-21 15:03:47,046 - app.services.device_processor - INFO - [START_PROXY] Successfully started proxy service 56: {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:47,047 - app.services.device_processor - INFO - [START_PROXY] Updated device status cache for proxy 56: proxyServiceStart changed to '1'
2025-10-21 15:03:47,047 - app.services.device_processor - INFO - [HEALTH_CHECK] Start API result for device 56: {'proxyid': 56, 'status': 'success', 'message': 'OK', 'result': {'message': 'OK', 'proxyid': 56, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}}
2025-10-21 15:03:47,048 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'healthy', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:47,049 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "healthy", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:03:47,050 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:03:47,051 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:03:47,051 - app.services.device_processor - INFO - [HEALTH_CHECK] Published MQTT message for device 56: network OK
2025-10-21 15:03:47,052 - app.services.background_worker - INFO - [HEALTH_SYNC] Proxy 56 health check result: proxyServiceStart=1, healthy=True, message=OK
2025-10-21 15:03:47,052 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:03:47,052 - app.services.background_worker - INFO - [DEBUG] Would publish health check result for proxy 56: healthy=True, response_time=0.0
2025-10-21 15:03:47,052 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Publishing proxy status update - Topic: mcs/events/ProxyService/status/56, Payload: {'message': 'OK', 'proxyid': 56, 'status': 'running', 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5556', 'remark': 'Stk1'}
2025-10-21 15:03:47,053 - app.mqtt.client - INFO - [MQTT_CLIENT] Publishing message - Topic: mcs/events/ProxyService/status/56, QoS: 0, Payload: {"message": "OK", "proxyid": 56, "status": "running", "proxyServiceAlive": "1", "proxyServiceStart": "1", "controller_type": "E88", "proxy_ip": "127.0.0.1", "proxy_port": "5556", "remark": "Stk1"}
2025-10-21 15:03:47,054 - app.mqtt.client - INFO - [MQTT_CLIENT] 成功發佈訊息到主題 mcs/events/ProxyService/status/56 - 結果碼: 0
2025-10-21 15:03:47,055 - app.mqtt.publisher - INFO - [MQTT_PUBLISH] Successfully published to topic: mcs/events/ProxyService/status/56
2025-10-21 15:03:47,055 - app.services.background_worker - INFO - [HEALTH_SYNC] ========== Processing device 57 (enabled: 1) ==========
2025-10-21 15:03:47,056 - app.mqtt.client - INFO - [MQTT_CLIENT] 收到MQTT訊息 - 主題: mcs/events/ProxyService/status/56, 內容長度: 196 bytes
2025-10-21 15:03:47,056 - app.services.background_worker - INFO - [HEALTH_SYNC] Device 57 current status: OK
2025-10-21 15:03:47,056 - app.services.background_worker - INFO - [HEALTH_SYNC] >>>>> Health checking enabled device 57 <<<<<
2025-10-21 15:03:47,057 - app.services.device_processor - INFO - [HEALTH_CHECK] Starting health check for proxy 57 (IP: 127.0.0.1:5557)
2025-10-21 15:03:47,057 - app.services.device_processor - INFO - Checking health for proxy 57 at http://127.0.0.1:5557/Health
2025-10-21 15:03:47,291 - httpx - INFO - HTTP Request: GET http://127.0.0.1:5557/Health "HTTP/1.1 200 OK"
2025-10-21 15:03:47,291 - app.services.device_processor - INFO - [HEALTH_CHECK] Health check response for proxy 57: {'message': 'OK', 'proxyid': 57, 'proxyServiceAlive': '1', 'proxyServiceStart': '1', 'controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:47,292 - app.services.device_processor - INFO - [HEALTH_CHECK] Network communication OK for device 57, calling start API
2025-10-21 15:03:47,293 - app.services.device_processor - INFO - Sending start data for proxy 57: {'proxyid': '57', 'Controller_type': 'E88', 'proxy_ip': '127.0.0.1', 'proxy_port': '5557', 'remark': 'Stk2'}
2025-10-21 15:03:47,519 - root - INFO - Shutting down Device Service...
2025-10-21 15:03:47,519 - app.services.background_worker - INFO - Background worker stopped
2025-10-21 15:03:47,520 - app.mqtt.client - INFO - [MQTT_CLIENT] 開始斷開MQTT連接 - 客戶端ID: b'device_service_1761026374556_39424'
2025-10-21 15:03:48,067 - app.mqtt.client - WARNING - [MQTT_CLIENT] MQTT客戶端斷開連接 - 錯誤碼: 0, 客戶端ID: b'device_service_1761026374556_39424'
2025-10-21 15:03:48,068 - app.mqtt.client - INFO - [MQTT_CLIENT] MQTT客戶端已斷開連接
2025-10-21 15:03:48,069 - root - INFO - MQTT客戶端已關閉
2025-10-21 15:03:48,069 - root - INFO - Device Service shutdown complete
2025-10-21 15:03:48,071 - app.services.background_worker - INFO - Background worker task cancelled
